/*!
 * Basis javasript library 
 * http://code.google.com/p/basis-js/
 *
 * @author
 * Roman Dvornov <rdvornov@gmail.com>
 *
 * @copyright
 * Copyright (c) 2006-2011, Roman Dvornov
 *
 * @license
 * GNU General Public License v2.0 <http://www.gnu.org/licenses/gpl-2.0.html>
 */
(function(){function m(c,x){for(var a in x)c[a]=x[a];return c}function h(c,x){for(var a in x)a in c==!1&&(c[a]=x[a]);return c}function j(c){var a=[],g;for(g in c)a.push(g);return a}function k(c){return c==null||c==void 0}function s(c){return c}function o(){return!0}function v(){return null}function w(){}function t(c){var a={};c.names=function(c){return Object.slice(a,typeof c=="string"?c.qw():c)};c.extend=function(c){h(a,c);m(this,c);return this};return c}function z(c,a){for(var g=c.split("."),n=
window,e,b,p;g.length;)if(e=g.shift(),b=(b?b+".":"")+e,n[e]||(n[e]=t((!g.length?a:null)||function(){},b),p&&(p.namespaces_[b]=n[e])),n=n[e],!p&&(p=n,!p.namespaces_))p.namespaces_={};return n}m(Object,{extend:m,complete:h,keys:j,values:function(c){var a=[],g;for(g in c)a.push(c[g]);return a},slice:function(c,a){var g={};if(!a)return m(g,c);for(var n=0,e;e=a[n++];)e in c&&(g[e]=c[e]);return g},splice:function(c,a){var g={};if(!a)return m(g,c);for(var n=0,e;e=a[n++];)e in c&&(g[e]=c[e],delete c[e]);
return g},iterate:function(c,a,g){var n=[],e;for(e in c)n.push(a.call(g,e,c[e]));return n},coalesce:function(){for(var c=arguments,a=0;a<c.length;a++)if(c[a]!=null)return c[a]}});var u=function(){var c=1,a={},g={};c++;return function(n,e){var b,p;if(!e){if(n.getter)return n.getter;if(typeof n=="function")return n}if(typeof n!="function")g[n]?b=g[n]:(b=new Function("object","return object != null ? object."+n+" : object"),b.path=n,b.getterIdx_=c++,g[n]=b);else if(b=n,!b.getterIdx_)b.getterIdx_=c++;
p=b.getterIdx_;var i=a[p];if(i)if(typeof e=="undefined"){if(i.nmg)return i.nmg}else for(p=0;p<i.length;p++){if(i[p].modificator===e)return i[p].getter}else i=a[p]=[];var l=!0;switch(typeof e){case "string":p=function(c){return e.format(b(c))};break;case "function":p=function(c){return e(b(c))};break;case "object":l=!1;p=function(c){return e[b(c)]};break;default:p=b.path?b:function(c){return b(c)}}if(l&&(i.push({getter:p,modificator:e}),typeof e=="undefined"))i.nmg=p;return p.getter=p}}();m(Function,
{$undefined:function(c){return c==void 0},$defined:function(c){return c!=void 0},$isNull:k,$isNotNull:function(c){return c!=null&&c!=void 0},$isSame:function(c){return c===this},$isNotSame:function(c){return c!==this},$self:s,$false:function(){return!1},$true:o,$null:v,$undef:w,getter:u,def:function(c,a,g){g=g||k;return function(n){n=c(n);return g(n)?a:n}},wrapper:function(c){return function(a){var g={};g[c]=a;return g}},lazyInit:function(c,a){var g=0,n;return function(){g++||(n=c.apply(a||this));
return n}},lazyInitAndRun:function(c,a,g){var n=0,e;return function(){n++||(e=c.apply(g||this));a.apply(e,arguments);return e}},runOnce:function(c,a){var g=0;return function(){if(!g++)return c.apply(a||this,arguments)}}});h(Function.prototype,{bind:function(c){var a=this,g=Array.from(arguments,1);return g.length?function(){return a.apply(c,g.concat.apply(g,arguments))}:function(){return a.apply(c,arguments)}}});m(Boolean,{invert:function(c){return!c},normalize:function(c){return!!c}});h(Array,{isArray:function(c){return Object.prototype.toString.call(c)===
"[object Array]"}});m(Array,{from:function(c,a){var g;if(c!=null){var n=c.length;if(typeof n=="undefined")return[c];a||(a=0);if(n-a>0){g=[];for(var e=a,b=0;e<n;e++)g[b++]=c[e];return g}}return[]},create:function(c,a,g){for(var n=[],e=typeof a=="function",b=0;b<c;b++)n[b]=e?a.call(g,b,n):a;return n}});h(Array.prototype,{indexOf:function(c,a){a=parseInt(a)||0;if(a<0)return-1;for(;a<this.length;a++)if(this[a]===c)return a;return-1},lastIndexOf:function(c,a){for(var g=this.length,a=parseInt(a),a=isNaN(a)||
a>=g?g-1:(a+g)%g;a>=0;a--)if(this[a]===c)return a;return-1},forEach:function(c,a){for(var g=0,n=this.length;g<n;g++)g in this&&c.call(a,this[g],g,this)},every:function(c,a){for(var g=0,n=this.length;g<n;g++)if(g in this&&!c.call(a,this[g],g,this))return!1;return!0},some:function(c,a){for(var g=0,n=this.length;g<n;g++)if(g in this&&c.call(a,this[g],g,this))return!0;return!1},filter:function(c,a){for(var g=[],n=0,e=this.length;n<e;n++)n in this&&c.call(a,this[n],n,this)&&g.push(this[n]);return g},map:function(c,
a){for(var g=[],n=0,e=this.length;n<e;n++)n in this&&(g[n]=c.call(a,this[n],n,this));return g},reduce:function(c,a){var g=this.length,n=arguments.length;if(g==0&&n==1)throw new TypeError;var e,b=0;n>1&&(e=a,b=1);for(n=0;n<g;n++)n in this&&(e=b++?c.call(null,e,this[n],n,this):this[n]);return e}});m(Array.prototype,{clone:function(){return Array.from(this)},flatten:function(){return this.concat.apply([],this)},unique:function(c){if(!this.length)return[];var a,g;c?g=[(a=this)[0]]:a=g=Array.from(this).sort(function(c,
b){return c===b?0:typeof c==typeof b?c>b||-1:typeof c>typeof b||-1});for(var c=1,n=0;c<a.length;c++)g[n]!==a[c]&&(g[++n]=a[c]);g.length=n+1;return g},collapse:function(c,a){for(var g=this.length,n=0,e=0;n<g;n++)c.call(a,this[n],n,this)||(this[e++]=this[n]);this.length=e;return this},exclude:function(c){return this.filter(this.absent,c)},repeat:function(c){return Array.create(parseInt(c)||0,this).flatten()},item:function(c){c=parseInt(c||0);return this[c>=0?c:this.length+c]},first:function(){return this[0]},
last:function(){return this[this.length-1]},search:function(c,a,g){Array.lastSearchIndex=-1;for(var a=Function.getter(a||s),g=parseInt(g||0),n=this.length;g<n;g++)if(a(this[g])===c)return this[Array.lastSearchIndex=g]},lastSearch:function(c,a,g){Array.lastSearchIndex=-1;for(var a=Function.getter(a||s),n=this.length-1,g=isNaN(g)||g==null?n:parseInt(g),n=g>n?n:g;n>=0;n--)if(a(this[n])===c)return this[Array.lastSearchIndex=n]},binarySearchPos:function(c,a,g,n,e,b){if(!this.length)return n?-1:0;var a=
Function.getter(a||s),g=!!g,p,e=isNaN(e)?0:e,i=isNaN(b)?this.length-1:b;do if(b=e+i>>1,p=a(this[b]),g?c>p:c<p)i=b-1;else if(g?c<p:c>p)e=b+1;else return c==p?b:-1;while(e<=i);return n?-1:b+(p<c^g)},binarySearch:function(c,a){return this.binarySearchPos(c,a,!1,!0)},binarySearchIntervalPos:function(c,a,g,n,e,b){if(!this.length)return-1;var a=u(a||s),g=u(g||s),p=isNaN(e)?0:e,i=isNaN(b)?this.length-1:b,l;do if(e=this[b=p+i>>1],c<(l=a(e)))i=b-1;else if(c>(p=g(e)))p=b+1;else return c>=l&&c<=p?b:-1;while(p<=
i);return n?-1:b+(g(e)<c)},binarySearchInterval:function(c,a,g){return this.binarySearchIntervalPos(c,a,g,!0)},equal:function(c){return this.length==c.length&&this.every(function(a,g){return a===c[g]})},add:function(c){return this.indexOf(c)==-1&&!!this.push(c)},remove:function(c){c=this.indexOf(c);return c!=-1&&!!this.splice(c,1)},has:function(c){return this.indexOf(c)!=-1},absent:function(c){return this.indexOf(c)==-1},merge:function(c){return this.reduce(m,c||{})},sortAsObject:function(c,a,g){c=
Function.getter(c);g=g?-1:1;return this.map(function(a,g){return{i:g,v:c(a)}}).sort(a||function(c,a){return g*(c.v>a.v||-(c.v<a.v)||(c.i>a.i?1:-1))}).map(function(c){return this[c.i]},this)},set:function(c){this!==c&&this.clear().push.apply(this,c);return this},clear:function(){this.length=0;return this}});if(![1,2].splice(1).length){var f=Array.prototype.splice;Array.prototype.splice=function(){var c=Array.from(arguments);if(c.length<2)c[1]=this.length;return f.apply(this,c)}}var d={"<":">","[":"]",
"(":")","{":"}","\u00ab":"\u00bb"};String.Entity={laquo:"\u00ab",raquo:"\u00bb",nbsp:"\u00a0",quot:'"',quote:'"',copy:"\u00a9",shy:"\u00ad",para:"\u00b6",sect:"\u00a7",deg:"\u00b0",mdash:"\u2014",hellip:"\u2026"};h(String,{toLowerCase:function(c){return String(c).toLowerCase()},toUpperCase:function(c){return String(c).toUpperCase()},trim:function(c){return String(c).trim()},trimLeft:function(c){return String(c).trimLeft()},trimRight:function(c){return String(c).trimRight()},isEmpty:function(c){return c==
null||String(c)==""},isNotEmpty:function(c){return c!=null&&String(c)!=""}});h(String.prototype,{trimLeft:function(){return this.replace(/^\s+/,"")},trimRight:function(){return this.replace(/\s+$/,"")},trim:function(){return this.trimLeft().trimRight()}});m(String.prototype,{toObject:function(){try{return Function("return 0,"+this)()}catch(c){}},toArray:(new String("a"))[0]?function(){return Array.from(this)}:function(){for(var c=[],a=this.length,g=0;g<a;g++)c[g]=this.charAt(g);return c},repeat:function(c){return Array(parseInt(c)+
1||0).join(this)},qw:function(){var c=this.trim();return c?c.split(/\s+/):[]},forRegExp:function(){return this.replace(/[\/\\\(\)\[\]\?\{\}\|\*\+\-\.\^\$]/g,"\\$&")},format:function(c){for(var a={},g=0;g<arguments.length;g++)a[g]=arguments[g];typeof c=="object"&&m(a,c);return this.replace(/\{([a-z\d\_]+)(?::([\.0])(\d+)|:(\?))?\}/gi,function(c,g,b,e,i){c=g in a?a[g]:i?"":c;return b&&!isNaN(c)?(c=Number(c),b=="."?c.toFixed(e):c.lead(e)):c})},ellipsis:function(c){c=this.substr(0,c||0);return this.length>
c.length?c+"\u2026":c},quote:function(c,a){var c=c||'"',a=a||d[c]||c,g=(c.length==1?c:"")+(a.length==1?a:"");return c+(g?this.replace(RegExp("["+g.forRegExp()+"]","g"),"\\$&"):this)+a},capitalize:function(){return this.charAt(0).toUpperCase()+this.substr(1).toLowerCase()},camelize:function(){return this.replace(/-(.)/g,function(c,a){return a.toUpperCase()})},dasherize:function(){return this.replace(/[A-Z]/g,function(c){return"-"+c.toLowerCase()})}});String.format=String.prototype.format;if("|||".split(/\|/).length+
"|||".split(/(\|)/).length!=11)String.prototype.split=function(c){if(c==""||c&&c.source=="")return this.toArray();var a=[],g=0,e;if(c instanceof RegExp)for(c.global||(c=RegExp(c.source,/\/([mi]*)$/.exec(c)[1]+"g"));e=c.exec(this);)e[0]=this.substring(g,e.index),a.push.apply(a,e),g=c.lastIndex;else for(;(e=this.indexOf(c,g))!=-1;)a.push(this.substring(g,e)),g=e+c.length;a.push(this.substr(g));return a};if("12".substr(-1)!="2"){var A=String.prototype.substr;String.prototype.substr=function(c,a){return A.call(this,
c<0?Math.max(0,this.length+c):c,a)}}m(Number.prototype,{fit:function(c,a){return!isNaN(c)&&this<c?Number(c):!isNaN(a)&&this>a?Number(a):this},between:function(c,a){return!isNaN(this)&&this>=c&&this<=a},quote:function(c,a){return(this+"").quote(c,a)},toHex:function(){return parseInt(this).toString(16).toUpperCase()},sign:function(){return this<0?-1:+(this>0)},base:function(c){return!c||isNaN(c)?0:Math.floor(this/c)*c},lead:function(c,a){return(this+"").replace(/\d+/,function(g){return(c-=g.length-
1)>1?Array(c).join(a||0)+g:g})},group:function(c,a){return(this+"").replace(/\d+/,function(g){return g.replace(/\d/g,function(e,i){return!i+(g.length-i)%(c||3)?e:(a||" ")+e})})},format:function(c,a,g,e,i){c=this.toFixed(c);if(a||i)c=c.replace(/(\d+)(\.?)/,function(b,c,g){return(a?Number(c).group(3,a):c)+(g?i||g:"")});g&&(c=c.replace(/^-?/,"$&"+(g||"")));return c+(e||"")}});h(Date,{now:function(){return+new Date}});(new Date).getYear()<1900&&m(Date.prototype,{getYear:function(){return this.getFullYear()-
1900},setYear:function(c){return this.setFullYear(!isNaN(c)&&c<100?Number(c)+1900:c)}});var B=function(){function c(b){for(var c=1E6,b=String(b).split("."),a=0,g=0;a<4&&a<b.length;a++,c/=100)g+=b[a]*c;return g}function a(){for(var g=0;g<arguments.length;g++){var q=arguments[g].toLowerCase();if(q in b){if(b[q])return!0}else{var e=q.match(/^([a-z]+)(([\d\.]+)([+-=]?))?$/i);if(e){b[q]=!1;var n=e[1].toLowerCase(),x=c(e[3]),e=e[4]||"=";if(n=p[n])return b[q]=!x||e=="="&&n==x||e=="+"&&n>=x||e=="-"&&n<x}}}return!1}
var g="Basis.Browser",e={datauri:!1},i=typeof Image!="undefined"?new Image:{};i.onload=function(){e.datauri=!0};i.src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";var b={},p={},l=window.navigator.userAgent,d="unknown",f="unknown",r={MSIE:["Internet Explorer","msie","ie"],Gecko:["Gecko","gecko"],Safari:["Safari","safari"],"iPhone OS":["iPhone","iphone"],AdobeAir:["AdobeAir","air"],AppleWebKit:["WebKit"],Chrome:["Chrome","chrome"],FireFox:["FireFox","firefox",
"ff"],Iceweasel:["FireFox","firefox","ff"],Shiretoko:["FireFox","firefox","ff"],Opera:["Opera","opera"]},h;for(h in r)if(!(h=="MSIE"&&window.opera)&&!(h=="Safari"&&l.match(/chrome/i))&&!(h=="AppleWebKit"&&l.match(/iphone/i))&&l.match(RegExp(h+".(\\d+(\\.\\d+)*)","i")))for(var q=r[h],G=window.opera&&typeof window.opera.version=="function"?window.opera.version():RegExp.$1,D=c(G),d=q[0]+D,f=q[0]+" "+G,G=0;G<q.length;G++)p[q[G].toLowerCase()]=D;g=z(g);g.toString=function(){return f};return g.extend({FeatureSupport:e,
testImage:i,name:d,prettyName:f,test:a,is:function(b){return a(b)},Cookies:{set:function(b,c,a,g){document.cookie=b+"="+(c==null?"":escape(c))+";path="+(g||(location.pathname.indexOf("/")==0?"":"/")+location.pathname)+(a?";expires="+(new Date(Date.now()+a*1E3)).toGMTString():"")},get:function(b){return(b=document.cookie.match(RegExp("(^|;)\\s*"+b+"\\s*=\\s*(.*?)\\s*(;|$)")))&&unescape(b[2])},remove:function(b,c){document.cookie=b+"=;expires="+(new Date(0)).toGMTString()+";path="+(c||(location.pathname.indexOf("/")==
0?"":"/")+location.pathname)}}})}(),y=function(){function c(c,a,b){a||(a=g);var e=function(){var b=this.inherit;this.inherit=a;var c=e.method.apply(this,arguments);this.inherit=b;return c};e.toString=function(){return e.method.toString()};e.valueOf=function(){return e.method.valueOf()};return m(e,{method:c,proto:b})}var g=m(function(){},{inherit:w,proto:null,toString:function(){return"[abstract method]"}}),e=function(){};m(e,{className:"Basis.Class",prototype:{constructor:null,init:Function(),toString:function(){return"[object "+
(this.constructor||this).className+"]"}},create:function(c){typeof c!="function"&&(c=e);for(var a,b=arguments,g=1;g<b.length;g++)if(b[g].className)a=b[g].className;a||(a=c.className+"._SubClass_");var x=(new Function("return {'"+a+"': function(){\n  this.init.apply(this, arguments);\n}}['"+a+"'];"))(),g=Function();g.prototype=c.prototype;x.prototype=new g;x.superClass_=c;x.className=a;x.extend=e.extend;for(g=1;g<b.length;g++)x.extend(b[g]);return x.prototype.constructor=x},extend:function(g){var x=
this.prototype;if(g.prototype)g=g.prototype;var b=Object.keys(g);g.toString!==Object.prototype.toString&&b.add("toString");for(var p=b.length;p--;){var i=b[p],l=g[i];if(i=="className")this.className=l;else{var d;if(d=i=="behaviour"){for(d=this.superClass_;d&&d!==this&&d!==a;)d=d.superClass_;d=d===a}d?x[i]=l&&l.isBehaviour_?l:a.createBehaviour(this.superClass_,l):(typeof l=="function"&&l.extend!==e.extend&&(l=c(l.method||l,x[i],x)),x[i]=l)}}return this},destroy:function(){for(var c in this)delete this[c];
this.destroy=w}});return z("Basis.Class",e.create).extend({BaseClass:e,create:e.create})}(),a=function(){function c(c,b){var g=c&&c.prototype;return new (y(g&&g.behaviour&&g.behaviour.constructor,Object.extend({isBehaviour_:!0,className:c?"subclass of "+c.className+".Behaviour":"EventObject.Behaviour"},b)))}var g=Array.prototype.slice,a=1,e=y(null,{className:"Basis.EventObject",eventObjectId:0,behaviour:c(null,{}),handlers_:[],init:function(c){this.handlers_=[];this.eventObjectId=a++;c&&c.handlers&&
this.handlers_.push({handler:c.handlers,thisObject:c.handlersContext||this});return c},addHandler:function(c,b){for(var b=b||this,g=0,a;a=this.handlers_[g];g++)if(a.handler===c&&a.thisObject===b)return!1;this.handlers_.push({handler:c,thisObject:b});return!0},removeHandler:function(c,b){for(var b=b||this,g=0,a;a=this.handlers_[g];g++)if(a.handler===c&&a.thisObject===b)return this.handlers_.splice(g,1),!0;return!1},dispatch:function(c){var b=this.behaviour[c],a=this.handlers_.length;if(a||b){var e=
g.call(arguments,1);if(a)for(var a=g.call(this.handlers_),n,i,l=a.length;l--;)n=a[l],i=n.handler[c],typeof i=="function"&&i.apply(n.thisObject,e);typeof b=="function"&&b.apply(this,e)}},destroy:function(){this.destroy=Function.$undef;this.dispatch("destroy",this);delete this.handlers_;this.dispatch=Function.$undef}});e.createBehaviour=c;return e}(),l=function(){function c(b,c,a){if(c!=null)return b.insertBefore(v(c)?c:f(c),a||null)}function a(b){return H("",b.cloneNode(!0)).innerHTML}function g(b){if(b)return b=
String(b).trim().split(/\s*,\s*|\s+/).unique(),b.indexOf("*")==-1&&b}function n(b){return v(b)||b&&b.nodeType?b:typeof b=="string"?D.getElementById(b):null}function i(b,c){b=n(b)||D;return c=="*"&&b.all?Array.from(b.all):Array.from(b.getElementsByTagName(c||"*"))}function b(b,c,a){var g,q,e=[],a=typeof a=="string"?u(a):a||o;switch(c){case 1:case 2:for(q=b;(q=q[A])&&q!==b.document;)a(q)&&e.push(q);break;case 64:for(q=b[M];q;)a(q)&&e.push(q),q=q[C];break;case 4:case 8:b[M]&&(new w(b)).nodes(a,e);break;
case 128:g=new w(D,a);for(g.cursor=b[C]||b[A];q=g.next();)e.push(q);break;case 256:for(q=b;q=q[C];)a(q)&&e.push(q);break;case 32:a(b[A])&&e.push(b[A]);break;case 512:g=new w(D,a,w.BACKWARD);for(g.cursor=b[B]||b[A];q=g.next();)e.push(q);break;case 1024:for(q=b;q=q[B];)a(q)&&e.push(q)}c&26&&a(b)&&e.unshift(b);return e}function p(b,c,a,g){if(!c||c=="*")c=o;typeof c=="string"&&(c=u("tagName=="+c.quote()));a=a||0;do{b=b[this];if(!b||b===g)break;if(c(b))return b}while(--a);return null}function d(b,c,a){for(var g=
0;b=p.call(this,b,c,0,a);)g++;return g}function f(b){return D.createTextNode(b!=null?b:"")}function h(){for(var b=D.createDocumentFragment(),a=arguments.length,g=h.array=[],q=0;q<a;q++)g.push(c(b,arguments[q]));return b}function H(b,a){var g=b!=void 0&&typeof b!="string",q=(g?b.description:b)||"",e="div",n=q.match(/^([a-z0-9\_\-]+)(.*)$/i);n&&(e=n[1],q=n[2]);if(q!=""){for(var x=[],i={},p;n=T.exec(q);){if(n[8])throw Error("Create element error in DOM.createElement()\n\nDescription:\n> "+q+"\n\nProblem place:\n> "+
q.substr(0,n.index)+"--\>"+q.substr(n.index)+"<--");p=n[2]||n[3];switch(n[1]){case "#":i.id=p;break;case ".":x.push(p);break;default:p!="class"&&(i[p]=n[4]?n[5]||n[6]||n[7]:p)}}U&&i.name&&/^(input|textarea|select)$/i.test(e)&&(e="<"+e+" name="+i.name+">")}q=D.createElement(e);if(i){if(i.style&&O)q.style.cssText=i.style;for(var d in i)q.setAttribute(d,i[d],0)}if(x&&x.length)q.className=x.join(" ");arguments.length>1&&c(q,h.apply(0,Array.from(arguments,1).flatten()));if(g){b.css&&l.Style.setStyle(q,
b.css);for(var F in b)typeof b[F]=="function"?r.addHandler(q,F,b[F],q):b[F]instanceof r.Handler&&r.addHandler(q,F,b[F].handler,b[F].thisObject)}return q}function j(b,c){return b[A]?b[A].replaceChild(c,b):b}function q(b){return!!(b&&b.nodeType==3)}function G(b){if(D.selection){var c=D.selection.createRange();c.compareEndPoints("StartToEnd",c)!=0&&c.collapse(b);return c.getBookmark().charCodeAt(2)-2}}var D=window.document,F=D.createElement("div"),A="parentNode",M="firstChild",C="nextSibling",B="previousSibling",
k=s,t=function(){return 0};typeof F.compareDocumentPosition=="function"?(k=function(b){return b.sort(function(b,c){return 3-(t(b,c)&6)})},t=function(b,c){return b.compareDocumentPosition(c)}):(k=function(b){return b.sortAsObject(u("sourceIndex"))},t=function(b,c){return b==c?0:b.document!=c.document?33:b.sourceIndex>c.sourceIndex?2|8*c.contains(b):4|16*b.contains(c)});var v;if(typeof Node!="undefined"){if(v=function(b){return b instanceof Node},!Node.prototype.contains)Node.prototype.contains=function(b){return!!(t(this,
b)&16)}}else v=function(b){return b&&b.ownerDocument===D};var w=y(null,{className:"Basis.DOM.TreeWalker",root_:D,cursor_:null,filter:o,init:function(b,c,a){this.setRoot(b);this.setDirection(a);if(typeof c=="function")this.filter=c;e.add(this)},setDirection:function(b){m(this,b?{a:"lastChild",b:B,c:C,d:M}:{a:M,b:C,c:B,d:"lastChild"})},setRoot:function(b){this.root_=b||D;this.reset()},reset:function(){this.cursor_=null},first:function(b){this.reset();return this.next(b)},last:function(b){this.reset();
return this.prev(b)},nodes:function(b,c){var a;c||(c=[]);for(this.reset();a=this.next(b);)c.push(a);return c},next:function(b){var b=b||this.filter,c=this.cursor_||this.root_;do for(var a=c[this.a];!a;){if(c===this.root_)return this.cursor_=null;(a=c[this.b])||(c=c[A])}while(!b(c=a));return this.cursor_=c},prev:function(b){var b=b||this.filter,c=this.cursor_,a=this.c,g=this.d;do{var q=c?c[a]:this.root_[g];if(q){for(;q[g];)q=q[g];c=q}else c&&(c=c[A]);if(!c||c===this.root_){c=null;break}}while(!b(c));
return this.cursor_=c},destroy:function(){e.remove(this)}});w.BACKWARD=!0;var V="textContent innerText nodeValue".qw(),P=p.bind(B),Q=p.bind(C),W=p.bind(A),X=d.bind(B),Y=d.bind(C),Z=d.bind(A),U=function(){var b=D.createElement("input");b.name="a";return!/name/.test(a(b))}(),O;F.setAttribute("style","color: red");O=F.style.color!=="red";var T=/([\#\.])([a-z0-9\_\-\:]+)|\[([a-z0-9\_\-]+)(=(?:\"((?:\\.|[^\"])+)\"|\'((?:\\.|[^\'])+)\'|((?:\\.|[^\]])+)))?\s*\]|\s*(\S)/gi,R={};"insert parentOf isInside".qw().forEach(function(b){R[b]=
function(){var c=Array.from(arguments);c.unshift(S);return l[b].apply(l,c)}});var S;return z("Basis.DOM",function(b){S=n(b);return R}).extend({ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_TYPE_NODE:10,DOCUMENT_NODE:9,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12,AXIS_ANCESTOR:1,AXIS_ANCESTOR_OR_SELF:2,AXIS_DESCENDANT:4,AXIS_DESCENDANT_OR_SELF:8,AXIS_SELF:16,AXIS_PARENT:32,AXIS_CHILD:64,AXIS_FOLLOWING:128,
AXIS_FOLLOWING_SIBLING:256,AXIS_PRESCENDING:512,AXIS_PRESCENDING_SIBLING:1024,INSERT_BEGIN:"begin",INSERT_END:"end",INSERT_BEFORE:"before",INSERT_AFTER:"after",sort:k,comparePosition:t,TreeWalker:w,outerHTML:a,textContent:function(c){for(var a=0,g;g=V[a++];)if(c[g]!=null)return c[g];return b(c,4,q).map(u("nodeValue")).join("")},get:n,tag:i,tags:function(b,c){return k((g(c)||["*"]).map(function(c){return i(b,c)}).flatten())},axis:b,first:function(b,c,a){b=b[M];return!b||!c||c(b)?b:Q(b,c,a)},last:function(b,
c,a){b=b.lastChild;return!b||!c||c(b)?b:P(b,c,a)},next:Q,prev:P,parent:W,index:X,lastIndex:Y,deep:Z,createElement:H,createText:f,createFragment:h,insert:function(b,a,g,q){b=n(b);if(!b)throw Error("DOM.insert: destination node can't be null");switch(g){case void 0:case "end":q=null;break;case "begin":q=b[M];break;case "before":break;case "after":q=q[C];break;default:q=Number(g).between(0,b.childNodes.length)?b.childNodes[g]:null}g=!v(b);if(!a||!Array.isArray(a))g=g?a&&b.insertBefore(a,q):c(b,a,q);
else if(g)for(var g=[],e=0,x=a.length;e<x;e++)g[e]=b.insertBefore(a[e],q);else b.insertBefore(h.apply(0,a),q),g=h.array;return g},remove:function(b){return b[A]?b[A].removeChild(b):b},replace:j,swap:function(b,c){if(b===c||t(b,c)&25)return!1;j(b,F);j(c,b);j(F,c);return!0},clone:function(c,a){var g=c.cloneNode(!a);g.attachEvent&&b(g,8).forEach(r.clearHandlers);return g},clear:function(b){for(b=n(b);b.lastChild;)b.removeChild(b.lastChild);return b},wrap:function(b,c,a){var g=[],a=Function.getter(a||
s),q;for(q in c)for(var e=0;e<b.length;e++){var n=a(b[e]);g[e]=c[q](b[e],e,n)?l.createElement(q,n):b[e]}return g},setAttribute:function(b,c,a){a==null?b.removeAttribute(c):b.setAttribute(c,a)},IS_ELEMENT_NODE:function(b){return!!(b&&b.nodeType==1)},IS_TEXT_NODE:q,is:function(b,c){return(g(c)||[]).has(b.tagName)},parentOf:function(b,c){return b.contains(c)},isInside:function(b,c){return b==c||c.contains(b)},focus:function(b,c){try{b=n(b),b.focus(),c&&b.select&&b.select()}catch(a){}},setSelectionRange:function(b,
c,a){arguments.length<3&&(a=c);if(b.setSelectionRange)b.setSelectionRange(c,a);else if(b.createTextRange){var g=b.createTextRange();g.collapse(!0);g.moveStart("character",c);g.moveEnd("character",a-c);g.select()}},getSelectionStart:function(b){return typeof b.selectionStart!="undefined"?b.selectionStart:G(!0)},getSelectionEnd:function(b){return typeof b.selectionEnd!="undefined"?b.selectionEnd:G(!1)}})}();(function(){function c(b,c){var a=b.match(/^([^{]+)\{(.*)\}\s*$/);if(a){for(var g=a[1].trim().split(/\s*,\s*/),
q=0;q<g.length;q++)this.addRule(g[q],a[2]||null,c++);return c-1}}function a(b,g){var q=l.createElement(!b?'STYLE[type="text/css"]':'LINK[type="text/css"][rel="{alt}stylesheet"][href={url}]'.format({alt:g?"alternate ":"",url:b.quote('"')}));l.tag(document,"HEAD")[0].appendChild(q);q=q.sheet||q.styleSheet;try{if(!q.cssRules)q.cssRules=q.rules}catch(e){}if(!q.insertRule)q.insertRule=c;if(!q.deleteRule)q.deleteRule=q.removeRule;return q}function g(b,c){b||(b="DefaultGenericStyleSheet");h[b]||c&&(h[b]=
new D(a()));return h[b]}function e(b,c,a,g){for(var g=g||{},c=c.qw(),n=0,x;x=c[n];n++)if(typeof G.style[x]!="undefined"){a&&(B.FeatureSupport["css-"+b]=x);q[b]={key:x,getter:g[x]};break}}function i(b,c){var a=q[b];if(b=a?a.key:b.replace(/^-ms-/,"ms-").camelize())return{key:b,value:a&&a.getter?a.getter(c):c}}function b(b,c,a){if(typeof b.setProperty=="function")return b.setProperty(c,a);if(c=i(c,a))return b.style[c.key]=c.value}function p(c,a){for(var g in a)b(c,g,a[g]);return c}function d(c,a){return b(c,
"display",typeof a=="string"?a:a?"":"none")}function f(c,a){return b(c,"visibility",a?"":"hidden")}var r=/\s*!important/i,H=String("important"),h={},q={},G=l.createElement("DIV");e("opacity","opacity MozOpacity KhtmlOpacity filter",!0,{fitler:function(b){return"alpha(opacity:_)".replace("_",parseInt(b*100))}});e("border-radius","borderRadius MozBorderRadius WebkitBorderRadius",!0);e("float","cssFloat styleFloat");var D=y(null,{className:"Basis.DOM.Style.CssStyleSheetWrapper",styleSheet:null,rules:null,
init:function(b){this.styleSheet=b;this.rules=[];this.map_={}},getRule:function(b,c){if(!this.map_[b]&&c){for(var a=this.styleSheet,g=this.rules.length,q=a.insertRule(b+"{}",g),e=g;e<=q;e++)this.rules.push(new F(a.cssRules[e]));this.map_[b]=g!=q?new j(this.rules.splice(g)):this.rules[g]}return this.map_[b]},deleteRule:function(b){var c=this.map_[b];if(c){for(var c=c.rules||[c],a=0;a<c.length;a++){var g=this.rules.indexOf(c[a]);this.stylesheet.deleteRule(g);this.rules.splice(g,1)}delete this.map_[b]}},
destroy:function(){delete this.rules}}),F=y(null,{className:"Basis.DOM.Style.CssRuleWrapper",rule:null,selector:"",init:function(b){if(b)this.rule=b,this.selector=b.selectorText},setProperty:function(b,c){var a,g=!!r.test(c),q=this.rule.style;if(g||q.getPropertyPriority&&q.getPropertyPriority(b)==H){if(c=c.replace(r,""),a=i(b,c)){var e=a.key;q.setProperty?(g||q.removeProperty(e),q.setProperty(e,a.value,g?H:"")):q.cssText=q.cssText.replace(RegExp(q[e]?e+"\\s*:\\s*"+q[e]+"(\\s*!"+H+")?\\s*;?":"^","i"),
e+": "+a.value+(g?" !"+H:"")+";")}}else l.setStyleProperty(this.rule,b,c)},setStyle:function(b){Object.iterate(b,this.setProperty,this)},clear:function(){this.rule.style.cssText=""},destroy:function(){delete this.rule}}),j=y(null,{className:"Basis.DOM.Style.CssRuleWrapperSet",rules:null,init:function(b){this.rules=b},destroy:function(){delete this.rules}});["setProperty","setStyle","clear"].forEach(function(b){j.prototype[b]=function(){for(var c,a=0;c=this.rules[a];a++)c[b].apply(c,arguments)}});
l.extend({setStyleProperty:b,setStyle:p,display:d,show:function(b){return d(b,1)},hide:function(b){return d(b)},visibility:f,visible:function(b){return f(b,1)},invisible:function(b){return f(b)}});return z("Basis.DOM.Style").extend({setStyleProperty:b,setStyle:p,cssRule:function(b,c){return g(c,!0).getRule(b,!0)},getStyleSheet:g,addStyleSheet:a,CssStyleSheetWrapper:D,CssRuleWrapper:F,CssRuleWrapperSet:j})})();(function(){var c=l.createElement("","a","b").cloneNode(!0).childNodes.length==1,a=y(null,
{className:"Basis.Html.Template",init:function(c){this.source=c},parse:function(){function a(b,g,q){for(var b=b.split(/\{([a-z0-9\_]+(?:\|[^}]*)?)\}/i),n=[],x,i=0;i<b.length;i++)i%2?(x=b[i].split(/\|/),e[x[0]]=g+"childNodes["+q+"]",x=x.length>1?x[1]:x[0]):x=b[i].length?b[i]:null,x!=null&&(c&&(n.length&&n.push(document.createComment("")),q++),n.push(x),q++);return l.createFragment.apply(null,n)}function g(c,q){for(var D=l.createFragment(),d;d=i.exec(b);){b=RegExp.rightContext;var E=RegExp.leftContext;
E.length&&(E=a(E,c,q),q+=E.childNodes.length,D.appendChild(E));if(d[6]){if(d[6]==x.last())return x.pop(),D}else{var E=d[1],f=d[3],r=d[4];d=!!d[5];f&&(e[f]=c+"childNodes["+q+"]");if(r)var G=[],r=r.replace(/("(\\"|[^"])*?"|'([^']|\\')*?')/g,function(b){G.push(b);return"\x00"}).trim().replace(/([a-z0-9\_]+)(\{([a-z0-9\_\|]+)\})?(=\0)?\s*/gi,function(b,a,g,x,n){x&&(e[x]=c+"childNodes["+q+'].getAttributeNode("'+a+'")');n&&(n=G.shift());return a=="class"?C.makeClassName(n.replace(/^([\'\"]?)(.*?)\1$/,"$2")):
"["+a+(n?"="+n:"")+"]"});f=l.createElement(E+r);b.length&&!d&&(x.push(E),f.appendChild(g(c+"childNodes["+q+"].",0)));D.appendChild(f);q++}}b.length&&a(b);return D}if(!this.proto){var b=this.source,e={},x=[];if(typeof b=="function")this.source=b=b();for(var i=/<([a-z0-9\_]+)(\{([a-z0-9\_\|]+)\})?([^>\/]*)(\/?)>|<\/([a-z0-9\_]+)>/i,d=g("",0),E=[],f=j(e).map(function(b){for(var c=e[b].replace(/\.?childNodes\[(\d+)\]/g,"$1 ").qw(),a=e[b].split("."),g=d,q=0;q<c.length;q++)isNaN(c[q])||(g=g.childNodes[c[q]],
g==g.parentNode.firstChild?a[q]="firstChild":g==g.parentNode.lastChild&&(a[q]="lastChild"));b=b.split(/\|/);E.push.apply(E,b);return{name:"object."+b.first(),alias:"object."+b.reverse().join(" = object."),path:"html."+a.join(".")}},this).sortAsObject("path"),q=0;q<f.length;q++)for(var r=RegExp("^"+f[q].path.forRegExp()),D=q+1;D<f.length;D++)f[D].path=f[D].path.replace(r,f[q].name);this.proto=d;this.createInstance=new Function("object","object = object || {};var html = this.proto.cloneNode(true);"+
f.map(String.format,"{alias} = {path};").join("")+"return object;");this.clearInstance=new Function("object",E.map(String.format,"delete object.{0};").join(""))}},createInstance:function(c){this.parse();return this.createInstance(c)},clearInstance:function(){}}),g=document.createElement("DIV");return z("Basis.Html").extend({Template:a,escape:function(c){return l.createElement("DIV",l.createText(c)).innerHTML},unescape:function(c){g.innerHTML=c;return g.firstChild.nodeValue},string2Html:function(c){g.innerHTML=
c;return l.createFragment.apply(null,Array.from(g.childNodes))}})})();var r=function(){function c(b){return b||window.event}function a(b){return typeof b=="string"?l.get(b):b}function g(b){b=c(b);b.stopPropagation?b.stopPropagation():b.cancelBubble=!0}function e(b){b=c(b);b.preventDefault?b.preventDefault():b.returnValue=!1}function i(b){var c=Array.from(j[b.type]);if(c)for(var a=c.length;a--;){var g=c[a];g.handler.call(g.thisObject,b)}}function b(b,g,e,n){b=a(b);if(!b)throw Error("Event.addHandler: can't attach event listener to undefined");
if(typeof e!="function")throw Error("Event.addHandler: handler must be a function");b[h]||(b[h]={});var p=b[h],l=p[g];if(!l)l=p[g]=[],l.fireEvent=function(b){b=c(b);if(q&&b&&typeof b.returnValue=="undefined"){i(b);if(b.cancelBubble===!0)return;if(typeof b.returnValue=="undefined")b.returnValue=!0}for(var a=0,g;g=l[a++];)g.handler.call(g.thisObject,b)},b.addEventListener?b.addEventListener(g,l.fireEvent,!1):b.attachEvent("on"+g,l.fireEvent);b={handler:e,thisObject:n};l.some(H,b)||l.push(b)}function p(b,
c,g,q){var b=a(b),e=b[h];e&&e[c]&&!e[c].collapse(H,{handler:g,thisObject:q}).length&&d(b,c)}function d(b,c){var b=a(b),g=b[h];if(g)if(typeof c!="string")for(c in g)d(b,c);else{var q=g[c];q&&(b.removeEventListener?b.removeEventListener(c,q.fireEvent,!1):b.detachEvent("on"+c,q.fireEvent),delete g[c])}}var f=window.document,h="__basisEvents",H=function(b){return b.handler==this.handler&&b.thisObject==this.thisObject},j={},q=!f.addEventListener,G=function(){function c(){g++||setTimeout(function(){for(var b=
0;b<q.length;b++)q[b].callback.call(q[b].thisObject)},10)}var g=!1,q=[];if(B.is("ie7-"))(function(){var b="_"+(new Date-0);f.write('<script id="'+b+'" defer src="//:"><\/script>');a(b).onreadystatechange=function(){this.readyState=="complete"&&(l.remove(this),c())}})();else if(B.is("safari525-"))var e=setInterval(function(){/loaded|complete/.test(f.readyState)&&(clearInterval(e),c())},15);else b(f,"DOMContentLoaded",c,!1);b(f,"load",c,!1);b(window,"load",c,!1);return function(b,c){g||q.push({callback:b,
thisObject:c})}}();return z("Basis.Event",c).extend({KEY:{BACKSPACE:8,TAB:9,CTRL_ENTER:10,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,ESCAPE:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,F5:116},MOUSE_LEFT:{VALUE:1,BIT:1},MOUSE_RIGHT:{VALUE:3,BIT:2},MOUSE_MIDDLE:{VALUE:2,BIT:4},Handler:function(b,c){this.handler=b;this.thisObject=c},sender:function(b){b=c(b);return b.target||b.srcElement},cancelBubble:g,cancelDefault:e,kill:function(c,q){(q=a(q))?
b(q,c,r.kill):(e(c),g(c))},key:function(b){b=c(b);return b.keyCode||b.which||0},charCode:function(b){b=c(b);return b.charCode||b.keyCode||0},mouseButton:function(b,a){var b=c(b),g="buttons"in b?b.buttons:b.which;return typeof g=="number"?g==a.VALUE:b.button&a.BIT},mouseX:function(b){b=c(b);return"pageX"in b?b.pageX:b.clientX+(f.documentElement.scrollLeft||f.body.scrollLeft)},mouseY:function(b){b=c(b);return"pageY"in b?b.pageY:b.clientY+(f.documentElement.scrollTop||f.body.scrollTop)},addGlobalHandler:function(c,
a,g){var q=j[c];if(q)for(c=q.length;c--;){var e=q[c];if(e.handler===a&&e.thisObject===g)return}else f.addEventListener?f.addEventListener(c,i,!0):b(f,c,v),q=j[c]=[];q.push({handler:a,thisObject:g})},removeGlobalHandler:function(b,c,a){var g=j[b];g&&g.collapse(H,{handler:c,thisObject:a});g.length||(delete j[b],f.removeEventListener?f.removeEventListener(b,i,!0):p(f,b,v))},addHandler:b,addHandlers:function(c,a,g){for(var q in a)b(c,q,a[q],g)},removeHandler:p,clearHandlers:d,fireEvent:function(b,c){var b=
a(b),g=b[h];g&&g[c]&&g[c].fireEvent()},onLoad:G,onUnload:function(c,a){b(window,"unload",c,a)}})}(),C=function(){function c(c,a){return c==0||isNaN(c)?"0":c+a}var a=y(null,{className:"Basis.CSS.ClassName",init:function(c){this.element=typeof c=="string"?l.get(c):c;this.sync()},sync:function(){this.cache=this.element.className.qw()},toArray:function(){return this.cache},has:function(c){return this.cache.has(c)},absent:function(c){return!this.has(c)},set:function(c){this.element.className=(this.cache=
c.qw()).join(" ");return this},add:function(c){var a=this.cache,g=a.length,b=arguments;b.length==1?a.add(c):a.forEach.call(b,a.add,a);if(a.length>g)this.element.className=a.join(" ");return this},remove:function(c){var a=this.cache,g=a.length,b=arguments;b.length==1?a.remove(c):a.forEach.call(b,a.remove,a);if(a.length<g)this.element.className=a.join(" ");return this},replace:function(c,a,g){var b=this.cache,e=0,g=g||"";typeof c!="undefined"&&(e+=b.remove(g+c));typeof a!="undefined"&&(e+=b.add(g+a));
if(e)this.element.className=b.join(" ");return this},clear:function(){this.element.className=this.cache.clear();return this},bool:function(c,a){a?this.add(c):this.remove(c);return this},toggle:function(c){var a=this.has(c);a?this.remove(c):this.add(c);return!a}});return z("Basis.CSS").extend({cssClass:function(c){return new a(c)},makeClassName:function(c){return c!=null?String.trim(c).replace(/^(.)|\s+|\s*,\s*/g,".$1"):""},em:function(a){return c(a,"em")},ex:function(a){return c(a,"ex")},px:function(a){return c(a,
"px")},percent:function(a){return c(a,"%")}})}(),e=function(){var c=[];r.onUnload(function(){a.globalDestroy=!0;a.add=w;a.remove=w;for(var g;g=c.pop();)if(typeof g.destroy=="function")try{g.destroy()}catch(e){}else for(var i in g)delete g[i];c.clear()});var a={add:function(a){a!=null&&c.push(a)},remove:function(a){c.remove(a)}};return a}();(function(){function c(b){if(a){if(b.source!=window||b.data!=g)return;r.kill(b)}e.length&&(b=e.shift(),delete i[b.key],b.fn())}var a=typeof window.addEventListener==
"function"&&typeof window.postMessage=="function",g="zeroTimeoutMessage",e=[],i={},b=1;a&&window.addEventListener("message",c,!0);var p=setTimeout;window.setTimeout=function(l,d){var f;d?f=p.call(window,l,d):(f={key:"z"+b++,fn:typeof l=="function"?l:new Function(l)},i[f.key]=f,e.push(f),a?postMessage(g,"*"):f.timer=p.call(window,c,0),f=f.key);return f};var l=clearTimeout;window.clearTimeout=function(b){if(/z\d+/.test(b)){var c=i[b];c&&(clearTimeout(c.timer),e.remove(c),delete i[b])}else return l.call(window,
b)}})();var i=function(){function c(){if(!r)if(b.length){var c=Date.now(),a=Math.max(b[0].eventTime,c);a<d&&(clearTimeout(f),f=setTimeout(g,(d=a)-c))}else f=clearTimeout(f),d=i}function a(g,e){var q=g.eventObjectId,i=p[e]&&p[e][q];i&&(b.splice(b.binarySearchPos(i),1),delete p[e][q],c())}function g(){var a=Date.now(),a=b.binarySearchPos(a+15,l);r=!0;b.splice(0,a).forEach(function(b){delete p[b.eventName][b.object.eventObjectId];b.callback.call(b.object)});r=!1;d=i;c()}var i=2E12,l=u("eventTime"),b=
[],p={},d=i,f=null,r=!1;e.add({destroy:function(){r=!0;clearTimeout(f);delete b;delete p}});return{add:function(g,e,q){var i=g.eventObjectId,n=p[e];n||(n=p[e]={});var d=n[i];if(d){if(isNaN(q))return a(g,e);if(d.eventTime==q)return;b.splice(b.binarySearchPos(d),1);d.eventTime=q}else{if(isNaN(q))return;d=n[i]={eventName:e,object:g,eventTime:q,callback:g[e]}}b.splice(b.binarySearchPos(q,l),0,d);c()},remove:a}}();if(B.test("IE7-"))try{document.execCommand("BackgroundImageCache",!1,!0)}catch(g){}r.onLoad(function(){C.cssClass(document.body).bool("opacity-not-support",
!B.FeatureSupport["css-opacity"])});z("Basis").extend({namespace:z,EventObject:a,TimeEventManager:i,Cleaner:e});window.Basis.Locale={}})();
(function(){function m(d){return!(d%400&&(!(d%100)||d%4))}function h(d,f){return d==1?28+m(f):s[d]}function j(d,h){return h.replace(f,function(a,l){return z[l](d)})}var k=Function.getter,s=[31,28,31,30,31,30,31,31,30,31,30,31],o={day:864E5,hour:36E5,minute:6E4,second:1E3},v="year month day hour minute second millisecond".qw(),w={},t={};Object.iterate({year:"FullYear",month:"Month",day:"Date",hour:"Hours",minute:"Minutes",second:"Seconds",millisecond:"Milliseconds"},function(d,f){w[d]=k("get"+f+"()");
t[d]=new Function("d,v","d.set"+f+"(v)")});var z={y:k("getFullYear().toString().substr(2)"),Y:k("getFullYear()"),d:k("getDate()"),D:k("getDate()","{0:02}"),m:k("getMonth() + 1"),M:k("getMonth() + 1","{0:02}"),h:k("getHours()"),H:k("getHours()","{0:02}"),i:k("getHours() % 12 || 12","{0:02}"),p:k("getHours() > 12",{"true":"pm","false":"am"}),P:k("getHours() > 12",{"true":"PM","false":"AM"}),I:k("getMinutes()","{0:02}"),s:k("getSeconds()"),S:k("getSeconds()","{0:02}"),z:k("getMilliseconds()"),Z:k("getMilliseconds()",
"{0:03}")},u=/^(\d{1,4})-(\d\d?)-(\d\d?)(?:[T ](\d\d?):(\d\d?):(\d\d?)(?:\.(\d{1,3}))?)?$/,f=/%([ymdhiszp])/ig;Object.extend(Date.prototype,{isLeapYear:function(){return m(this.getFullYear())},getMonthDayCount:function(){return h(this.getMonth(),this.getFullYear())},add:function(d,f){var a=w[d];if(!a)throw Error("Unknown date part: "+d);var l;if(d=="year"||d=="month")l=this.getDate(),l>28&&this.setDate(1);t[d](this,a(this)+f);l>28&&(a=this.getMonthDayCount(),l>a&&this.setDate(a));return this},diff:function(d,
f){if(d=="year"||d=="month"){var a=Number(this)-Number(f)>0?-1:1,l=a>0?this:f,r=a>0?f:this,h=l.getFullYear(),h=r.getFullYear()-h;if(d=="year")return a*h;l=l.getMonth();r=r.getMonth();return a*(h?(h>1?(h-1)*12:0)+(11-l)+(r+1):r-l)}else return a=Math.floor((f-this)/o[d]),a+Number(w[d](new Date(f-a*o[d]))-w[d](this)!=0)},set:function(d,f){var a=t[d];if(!a)throw Error("Unknown date part: "+d);var l;if(d=="year"||d=="month")l=this.getDate(),l>28&&this.setDate(1);a(this,f);l>28&&(a=this.getMonthDayCount(),
l>a&&this.setDate(a));return this},get:function(d){if(w[d])return w[d](this);throw Error("Unknown date part: "+d);},toISODateString:function(){return j(this,"%Y-%M-%D")},toISOTimeString:function(){return j(this,"%H:%I:%S.%Z")},fromDate:function(d){d instanceof Date&&(this.setFullYear(d.getFullYear(),d.getMonth(),d.getDate()),this.setTime(d.getTime()));return this},toFormat:function(d){return j(this,d)}});var d=Date.prototype.toISOString;if(d&&(new Date).toISOString().match(/Z/i))Date.prototype.toISOString=
function(){return d.call(this).replace(/Z/i,"")};Object.complete(Date.prototype,{toISOString:function(){return this.toISODateString()+"T"+this.toISOTimeString()},fromISOString:function(d){var f=String(d).match(u);if(!f)throw Error("Value of date isn't in ISO format: "+d);f[2]-=1;for(var d=0,a;a=v[d];d++)this.set(a,f[d+1]||0);return this}});Object.extend(Date.prototype,{toODBCDate:Date.prototype.toISODateString,toODBCTime:Date.prototype.toISOTimeString,toODBC:Date.prototype.toISOString,fromODBC:Date.prototype.fromISOString});
var A=/\D/;Date.fromISOString=function(){function d(f,a,l,r,h,e,i){return new Date(f,a-1,l,r||0,h||0,e||0,i||0)}return function(f){return d.apply(null,f.split(A))}}();Date.fromISOStringTZ=function(){function d(a,l,f,h,e,i,g){return new Date(a,l-1,f,h||0,+(e||0)-this,i||0,g||0)}var f=(new Date).getTimezoneOffset();return function(a){var l=a.substr(10).match(/([\-\+])(\d\d?):?(\d\d?)?/)||0;l&&(l=f+(l[1]=="-"?-1:1)*(l[3]!=null?+l[2]*60+ +l[3]:+l[2]));return d.apply(l,a.split(A))}}();Date.timer=function(d){var f=
d||new Date;f.measure=function(a){return a?((new Date-f)/1E3).toFixed(3):new Date-f};return f};Basis.namespace("Basis.Date").extend({isLeapYear:m,getMonthDayCount:h,format:j})})();
(function(){function m(a,c){var e={},i;if(a&&a.length)i=e.inserted=a;if(c&&c.length)i=e.deleted=c;if(i)return e}function h(a){return function(c){if(c instanceof d&&this.sources.add(c))return c.addHandler(a,this),a.datasetChanged.call(this,c,{inserted:c.getItems()}),this.isActiveSubscriber&&this.subscriptionType&4&&c.addSubscriber(this,4),!0}}function j(a){return function(c){if(this.sources.remove(c))return c.removeHandler(a,this),a.datasetChanged.call(this,c,{deleted:c.getItems()}),this.isActiveSubscriber&&
this.subscriptionType&4&&c.removeSubscriber(this,4),!0}}function k(){return function(a){for(var c=Array.from(this.sources),e=0,i;i=a[e];e++)i instanceof d&&(c.remove(i)||this.addSource(i));c.forEach(this.removeSource,this)}}function s(a){return function(){for(var c=0,e;e=this.sources[c];c++)e.removeHandler(a,this),a.datasetChanged.call(this,e,{deleted:e.getItems()}),this.isActiveSubscriber&&this.subscriptionType&4&&e.removeSubscriber(this,4);this.sources.clear();this.map_={}}}function o(a,c,e,i){if(!a.length)return 0;
var d,e=isNaN(e)?0:e,l=isNaN(i)?a.length-1:i;do if(i=e+l>>1,cmpValue=a[i].value||0,cmpValue===d?(cmpValue=a[i].object.eventObjectId,d=c.object.eventObjectId):d=c.value||0,d<cmpValue)l=i-1;else if(d>cmpValue)e=i+1;else return d==cmpValue?i:0;while(e<=l);return i+(cmpValue<d)}function v(a){a=parseInt(a)||0;return a>=0?a:0}function w(a){a=parseInt(a);return a>=1?a:1}var t=Basis.Class,z=Function.getter,u={update:function(a,c){this.updateCount+=1;this.info=a.info;this.dispatch("update",a,c)},rollbackUpdate:function(a,
c){this.dispatch("rollbackUpdate",a,c)},stateChanged:function(a,c){this.state=a.state;this.dispatch("stateChanged",a,c)},destroy:function(){this.cascadeDestroy?this.destroy():this.setDelegate()}},f=t(Basis.EventObject,{className:"Basis.Data.DataObject",state:"ready",info:null,updateCount:0,canHaveDelegate:!0,delegate:null,cascadeDestroy:!1,collection:null,subscriberCount:0,subscribers_:null,isActiveSubscriber:!1,subscriptionType:3,init:function(a){this.inherit(a);this.subscribers_={};this.updateCount=
0;this.info={};if(a){if(typeof a.isActiveSubscriber=="boolean")this.isActiveSubscriber=a.isActiveSubscriber;if(!isNaN(a.subscriptionType))this.subscriptionType=a.subscriptionType;if(typeof a.cascadeDestroy=="boolean")this.cascadeDestroy=a.cascadeDestroy;if(a.state)this.state=a.state;var c=a.delegate;if(!c&&a.info instanceof f)c=a.info;if(c)this.setDelegate(c);else if(a.info){var c={},e;for(e in a.info)this.info[e]=a.info[e],c[e]=void 0;this.dispatch("update",this,c)}a.collection&&this.setCollection(a.collection)}else this.state=
Object(String(this.state));this.state==this.constructor.prototype.state&&(this.behaviour.stateChanged||this.handlers_.length)&&this.dispatch("stateChanged",this,void 0);return a||{}},isConnected:function(a){if(a instanceof f){for(;a&&a!==this&&a!==a.delegate;)a=a.delegate;return a===this}return!1},getRootDelegate:function(){for(var a=this;a.delegate&&a.delegate!==a;)a=a.delegate;return a},setDelegate:function(a){if(this.canHaveDelegate&&this.delegate!==a){var c={},e=this.delegate,i=this.isActiveSubscriber&&
this.subscriptionType&1;if(e){e.removeHandler(u,this);for(var d in this.info)c[d]=this.info[d];this.info={};i&&e.removeSubscriber(this,1);delete this.delegate}if(a instanceof f&&!this.isConnected(a)){i&&a.addSubscriber(this,1);this.setState(a.state,a.state.data);for(d in a.info)d in c?a.info[d]===c[d]&&delete c[d]:c[d]=void 0;this.delegate=a;this.info=a.info;a.addHandler(u,this)}this.dispatch("delegateChanged",this,e);this.dispatch("update",this,c)}return this.delegate},setState:function(a,c){if(this.state!=
String(a)||this.state.data!=c){var e=this.state,i=this.getRootDelegate();if(i!==this)return i.setState(a,c);this.state=Object(String(a));this.state.data=c;this.dispatch("stateChanged",this,e)}return this.state},deprecate:function(){this.state!="processing"&&this.setState("deprecated")},setCollection:function(a){if(this.collection!=a){var c=this.collection;c&&(this.isActiveSubscriber&&this.subscriptionType&2&&c.removeSubscriber(this,2),delete this.collection);if(a instanceof d)this.collection=a,this.isActiveSubscriber&&
this.subscriptionType&2&&a.addSubscriber(this,2);this.dispatch("collectionChanged",this,c);return!0}return!1},update:function(a){var c=this.getRootDelegate();if(c!==this)return c.update(a);if(a){var c={},e=0,i;for(i in a)this.info[i]!==a[i]&&(e++,c[i]=this.info[i],this.info[i]=a[i]);if(e)return this.updateCount+=e,this.dispatch("update",this,c),c}return!1},addSubscriber:function(a,c){var e=c+"_"+a.eventObjectId;return!this.subscribers_[e]?(this.subscribers_[e]=a,this.subscriberCount+=1,this.dispatch("subscribersChanged"),
!0):!1},removeSubscriber:function(a,c){var e=c+"_"+a.eventObjectId;return this.subscribers_[e]?(delete this.subscribers_[e],this.subscriberCount-=1,this.dispatch("subscribersChanged"),!0):!1},setIsActiveSubscriber:function(a){if(this.isActiveSubscriber!=!!a){var c=this.delegate,e=this.collection,i=this.subscriptionType;c&&i&1&&(a?c.addSubscriber(this,1):c.removeSubscriber(this,1));e&&i&2&&(a?e.addSubscriber(this,2):e.removeSubscriber(this,2));this.isActiveSubscriber=!!a;this.dispatch("isActiveStateChanged");
return!0}return!1},setSubscriptionType:function(a){var c=this.subscriptionType;if(c!=a){if(this.isActiveSubscriber){var e=this.delegate,i=this.collection,d=i&&a&2^c&2;e&&a&1^c&1&&(c&1?e.removeSubscriber(this,1):e.addSubscriber(this,1));d&&(c&2?i.removeSubscriber(this,2):i.addSubscriber(this,2))}this.subscriptionType=a;return!0}return!1},destroy:function(){var a=this.delegate;if(a)this.info={},a.removeHandler(u,this),this.isActiveSubscriber&&this.subscriptionType&1&&a.removeSubscriber(this,1),delete this.delegate;
this.collection&&(this.setCollection(),delete this.collection);this.inherit();delete this.state;delete this.subscribers_}}),d=t(f,{className:"Basis.Data.AbstractDataset",canHaveDelegate:!1,state:"undefined",map_:null,member_:null,cache_:[],eventCache_:null,itemCount:0,version:0,version_:0,init:function(a){this.inherit(a);this.map_={};this.member_={};this.version=this.itemCount=0;this.eventCache_={mode:!1,delta:[]}},has:function(a){return!(!a||!this.member_[a.eventObjectId])},getItems:function(){if(this.version_!=
this.version)this.version_=this.version,this.cache_=Object.values(this.member_);return this.cache_},sync:Function.$false,add:Function.$false,remove:Function.$false,set:Function.$false,clear:Function.$false,dispatch:function(a,c,e){if(a=="datasetChanged"){var i;if(i=e.inserted){for(var d=0,l;l=i[d];d++)this.member_[l.eventObjectId]=l;this.itemCount+=i.length;this.version++}if(i=e.deleted){for(d=0;l=i[d];d++)delete this.member_[l.eventObjectId];this.itemCount-=i.length;this.version++}}this.inherit.apply(this,
arguments)},destroy:function(){this.clear();this.inherit();this.getItems=Function.$null;delete this.itemCount;delete this.map_;delete this.member_;delete this.cache_;delete this.eventCache_}}),A={destroy:function(a){this.map_[a.eventObjectId]&&this.remove([a])}},B=t(d,{className:"Basis.Data.Dataset",init:function(a){this.inherit(a);a&&a.items&&this.set(a.items)},add:function(a){for(var c,e=[],i=0;i<a.length;i++){var d=a[i];if(d instanceof f){var l=d.eventObjectId;this.map_[l]||(this.map_[l]=d,e.push(d),
d.all!==this&&d.addHandler(A,this))}}e.length&&this.dispatch("datasetChanged",this,c={inserted:e});return c},remove:function(a){for(var c,e=[],i=0;i<a.length;i++){var d=a[i];if(d instanceof f){var l=d.eventObjectId;this.map_[l]&&(delete this.map_[l],e.push(d),d.all!==this&&d.removeHandler(A,this))}}e.length&&this.dispatch("datasetChanged",this,c={deleted:e});return c},set:function(a){if(!this.itemCount)return this.add(a);if(!a.length)return this.clear();for(var c={},e=0;e<a.length;e++){var i=a[e];
if(i instanceof f){var d=i.eventObjectId;c[d]=i}}a=[];for(d in this.map_)c[d]?delete c[d]:(i=this.map_[d],delete this.map_[d],a.push(i),i.all!==this&&i.removeHandler(A,this));e=[];for(d in c)i=c[d],this.map_[d]=c[d],e.push(i),i.all!==this&&i.addHandler(A,this);if(c=m(e,a))return this.dispatch("datasetChanged",this,c),c},sync:function(a,c){if(a){B.setAccumulateState(!0);for(var e=[],i={},d=[],l=[],b=0;b<a.length;b++){var p=a[b];if(p instanceof f){var r=p.eventObjectId;i[r]=p;this.map_[r]||d.push(p)}}for(r in this.map_)i[r]||
(p=this.map_[r],l.push(p),p.destroy());c&&d.length&&(e=this.add(d));B.setAccumulateState(!1);return e}},clear:function(){var a,c=this.getItems();this.map_={};if(c.length){for(a=0;a<c.length;a++)c[a].all!==this&&c[a].removeHandler(A,this);this.dispatch("datasetChanged",this,a={deleted:c})}return a}});(function(){B.setAccumulateState=function(){}})();var y={datasetChanged:function(a,c){var e=a.eventObjectId,i=[],d=[],l,b,p;if(c.inserted)for(var f=0;l=c.inserted[f];f++)b=l.eventObjectId,p=this.map_[b],
p||(p=this.map_[b]={object:l,count:0},i.push(l)),p[e]||(p[e]=a,p.count++);if(c.deleted)for(f=0;l=c.deleted[f];f++)if(b=l.eventObjectId,(p=this.map_[b])&&p[e])delete p[e],p.count--==1&&(delete this.map_[b],d.push(l));(c=m(i,d))&&this.dispatch("datasetChanged",this,c)},destroy:function(a){this.removeSource(a)}},y=t(d,{className:"Basis.Data.AggregateDataset",subscriptionType:4,sources:null,init:function(a){this.sources=[];this.inherit(a);a&&Array.isArray(a.sources)&&a.sources.forEach(this.addSource,
this)},setIsActiveSubscriber:function(a){if(this.isActiveSubscriber!=!!a&&this.sources.length&&this.subscriptionType&4)for(var c=0;source=this.sources[c];c++)a?source.addSubscriber(this,4):source.removeSubscriber(this,4);return this.inherit(a)},setSubscriptionType:function(a){var c=this.subscriptionType,e=Number(a)||0;if(c!=a&&this.isActiveSubscriber&&this.sources.length&&e&4^c&4)for(a=0;source=this.sources[a];a++)e&4?source.addSubscriber(this,4):source.removeSubscriber(this,4);return this.inherit(e)},
addSource:h(y),removeSource:j(y),setSources:k(y),clear:s(y),destroy:function(){this.inherit();delete this.sources}}),a={update:function(a){var c=this.map_[a.eventObjectId],e=this.index(a),a=this.index_;if(c.value!=e){var i=o(a,c);c.value=e;var d=a[i-1],l=a[i+1];if(d&&!(d.value<=e)||l&&!(e<=l.value))if(a.splice(i,1),d=o(a,c),a.splice(d,0,c),a.length>this.offset&&(e=this.offset+this.limit,i=(i>this.offset)+(i>e),d=(d>this.offset)+(d>e),d!=i)){var b,p,l={};switch(d){case 0:p=a[this.offset];b=i==1?c:
a[e];break;case 1:p=c;b=i==0?a[this.offset-1]:a[e];break;case 2:p=a[e-1],b=i==1?c:a[this.offset-1]}if(p)l.inserted=[p.object];if(b)l.deleted=[b.object];this.dispatch("datasetChanged",this,l)}}}};a.rollbackUpdate=a.update;var l={datasetChanged:function(g,c){function e(b,a,c){if(b){var b=b.object,g=b.eventObjectId;c[g]?delete c[g]:a[g]=b}}var i=g.eventObjectId,d={},l={},b,p,f,r=this.index_;if(c.inserted)for(var h=0;b=c.inserted[h];h++)p=b.eventObjectId,f=this.map_[p],f||(f=this.map_[p]={object:b,count:0,
value:this.index(b)},b.addHandler(a,this),b=o(r,f),this.index_.splice(b,0,f),r.length>this.offset&&b<this.offset+this.limit&&(e(r[this.offset+this.limit],l,d),e(b<this.offset?r[this.offset]:f,d,l))),f[i]||(f[i]=g,f.count++);if(c.deleted)for(h=0;b=c.deleted[h];h++)if(p=b.eventObjectId,(f=this.map_[p])&&f[i])delete f[i],f.count--==1&&(f.object.removeHandler(a,this),b=o(r,f),r.length>this.offset&&b<this.offset+this.limit&&(e(r[this.offset+this.limit],d,l),e(b<this.offset?r[this.offset]:f,l,d)),r.splice(b,
1),delete this.map_[p]);d=Object.values(d);l=Object.values(l);(c=m(d,l))&&this.dispatch("datasetChanged",this,c)},destroy:function(a){this.removeSource(a)}},l=t(y,{className:"Basis.Data.IndexedDataset",index:Function.$true,offset:0,limit:10,init:function(a){this.index_=[];if(a){if(a.index)this.index=z(a.index);if("offset"in a)this.offset=v(a.offset);if("limit"in a)this.limit=w(a.limit)}this.inherit(a)},setRange:function(a,c){a=v(a);c=w(c);if(this.offset!=a||this.limit!=c){var e=[],i=[],d=this.offset+
this.limit,l=a+c;a!=this.offset&&(a<this.offset?e.push.apply(e,this.index_.slice(a,Math.min(this.offset,l))):i.push.apply(i,this.index_.slice(this.offset,Math.min(a,d))));l!=d&&(l<d?i.push.apply(i,this.index_.slice(Math.max(l,this.offset),d)):e.push.apply(e,this.index_.slice(Math.max(d,a),l)));this.offset=a;this.limit=c;e=e.map(z("object"));i=i.map(z("object"));(delta=m(e,i))&&this.dispatch("datasetChanged",this,delta)}},addSource:h(l),removeSource:j(l),setSources:k(l),clear:s(l)}),r={update:function(a){var c=
this.map_[a.eventObjectId],e=!!this.filter(a);if(c.state!=e)c.state=e,this.dispatch("datasetChanged",this,e?{inserted:[a]}:{deleted:[a]})}};r.rollbackUpdate=r.update;var C={datasetChanged:function(a,c){var e=a.eventObjectId,i=[],d=[],l,b,p;if(c.inserted)for(var f=0;l=c.inserted[f];f++)b=l.eventObjectId,p=this.map_[b],p||(p=this.map_[b]={object:l,count:0,state:!!this.filter(l)},l.addHandler(r,this),p.state&&i.push(l)),p[e]||(p[e]=a,p.count++);if(c.deleted)for(f=0;l=c.deleted[f];f++)if(b=l.eventObjectId,
(p=this.map_[b])&&p[e])delete p[e],p.count--==1&&(p.object.removeHandler(r,this),p.state&&d.push(p.object),delete this.map_[b]);(c=m(i,d))&&this.dispatch("datasetChanged",this,c)},destroy:function(a){this.removeSource(a)}},C=t(y,{className:"Basis.Data.Collection",filter:Function.$true,init:function(a){if(a&&a.filter)this.filter=z(a.filter);this.inherit(a)},setFilter:function(a){a=a?z(a):Function.$true;if(this.filter!=a){this.filter=a;var c=[],e=[],i,d,l,b;for(b in this.map_)if(i=this.map_[b],d=i.object,
l=!!a(d),l!=i.state)(i.state=l)?c.push(d):e.push(d);var f;(f=m(c,e))&&this.dispatch("datasetChanged",this,f)}},addSource:h(C),removeSource:j(C),setSources:k(C),clear:s(C),sync:function(a){if(a){B.setAccumulateState(!0);for(var c={},e=[],i=0;i<a.length;i++){var d=a[i];if(d instanceof f){var l=d.eventObjectId;c[l]=d}}for(l in this.map_)if(this.map_[l].state&&!c[l])d=this.map_[l].object,e.push(d),d.destroy();B.setAccumulateState(!1);return[]}},destroy:function(){this.inherit()}}),e={update:function(a){var c=
a.eventObjectId,e=this.map_[c].group,i=this.getGroup(this.groupGetter(a),!0);if(e!==i&&(this.map_[c].group=i,delete e.map_[c],e.dispatch("datasetChanged",e,{deleted:[a]}),i.map_[c]=a,i.dispatch("datasetChanged",i,{inserted:[a]}),("destroyEmpty"in e?e.destroyEmpty:this.destroyEmpty)&&!e.itemCount))delete this.groups_[e.groupId],delete this.map_[e.eventObjectId],e.destroy(),this.dispatch("datasetChanged",this,{deleted:[e]})}};e.rollbackUpdate=e.update;var i={datasetChanged:function(a,c){var i=a.eventObjectId,
d=[],l=[],f,b,p,r={},h;if(c.inserted){B.setAccumulateState(!0);for(var j=0;f=c.inserted[j];j++)b=f.eventObjectId,p=this.map_[b],p||(p=this.getGroup(this.groupGetter(f),!0),p=this.map_[b]={object:f,count:0,group:p},d.push(p)),p[i]||(p[i]=a,p.count++);B.setAccumulateState(!1);for(j=0;p=d[j];j++)f=p.object,p=p.group,b=f.eventObjectId,f.addHandler(e,this),p.map_[b]=f,h=p.eventObjectId,(b=r[h])?b.inserted.push(f):r[h]={group:p,inserted:[f],deleted:[]}}if(c.deleted)for(j=0;f=c.deleted[j];j++)if(b=f.eventObjectId,
(p=this.map_[b])&&p[i])if(delete p[i],p.count--==1)p=p.group,f.removeHandler(e,this),delete p.map_[b],delete this.map_[b],h=p.eventObjectId,(b=r[h])?b.deleted.push(f):r[h]={group:p,deleted:[f]};for(h in r)if(c=r[h],p=c.group,c.deleted.length||delete c.deleted,p.dispatch("datasetChanged",p,c),("destroyEmpty"in p?p.destroyEmpty:this.destroyEmpty)&&!p.itemCount)l.push(p),delete this.groups_[p.groupId],delete this.map_[p.eventObjectId],p.destroy();l.length&&this.dispatch("datasetChanged",this,{deleted:l})},
destroy:function(a){this.removeSource(a)}},t=t(y,{className:"Basis.Data.Grouping",groupGetter:Function.$true,groupClass:d,destroyEmpty:!0,init:function(a){this.groups_={};if(a){if(a.groupGetter)this.groupGetter=z(a.groupGetter);if(a.groupClass)this.groupClass=a.groupClass;if(a.destroyEmpty===!1)this.destroyEmpty=!1}this.inherit(a)},getGroup:function(a,c){var e=a instanceof f,i=e?a.eventObjectId:a,d=this.groups_[i];if(!d&&c)d={},e?d.delegate=a:d.info={groupId:a,title:a},d=new this.groupClass(d),d.groupId=
i,this.map_[d.eventObjectId]=d,this.groups_[i]=d,this.dispatch("datasetChanged",this,{inserted:[d]});return d},addSource:h(i),removeSource:j(i),setSources:k(i),clear:s(i),destroy:function(){this.destroyEmpty=!1;this.inherit();var a=Object.values(this.groups_);this.dispatch("datasetChanged",this,{deleted:a});for(var c=0;c<a.length;c++)a[c].destroy();delete this.groups_}});Basis.namespace("Basis.Data").extend({STATE:{UNDEFINED:"undefined",READY:"ready",PROCESSING:"processing",ERROR:"error",DEPRECATED:"deprecated"},
SUBSCRIPTION:{NONE:0,DELEGATE:1,COLLECTION:2,MASK:7},DataObject:f,AbstractDataset:d,Dataset:B,AggregateDataset:y,IndexedDataset:l,Collection:C,Grouping:t})})();
(function(){function m(a){if(a instanceof A)return a.set;a=a.nodeType;if(isNaN(a)==!1)return a==1?d:"nodeValue"}var h=Basis.Class,j=Basis.DOM,k=Basis.Cleaner,s=Function.getter,o=Basis.CSS.cssClass,v=Basis.EventObject,w=Basis.TimeEventManager,t=Basis.Data,z=t.DataObject,u=t.STATE,t=h(z,{className:"Basis.Data.Property.AbstractProperty",locked:!1,lockValue_:null,init:function(a,d,f){this.inherit();this.proxy=typeof f=="function"?f:Function.$self;this.initValue=this.value=this.proxy(a);d&&this.addHandler(d)},
set:function(a,d){var f=this.updateCount,h=this.value,e=this.proxy?this.proxy(a):e;if(e!==h)this.value=e,this.updateCount+=1;!this.locked&&(d||f!=this.updateCount)&&this.dispatch("change",e,h);return f!=this.updateCount},lock:function(){if(!this.locked)this.lockValue_=this.value,this.locked=!0},unlock:function(){if(this.locked)this.locked=!1,this.value!==this.lockValue_&&this.dispatch("change",this.value,this.lockValue_)},update:function(a,d){return this.set(a,d)},reset:function(){this.set(this.initValue)},
toString:function(){return this.value!=null&&this.value.constructor==Object?String(this.value):this.value},destroy:function(){this.inherit();delete this.initValue;delete this.proxy;delete this.lockValue_;delete this.value}}),f={destroy:function(a){this.removeLink(a)}},d=function(a){j.insert(j.clear(this),a)},A=h(t,{className:"Basis.Data.Property.Property",links_:null,behaviour:{change:function(a,d){if(this.links_.length&&!k.globalDestroy)for(var f=0,h;h=this.links_[f++];)this.power_(h,d)}},init:function(a,
d,f){this.inherit(a,d,f);this.links_=[];k.add(this)},addLink:function(a,d,r){if(typeof a!="object"&&a instanceof Object==!1)throw Error("Basis.Data.Property: Link to undefined object ignored");d==null&&(d=m(a));typeof r!="function"&&(r=s(Function.$self,r));d={object:a,format:r,field:d,isEventObject:a instanceof v};this.links_.push(d);d.isEventObject&&a.addHandler(f,this);this.power_(d);return a},addLinkShortcut:function(a,d,f){return this.addLink(a,A.shortcut[d],f)},removeLink:function(a,d){if(this.links_!=
null){var r=arguments.length<2;!r&&d==null&&(d=m(a));for(var h=0,e=0,i;i=this.links_[e];e++)i.object===a&&(r||d==i.field)?i.isEventObject&&i.object.removeHandler(f,this):this.links_[h++]=i;this.links_.length=h}},clear:function(){for(var a=0,d;d=this.links_[a];a++)d.isEventObject&&d.object.removeHandler(f,this);this.links_.clear()},power_:function(a,d){var f=a.field;if(f!=null){var h=a.format(this.value),e=a.object;typeof f=="function"?f.call(e,h,arguments.length<2?h:a.format(d)):e[f]=h}},destroy:function(){this.clear();
delete this.links_;this.inherit();k.remove(this)}});A.shortcut={className:function(a,d){o(this).replace(d,a)},show:function(a){j.display(this,!!a)},hide:function(a){j.display(this,!a)},disable:function(a){this.disabled=!!a},enable:function(a){this.disabled=!a}};var B=[u.READY,u.DEPRECATED,u.UNDEFINED,u.ERROR,u.PROCESSING],y={stateChanged:function(){this.fire(!1,!0)},update:function(){this.fire(!0)},change:function(){this.fire(!0)},destroy:function(a){this.remove(a)}},h=h(A,{className:"Basis.Data.Property.DataObjectSet",
calculateValue:function(){return this.value+1},objects:[],timer_:null,valueChanged_:!1,stateChanged_:!0,state:u.UNDEFINED,init:function(a){a=a||{};this.inherit("value"in a?a.value:0,a.handlers,a.proxy);this.objects=[];if(typeof a.calculateValue=="function")this.calculateValue=a.calculateValue;a.objects&&(this.lock(),this.add.apply(this,a.objects),this.unlock());this.valueChanged_=this.stateChanged_=!!a.calculateOnInit;this.update();k.add(this)},add:function(){for(var a=0,d=arguments.length;a<d;a++){var f=
arguments[a];if(f instanceof z)this.objects.add(f)&&f.addHandler(y,this);else throw Error("Basis.Data.Property: Instance of DataObject required");}this.fire(!0,!0)},remove:function(a){this.objects.remove(a)&&a.removeHandler(y,this);this.fire(!0,!0)},clear:function(){for(var a=0,d;d=this.objects[a];a++)d.removeHandler(y,this);this.objects.clear();this.fire(!0,!0)},fire:function(a,d){if(!this.locked&&(this.valueChanged_=this.valueChanged_||!!a,this.stateChanged_=this.stateChanged_||!!d,!this.timer_&&
(this.valueChanged_||this.stateChanged_)))this.timer_=!0,w.add(this,"update",Date.now())},lock:function(){this.locked=!0},unlock:function(){this.locked=!1},update:function(){delete this.timer_;w.remove(this,"update");if(!k.globalDestroy&&(this.valueChanged_&&this.set(this.calculateValue()),this.stateChanged_)){var a=this.objects.length;if(a){for(var d=-2,f,h=0;h<a;h++){var e=this.objects[h],i=B.indexOf(String(e.state));i>d&&(f=e,d=i)}f&&this.setState(f.state,f.state.data)}else this.setState(u.UNDEFINED)}this.stateChanged_=
this.valueChanged_=!1},destroy:function(){this.lock();this.clear();w.remove(this,"update");this.inherit()}});Basis.namespace("Basis.Data.Property").extend({DataObjectSet:h,AbstractProperty:t,Property:A,PropertySet:h})})();
(function(){function m(b){return b.sortingValue}function h(b,a){b.childNodes.set(a);b.firstChild=a[0]||null;b.lastChild=a[a.length-1]||null;for(var c=a.length-1;c>=0;c--)a[c].nextSibling=a[c+1]||null,a[c].previousSibling=a[c-1]||null,b.insertBefore(a[c],a[c].nextSibling)}function j(b,a){var c=b.childFactory||b.document&&b.document.childFactory,e;a instanceof l&&(a={delegate:a});c&&(e=c.call(b,a));if(!e)throw Error("Basis.DOM.Wrapper: Child node is null");if(!(e instanceof b.childClass))throw Error("Basis.DOM.Wrapper: Child node has wrong class (expected "+
(b.childClass&&b.childClass.className)+" but "+(e&&e.className)+")");return e}var k=Basis.Class,s=Basis.DOM,o=Basis.Event,v=Basis.Html.Template,w=Basis.EventObject,t=Basis.EventObject.createBehaviour,z=Basis.Cleaner,u=Basis.TimeEventManager,f=Function.getter,d=Basis.CSS.cssClass,A=Object.extend,B=Object.complete,y=Basis.Data,a=y.SUBSCRIPTION,l=y.DataObject,r=y.AbstractDataset,y=y.Dataset,C=k(l,{className:"Basis.DOM.Wrapper.AbstractNode",behaviour:{update:function(b,a){var c=this.parentNode;c&&(this.parentNode.dispatch("childUpdated",
this,this.info,[this.info,a].merge(),a),c.matchFunction&&(this.match(),this.match(c.matchFunction)),c.firstChild!==c.lastChild&&c.insertBefore(this,this.nextSibling))}},autoDelegateParent:!1,nodeType:"DOMWrapperNode",canHaveChildren:!1,childNodes:[],colMap_:null,destroyCollectionMember:!0,document:null,parentNode:null,nextSibling:null,previousSibling:null,firstChild:null,lastChild:null,positionDependent:!1,localSorting:null,localSortingDesc:!1,localGrouping:null,groupNode:null,groupControl:null,groupControlClass:null,
init:function(b){b=b||{};if(typeof b.autoDelegateParent=="boolean")this.autoDelegateParent=b.autoDelegateParent;if(typeof b.positionDependent=="boolean")this.positionDependent=b.positionDependent;if(b.localSorting)this.localSorting=f(b.localSorting);if(typeof b.localSortingDesc=="boolean")this.localSortingDesc=b.localSortingDesc;if("localGrouping"in b)this.localGrouping=b.localGrouping;if(b.document)this.document=b.document;this.localGrouping&&this.setLocalGrouping(this.localGrouping);if(this.canHaveChildren)this.childNodes=
[];b=this.inherit(b);this.canHaveChildren&&!this.collection&&b.childNodes&&this.setChildNodes(b.childNodes);return b},appendChild:function(){},insertBefore:function(){},removeChild:function(){},replaceChild:function(){},clear:function(){},hasChildNodes:function(){return this.childNodes.length>0},setChildNodes:function(){},setLocalGrouping:function(){},setLocalSorting:function(){},destroy:function(){var b=this.collection;this.inherit();this.groupControl&&(this.groupControl.destroy(),delete this.groupControl);
!b&&this.firstChild&&this.clear();this.parentNode&&this.parentNode.removeChild(this);delete this.document;delete this.parentNode;delete this.nextSibling;delete this.previousSibling;delete this.childNodes;delete this.firstChild;delete this.lastChild;delete this.info;delete this.config}}),e=k(C,{className:"Basis.DOM.Wrapper.PartitionNode",canHaveChildren:!0,titleGetter:f("info.title"),autoDestroyIfEmpty:!0,init:function(b){if(typeof b=="object"){if(typeof b.autoDestroyIfEmpty=="boolean")this.autoDestroyIfEmpty=
!!b.autoDestroyIfEmpty;if(b.titleGetter)this.titleGetter=f(b.titleGetter)}return this.inherit(b)},setTitleGetter:function(b){b=f(b);if(this.titleGetter!==b)this.titleGetter=b,this.dispatch("update",this,{})},appendChild:function(b){return this.insertBefore(b)},insertBefore:function(b,a){var c=a?this.childNodes.indexOf(a):-1;c==-1?this.childNodes.push(b):this.childNodes.splice(c,0,b);this.firstChild=this.childNodes[0];this.lastChild=this.childNodes.last();b.groupNode=this;this.dispatch("childNodesModified",
this,{inserted:[b]});return b},removeChild:function(b){var a=this.childNodes.indexOf(b);if(a!=-1)this.childNodes.splice(a,1),this.firstChild=this.childNodes[0]||null,this.lastChild=this.childNodes.last()||null,b.groupNode=null,this.dispatch("childNodesModified",this,{deleted:[b]});!this.firstChild&&this.autoDestroyIfEmpty&&this.destroy();return b},clear:function(){if(this.firstChild){for(var b=0,a;a=this.childNodes[b];b++)a.groupNode=null;b=Array.from(this.childNodes);this.childNodes.clear();this.firstChild=
this.lastChild=null;this.dispatch("childNodesModified",this,{deleted:b.reverse()});this.autoDestroyIfEmpty&&this.destroy()}}}),i=k(C,{className:"Basis.DOM.Wrapper.InteractiveNode",selectable:!0,selected:!1,controlSelection:null,selection:null,matchFunction:null,matched:!0,disabled:!1,init:function(b){if(typeof b=="object"){if(b.selection instanceof N)this.selection=b.selection;if(b.selectable==!1)this.selectable=!1}b=this.inherit(b);b.disabled&&this.disable();b.selected&&this.select(!0);return b},
setSelection:function(b){if(this.selection==b)return!1;var a=this.selection;s.axis(this,s.AXIS_DESCENDANT,function(c){if(c.controlSelection==a)c.selected&&a&&a.remove([c]),c.controlSelection=b});this.selection=b;return!0},hasOwnSelection:function(){return!!this.selection},select:function(b){var a=this.selected,c=this.controlSelection;if(c)b?a?c.remove([this]):c.add([this]):c.set([this]);else if(!a&&this.selectable&&!this.isDisabled())this.selected=!0,this.dispatch("select");return this.selected!=
a},unselect:function(){var b=this.selected;if(b){var a=this.controlSelection;a?a.remove([this]):(this.selected=!1,this.dispatch("unselect"))}return this.selected!=b},enable:function(){if(this.disabled)this.disabled=!1,this.dispatch("enable")},disable:function(){if(!this.disabled)this.disabled=!0,this.dispatch("disable")},isDisabled:function(){return this.disabled||this.document&&this.document.disabled||!!s.parent(this,f("disabled"))},setMatchFunction:function(){},match:function(b){if(typeof b!="function"){if(this.matched&&
this.underMatch)this.underMatch(this,!0),delete this.underMatch;else if(!this.matched)this.matched=!0,this.dispatch("match");return!0}if(b(this)){if(this.underMatch=b,!this.matched)this.matched=!0,this.dispatch("match")}else if(delete this.underMatch,this.matched)this.matched=!1,this.dispatch("unmatch");return this.matched},destroy:function(){this.hasOwnSelection()&&(this.selection.destroy(),delete this.selection);this.unselect();this.inherit()}}),g={datasetChanged:function(b,a){var c={},e=[];if(a.deleted)if(this.childNodes.length==
a.deleted.length){var e=Array.from(this.childNodes),g=this.collection;this.collection=null;this.clear(!0);this.collection=g}else{for(var g=0,i;i=a.deleted[g];g++)i=this.colMap_[i.eventObjectId],i.canHaveDelegate=!0,e.push(this.removeChild(i));c.deleted=e}if(a.inserted){c.inserted=[];for(g=0;i=a.inserted[g];g++){var d=j(this,{isActiveSubscriber:!1,cascadeDestroy:!1,delegate:i});d.canHaveDelegate=!1;this.colMap_[i.eventObjectId]=d;c.inserted.push(d);this.firstChild&&this.insertBefore(d)}}this.firstChild?
this.dispatch("childNodesModified",this,c):this.setChildNodes(c.inserted);this.destroyCollectionMember&&e.length&&e.forEach(f("destroy()"))},destroy:function(b){this.collection===b&&this.setCollection()}},c={canHaveChildren:!0,childClass:C,childFactory:null,positionUpdateTimer_:null,minPosition_:1E12,maxPosition_:0,updatePositions_:function(b,a){if(this.positionDependent&&(this.minPosition_=Math.min(this.minPosition_,b,a),this.maxPosition_=Math.max(this.maxPosition_,b,a),!this.positionUpdateTimer_))this.positionUpdateTimer_=
function(){var b=Math.min(this.maxPosition_+1,this.childNodes.length),a=this.childNodes[this.minPosition_],c=a&&a.groupNode,e=this.minPosition_;c&&(e=c.childNodes.indexOf(a));for(a=this.minPosition_;a<b;a++,e++){var g=this.childNodes[a];if(g.groupNode!=c)e=0,c=g.groupNode;g.dispatch("updatePosition",a,e)}delete this.minPosition_;delete this.maxPosition_;delete this.positionUpdateTimer_},u.add(this,"positionUpdateTimer_",Date.now())},appendChild:function(b){return this.insertBefore(b)},insertBefore:function(b,
a){if(!this.canHaveChildren)throw Error("Basis.DOM.Wrapper: Node can't be inserted at specified point in hierarchy");if(b.firstChild&&s.axis(this,s.AXIS_ANCESTOR_OR_SELF).has(b))throw Error("Basis.DOM.Wrapper: Node can't be inserted at specified point in hierarchy");if(this.collection&&!this.collection.has(b.delegate))throw Error("Basis.DOM.Wrapper: Operation is not allowed because node is under collection control");b instanceof this.childClass==!1&&(b=j(this,b));var c=b.parentNode===this,e=this.localSorting,
g=this.childNodes;if(this.localGrouping){var g=0,i=this.groupControl.getGroupNode(b),d=i.childNodes,f=b.groupNode;if(c&&b.nextSibling===a&&f===i)return b;this.localSorting?(e=e(b),g=d.binarySearchPos(e,m,this.localSortingDesc),b.sortingValue=e):g=a&&a.groupNode===i?d.indexOf(a):d.length;a=d[g];if(!a&&g>=d.length)for(e=i;e=e.nextSibling;)if(a=e.firstChild)break;if(b===a||c&&b.nextSibling===a)return f!==i&&(f&&f.removeChild(b),i.insertBefore(b),g=this.childNodes.indexOf(b),this.updatePositions_(g,g)),
b}else if(e){var e=e(b),f=this.localSortingDesc,d=b.nextSibling,l=b.previousSibling;if(c){if(e===b.sortingValue)return b;if((!d||(f?d.sortingValue<=e:d.sortingValue>=e))&&(!l||(f?l.sortingValue>=e:l.sortingValue<=e)))return b.sortingValue=e,b}a=g[g.binarySearchPos(e,m,f)];b.sortingValue=e;if(b===a||c&&d===a)return b}else{if(a&&a.parentNode!==this)throw Error("Basis.DOM.Wrapper: Node was not found");if(c){if(b.nextSibling===a)return b;if(b===a)throw Error("Basis.DOM.Wrapper: Node can't be inserted at specified point in hierarchy");
}}e=-1;c?(b.nextSibling?b.nextSibling.previousSibling=b.previousSibling:this.lastChild=b.previousSibling,b.previousSibling?b.previousSibling.nextSibling=b.nextSibling:this.firstChild=b.nextSibling,b.previousSibling=null,b.nextSibling=null,e=this.childNodes.indexOf(b),this.childNodes.splice(e,1),b.groupNode&&b.groupNode.removeChild(b)):b.parentNode&&b.parentNode.removeChild(b);g=a?this.childNodes.indexOf(a):this.childNodes.length;if(g==-1)throw Error("Basis.DOM.Wrapper: Node was not found");this.childNodes.splice(g,
0,b);this.updatePositions_(g,e==-1?this.childNodes.length-1:e+(g<e));b.groupNode!=i&&i.insertBefore(b,a);a?b.nextSibling=a:(a={previousSibling:this.lastChild},this.lastChild=b);b.parentNode=this;b.previousSibling=a.previousSibling;g==0?this.firstChild=b:a.previousSibling.nextSibling=b;a.previousSibling=b;var p=!1,h=!1,r=this.selection||this.controlSelection;if(!b.document&&b.document!==this.document)p=!0,b.document=this.document;if(!b.controlSelection&&b.controlSelection!==r)b.controlSelection=r,
h=!b.selection,b.selected&&r.add([b]);b.firstChild&&(p||h)&&s.axis(b,s.AXIS_DESCENDANT).forEach(function(b){if(p&&!b.document)b.document=this.document;if(h&&!b.controlSelection)b.selected&&b.unselect(),b.controlSelection=r},b);c||(b.match&&b.match(this.matchFunction),b.autoDelegateParent&&b.setDelegate(this),this.collection||this.dispatch("childNodesModified",this,{inserted:[b]}));return b},removeChild:function(b){if(b==null||b.parentNode!==this)throw Error("Basis.DOM.Wrapper: Node was not found");
if(b instanceof this.childClass==!1)throw Error("Basis.DOM.Wrapper: Child node has wrong class");if(this.collection&&this.collection.has(b))throw Error("Basis.DOM.Wrapper: Operation is not allowed because node is under collection control");var a=this.childNodes.indexOf(b);this.childNodes.splice(a,1);this.updatePositions_(a,this.firstChild==this.lastChild?0:this.childNodes.length-1);b.parentNode=null;var c=b.document===this.document,e=b.controlSelection===this.selection;b.firstChild&&(c||e)&&s.axis(b,
s.AXIS_DESCENDANT).forEach(function(b){if(c&&b.document==this.document)b.document=null;if(e&&b.controlSelection==this.selection)b.selected&&this.selection.remove([b]),b.controlSelection=null},b);if(c)b.document=null;if(e)b.selected&&this.selection.remove([b]),b.controlSelection=null;b.nextSibling?b.nextSibling.previousSibling=b.previousSibling:this.lastChild=b.previousSibling;b.previousSibling?b.previousSibling.nextSibling=b.nextSibling:this.firstChild=b.nextSibling;b.nextSibling=null;b.previousSibling=
null;b.groupNode&&b.groupNode.removeChild(b);this.collection||this.dispatch("childNodesModified",this,{deleted:[b]});b.autoDelegateParent&&b.setDelegate();return b},replaceChild:function(b,a){if(this.collection)throw Error("Basis.DOM.Wrapper: Operation is not allowed because node is under collection control");if(a==null||a.parentNode!==this)throw Error("Basis.DOM.Wrapper: Node was not found");this.insertBefore(b,a);return this.removeChild(a)},clear:function(b){if(this.collection)this.setCollection();
else if(this.firstChild){var a=Array.from(this.childNodes);this.lastChild=this.firstChild=null;this.childNodes.clear();for(this.dispatch("childNodesModified",this,{deleted:a.reverse()});a.length;){var c=a.pop();c.parentNode=null;c.groupNode=null;(c.selection||c.document)&&s.axis(c,s.AXIS_DESCENDANT_OR_SELF).forEach(function(b){if(this.selection&&b.selection===this.selection)b.selected&&b.selection.remove([b]),b.selection=null;if(b.document===this.document)b.document=null},this);b?(c.nextSibling=null,
c.previousSibling=null,c.autoDelegateParent&&c.setDelegate()):c.destroy()}if(this.groupControl)for(var a=this.groupControl.childNodes,c=a.length-1,e;e=a[c];c--)e.clear(b)}},setChildNodes:function(b,a){this.collection||this.clear(!!a);if(b&&("length"in b==!1&&(b=[b]),b.length)){this.dispatch=Function.$undef;for(var c=[],e=0;e<b.length;e++)c.push(this.insertBefore(b[e]));delete this.dispatch;this.dispatch("childNodesModified",this,{inserted:c})}return this.childNodes},setCollection:function(b){if(this.canHaveChildren&&
this.collection!==b){var c=this.collection;c&&(this.isActiveSubscriber&&this.subscriptionType&a.COLLECTION&&c.removeSubscriber(this,a.COLLECTION),c.removeHandler(g,this),delete this.collection,delete this.colMap_,c.itemCount&&this.clear());if(b&&b instanceof r)this.collection=b,this.colMap_={},b.itemCount&&g.datasetChanged.call(this,b,{inserted:b.getItems()}),b.addHandler(g,this),this.isActiveSubscriber&&this.subscriptionType&a.COLLECTION&&b.addSubscriber(this,a.COLLECTION);this.dispatch("collectionChanged",
this,c)}},setLocalGrouping:function(b){var a=!1;if(b){var c=typeof b=="function"||typeof b=="string",e=f(c?b:b.groupGetter),c=c?null:b;if(e&&(!this.groupControl||this.groupControl.groupGetter!==e)){this.localGrouping=b;this.groupControl?this.groupControl.clear():this.groupControl=new this.groupControlClass({groupControlHolder:this,autoDestroyEmptyGroups:c?c.autoDestroyEmptyGroups:void 0});c&&(this.groupControl.setLocalSorting("localSorting"in c?c.localSorting:this.groupControl.localSorting,"localSortingDesc"in
c?c.localSortingDesc:this.groupControl.localSortingDesc),c.titleGetter&&this.groupControl.setTitleGetter(c.titleGetter),typeof c.isActiveSubscriber=="boolean"&&this.groupControl.setIsActiveSubscriber(c.isActiveSubscriber),typeof c.subscriptionType=="number"&&this.groupControl.setSubscriptionType(c.subscriptionType),"collection"in c&&this.groupControl.setCollection(c.collection));this.groupControl.groupGetter=e;if(this.firstChild){b=this.childNodes;this.localSorting&&(b=b.sortAsObject(m,null,this.localSortingDesc));
for(e=0;a=b[e];e++)a.groupNode=this.groupControl.getGroupNode(a);a=b;for(e=0;c=a[e];e++)c.groupNode.childNodes.push(c);a.clear();for(e=this.groupControl.nullGroup;e;e=e.nextSibling)c=e.childNodes,e.firstChild=c[0]||null,e.lastChild=c[c.length-1]||null,a.push.apply(a,c),e.dispatch("childNodesModified",e,{inserted:Array.from(c)});h(this,b)}a=!0}else c&&this.groupControl&&(this.groupControl.setLocalSorting("localSorting"in c?c.localSorting:this.groupControl.localSorting,"localSortingDesc"in c?c.localSortingDesc:
this.groupControl.localSortingDesc),c.titleGetter&&this.groupControl.setTitleGetter(c.titleGetter),a=!0)}else if(this.groupControl){this.localGrouping=null;this.groupControl.destroy();delete this.groupControl;if(this.firstChild){b=this.childNodes;this.localSorting&&(b=b.sortAsObject(m,null,this.localSortingDesc));for(e=0;e<b.length;e++)b[e].groupNode=null;h(this,b)}a=!0}a&&this.dispatch("localGroupingChanged",this)},setLocalSorting:function(b,a){b&&(b=f(b));if(this.localSorting!=b||this.localSortingDesc!=
!!a){this.localSortingDesc=!!a;this.localSorting=b||null;if(b&&this.firstChild){var c=[],e;for(e=this.firstChild;e;e=e.nextSibling)e.sortingValue=b(e);if(this.localGrouping)for(var g=this.groupControl.nullGroup;g;g=g.nextSibling)e=g.childNodes,e.set(e.sortAsObject(m,null,this.localSortingDesc)),g.firstChild=e[0]||null,g.lastChild=e[e.length-1]||null,c.push.apply(c,e);else c=this.childNodes.sortAsObject(m,null,this.localSortingDesc);h(this,c);clearTimeout(this.positionUpdateTimer_);delete this.positionUpdateTimer_;
if(this.positionDependent)for(var c=this.childNodes.length,g=this.firstChild&&this.firstChild.groupNode,i=0,d=0;i<c;i++,d++){e=this.childNodes[i];if(e.groupNode!=g)d=0,g=e.groupNode;e.dispatch("updatePosition",i,d)}}this.dispatch("localSortingChanged",this)}},setMatchFunction:function(b){if(this.matchFunction!=b){this.matchFunction=b;for(var a=this.lastChild;a;a=a.previousSibling)a.match(b)}return this.matchFunction}},x=k(i,c,{className:"Basis.DOM.Wrapper.Node",init:function(b){if(b){if(typeof b.childFactory==
"function")this.childFactory=b.childFactory;if(typeof b.childClass=="function")this.childClass=b.childClass}return this.inherit(b)}}),E=k(C,c,{className:"Basis.DOM.Wrapper.GroupControl",map_:{},autoDestroyEmptyGroups:!0,groupTitleGetter:f("info.title"),childClass:e,childFactory:function(b){return new this.childClass(B(b,{titleGetter:this.groupTitleGetter,autoDestroyIfEmpty:this.collection?!1:this.autoDestroyEmptyGroups}))},behaviour:{childNodesModified:function(b,a){this.nullGroup.nextSibling=this.firstChild;
if(a.inserted&&this.collection&&this.nullGroup.firstChild)for(var c=this.nullGroup.firstChild.parentNode,e=Array.from(this.nullGroup.childNodes),g=e.length-1;g>=0;g--)c.insertBefore(e[g],e[g].nextSibling)}},init:function(b){this.map_={};if(typeof b.autoDestroyEmptyGroups!="undefined")this.autoDestroyEmptyGroups=!!b.autoDestroyEmptyGroups;this.groupControlHolder=b.groupControlHolder;this.nullGroup=new e({autoDestroyIfEmpty:!1});this.inherit(b);return b},setTitleGetter:function(b){this.groupTitleGetter=
f(b);for(b=this.firstChild;b;b=b.nextSibling)b.setTitleGetter(this.groupTitleGetter)},getGroupNode:function(b){var b=this.groupGetter(b),a=b instanceof w,c=this.map_[a?b.eventObjectId:b];!c&&!this.collection&&(c=this.appendChild({info:a?b:{id:b,title:b}}));return c||this.nullGroup},insertBefore:function(b,a){if(b=this.inherit(b,a)){if("groupId_"in b==!1)b.groupId_=b.delegate?b.delegate.eventObjectId:b.info.id,this.map_[b.groupId_]=b;if(b.firstChild){var c=this.groupControlHolder,e=c.childNodes,g=
b.firstChild,i=b.lastChild,d,f,l;for(d=b.previousSibling;d;){if(l=d.lastChild)break;d=d.previousSibling}if(!l)l=this.nullGroup.lastChild;for(d=b.nextSibling;d;){if(f=d.firstChild)break;d=d.nextSibling}if(g.previousSibling!=l||i.nextSibling!=f){if(g.previousSibling)g.previousSibling.nextSibling=i.nextSibling;if(i.nextSibling)i.nextSibling.previousSibling=g.previousSibling;d=e.splice(e.indexOf(g),b.childNodes.length);var p=e.indexOf(f);d.unshift(p!=-1?p:e.length,0);e.splice.apply(e,d);g.previousSibling=
l;i.nextSibling=f;if(l)l.nextSibling=g;if(f)f.previousSibling=i;c.firstChild=e[0];c.lastChild=e[e.length-1]}}return b}},removeChild:function(b){if(b=this.inherit(b))return delete this.map_[b.groupId_],b},clear:function(){this.map_={};this.inherit()},destroy:function(){this.inherit();delete this.map_}});C.prototype.groupControlClass=E;var n={},I={destroy:function(b){s.replace(b.element,this)}},b={update:function(){for(var b in this.satelliteConfig){var a=this.satelliteConfig[b],c=typeof a.existsIf!=
"function"||a.existsIf(this),e=this.satellite[b];if(c){var g=typeof a.delegate=="function"?a.delegate(this):null,d=typeof a.collection=="function"?a.collection(this):null,c=this.tmpl[a.replace||b];e?(e.setDelegate(g),e.setCollection(d)):(e={document:this.document,delegate:g,collection:d},a.config&&Object.complete(e,typeof a.config=="function"?a.config(this):a.config),e=new a.instanceOf(e),this.satellite[b]=e,e.owner=this,c&&e instanceof p&&e.element&&(s.replace(c,e.element),e.addHandler(I,c)))}else e&&
(e.destroy(),delete e.owner,delete this.satellite[b])}}},p=k(x,{className:"Basis.DOM.Wrapper.HtmlNode",behaviour:{select:function(){(this.tmpl.selectedElement||this.tmpl.content||this.tmpl.element).className+=" selected"},unselect:function(){var b=this.tmpl.selectedElement||this.tmpl.content||this.tmpl.element;b.className=b.className.replace(/(^|\s+)selected(\s+|$)/,"$2")},disable:function(){d(this.tmpl.disabledElement||this.tmpl.element).add("disabled")},enable:function(){d(this.tmpl.disabledElement||
this.tmpl.element).remove("disabled")},match:function(){s.display(this.tmpl.element,!0)},unmatch:function(){s.display(this.tmpl.element,!1)}},template:new v("<div{element|childNodesElement}></div>"),cssClassName:{},satelliteConfig:null,init:function(a){if(a)if(typeof a!="object"||!isNaN(a.nodeType))a={content:a};else if(a.template)this.template=a.template;if(this.template)this.template.createInstance(this.tmpl={}),A(this,this.tmpl);var a=this.inherit(a),c=a.cssClassName;if(c){typeof c=="string"&&
(c={element:c});for(var e in c){var g=this.tmpl[e];g&&(g=d(g),g.add.apply(g,String(c[e]).qw()))}}if(this.tmpl&&this.tmpl.element&&(this.tmpl.element.basisEventObjectId=this.eventObjectId,n[this.eventObjectId]=this,a.id))this.tmpl.element.id=a.id;if(this.satelliteConfig)this.satellite={},this.addHandler(b),b.update.call(this,this,{});a.content&&s.insert(this.tmpl.content||this.tmpl.element,a.content);a.container&&s.insert(a.container,this.tmpl.element);return a},addEventListener:function(b,a,c){a=
a||b;o.addHandler(this.tmpl.element,b,function(b){var e=this.getNodeByEventSender(b);e&&e.dispatch(a,b);this.dispatch(a,b,e);!c&&o.sender(b).tagName!="INPUT"&&o.kill(b)},this)},getNodeByEventSender:function(b){b=o.sender(b);if(b=b.basisEventObjectId?b:s.parent(b,f("basisEventObjectId"),0,this.tmpl.element))if((b=n[b.basisEventObjectId])&&b.document==this)return b},destroy:function(){delete n[this.eventObjectId];if(this.satellite){for(var b in this.satellite){var a=this.satellite[b];a.destroy();delete a.owner}delete this.satellite}this.inherit();
if(b=this.element)o.clearHandlers(b),b.parentNode&&b.parentNode.removeChild(b);this.template?(this.template.clearInstance(this),delete this.tmpl):(delete this.element,delete this.content,delete this.childNodesElement)}}),J=k(p,{className:"Basis.DOM.Wrapper.HtmlContainer",groupControlClass:K,childClass:p,childFactory:function(b){return new this.childClass(b)},insertBefore:function(b,a){if(b=this.inherit(b,a)){if(this===b.parentNode){var c=b.groupNode,e=null;if(!c||!c.childNodesElement)c=this;if(b!=
c.lastChild)e=b.nextSibling.element;for(;e&&e.parentNode!=c.childNodesElement;)e=e.parentNode;(b.element.parentNode!==c.childNodesElement||b.element.nextSibling!==e)&&c.childNodesElement.insertBefore(b.element,e)}return b}},removeChild:function(b){if(this.inherit(b)){var a=b.element,c=a.parentNode;c&&c.removeChild(a);return b}},clear:function(b){if(b)for(var a=this.firstChild;a;)a.element.parentNode&&a.element.parentNode.removeChild(a.element),a=a.nextSibling;this.inherit(b)},setChildNodes:function(b,
a){var c=s.createFragment(),e=this.groupControl||this,g=e.childNodesElement;e.childNodesElement=c;this.inherit(b,a);g.appendChild(c);e.childNodesElement=g;return this.childNodes}}),v=k(e,J).extend({className:"Basis.DOM.Wrapper.HtmlPartitionNode",template:new v('<div{element} class="Basis-PartitionNode"><div class="Basis-PartitionNode-Title">{titleText}</div><div{content|childNodesElement} class="Basis-PartitionNode-Content"></div></div>'),behaviour:t(e,t(J,{update:function(b,a){this.inherit(b,a);
if(this.tmpl.titleText)this.tmpl.titleText.nodeValue=Object.coalesce(this.titleGetter(this),"")}})),clear:e.prototype.clear}),K=k(E,J).extend({className:"Basis.DOM.Wrapper.HtmlGroupControl",behaviour:E.prototype.behaviour,template:null,childClass:v,childFactory:E.prototype.childFactory,init:function(b){b=this.inherit(b);if(this.groupControlHolder)this.tmpl=this.tmpl||{},this.childNodesElement=this.groupControlHolder.tmpl.groupsElement||this.groupControlHolder.childNodesElement,this.document=this.groupControlHolder;
return b},clear:function(b){for(var a=Array.from(this.childNodes);a.length;){var c=a.pop();c.clear(b);c.destroy()}},destroy:function(){this.inherit();delete this.groupControlHolder;delete this.childNodesElement}});J.prototype.groupControlClass=K;var t=k(J,{className:"Basis.DOM.Wrapper.Control",childClass:null,childFactory:function(b){return new this.childClass(b)},init:function(b){b=A({},b);if("selection"in b==!1)b.selection={};if(b.selection instanceof N==!1)b.selection=new N(b.selection instanceof
Object?b.selection:null);this.document=this;b=this.inherit(b);z.add(this);return b},select:function(){},unselect:function(){this.selection&&this.selection.clear()},disable:function(){if(!this.disabled)this.disabled=!0,this.dispatch("disable")},destroy:function(){this.selection&&(this.selection.destroy(),delete this.selection);this.inherit();z.remove(this)}}),L={childNodesModified:function(b,a){var c={},e=0,g=0,d=a.inserted,i=a.deleted;if(d&&d.length)for(c.inserted=d;b=d[e];)this.map_[b.eventObjectId]=
b,e++;if(i&&i.length)for(c.deleted=i;b=i[g];)delete this.map_[b.eventObjectId],g++;if(e||g)this.itemCount+=e-g,this.version++,this.dispatch("datasetChanged",this,c)},destroy:function(){this.autoDestroy?this.destroy():this.setSourceNode()}},H=k(r,{className:"Basis.DOM.Wrapper.ChildNodesDataset",autoDestroy:!0,behaviour:{sourceNodeChanged:function(){!this.sourceNode&&this.autoDestroy&&this.destroy()}},init:function(b,a){this.inherit(a);this.setSourceNode(b)},setSourceNode:function(b){if(b!==this.sourceNode){var a=
this.sourceNode;a&&(a.removeHandler(L,this),L.childNodesModified.call(this,a,{deleted:a.childNodes}),delete this.sourceNode);if(b instanceof C)this.sourceNode=b,b.addHandler(L,this),L.childNodesModified.call(this,b,{inserted:b.childNodes});this.dispatch("sourceNodeChanged",this,a)}return this.sourceNode},destroy:function(){this.sourceNode&&(this.sourceNode.removeHandler(L,this),delete this.sourceNode);this.inherit()}}),N=k(y,{className:"Basis.DOM.Wrapper.Selection",multiple:!1,behaviour:{datasetChanged:function(b,
a){this.inherit(b,a);if(a.inserted)for(var c=0,e;e=a.inserted[c];c++)if(!e.selected)e.selected=!0,e.dispatch("select");if(a.deleted)for(c=0;e=a.deleted[c];c++)if(e.selected)e.selected=!1,e.dispatch("unselect");this.dispatch("change")}},init:function(b){this.inherit(b);if(b&&b.multiple)this.multiple=!!b.multiple},add:function(b){if(!this.multiple)if(this.itemCount)return this.set(b);else b.splice(1);for(var a=[],c=0,e;e=b[c];c++)e.controlSelection==this&&e.selectable&&a.push(e);return this.inherit(a)},
set:function(b){this.multiple||b.splice(1);for(var a=[],c=0,e;e=b[c];c++)e.controlSelection==this&&e.selectable&&a.push(e);return this.inherit(a)},pick:function(){for(var b in this.map_)return this.member_[b]}});Basis.namespace("Basis.DOM.Wrapper").extend({HierarchyTools:c,AbstractNode:C,InteractiveNode:i,Node:x,ChildNodesDataset:H,Selection:N,GroupControl:E,PartitionNode:e,Control:t,HtmlGroupControl:K,HtmlPartitionNode:v,HtmlNode:p,HtmlContainer:J,HtmlControl:t})})();
(function(){function m(b){r[b]=r[b]||0;return b+r[b]++}var h=Basis.Class,j=Object.extend,k=Array.from,s=Function.$self,o=Function.getter,v=Basis.Data,w=Basis.EventObject,t=v.Dataset,z=v.Collection,u=v.Grouping,f=v.DataObject,d=v.STATE,A={string:1,number:1},B=[],y=function(b){return isNaN(b)?null:Number(b)},a=function(b){return isNaN(b)?null:parseInt(b)},l=function(b){return b==null?null:String(b)},r={},v=function(b){return this.inherit(b&&b.map(this.wrapper))},C=function(b){return function(a){if(a){if(this.name=
a.name||m(b),a.wrapper)this.wrapper=a.wrapper}else this.name=m(b);this.inherit(a)}},e=function(b,a){t.setAccumulateState(!0);b=(b||[]).map(this.wrapper);t.setAccumulateState(!1);return this.inherit(b,a)},i=h(t,{className:"Basis.Entity.EntitySet",wrapper:Function.$self,init:C("EntitySet"),sync:e,set:v,add:v,remove:v,destroy:function(){this.inherit();delete this.wrapper}}),g=h(i,{className:"Basis.Entity.ReadOnlyEntitySet",set:Function.$false,add:Function.$false,remove:Function.$false,clear:Function.$false}),
c=h(z,{className:"Basis.Entity.EntityCollection",init:C("EntityCollection"),sync:e}),x=h(u,{className:"Basis.Entity.EntityGrouping",groupClass:g,init:C("EntityGrouping"),sync:e,getGroup:function(b,a){var c=this.inherit(b,a);if(c)c.wrapper=this.wrapper;return c}}),E=function(b){if(this instanceof E){var a=new n(b||s);return function(b,c){return b!=null?(c instanceof i||(c=a.createEntitySet()),c.set(b instanceof t?b.getItems():Array.from(b)),c):null}}};E.className="Basis.Entity.EntitySetWrapper";var n=
h(null,{className:"Basis.Entity.EntitySetConstructor",init:function(b){this.wrapper=b},createEntitySet:function(){return new i({wrapper:this.wrapper,name:"Set of "+((this.wrapper.entityType||this.wrapper).name||"").quote("{")})}}),I=function(b){if(this instanceof I){var a=function(b,a){if(b!=null){if(b===a||b.entityType===e)return b;var c,d=e.idField;if(A[typeof b]){if(!d)return;c=b;b={};b[d]=c}else if(d)c=b[d];else if(g&&(a=e.singleton,!a))return e.singleton=new e.entityClass(b);c!=null&&(a=e.index_[c]);
a&&a.entityType===e?a.update(b):a=new e.entityClass(b);return a}else return e.singleton},e=new J(b||{},a),g=e.isSingleton;j(a,{entityType:e,get:function(b){return e.get(b)},getAll:function(){return k(e.all.getItems())},addField:function(b,a){e.addField(b,a)},all:e.all,createCollection:function(b,g,d){var i=e.collection_[b];return!i&&g?e.collection_[b]=new c({wrapper:a,sources:[d||e.all],filter:g}):i},getCollection:function(b){return e.collection_[b]},createGrouping:function(b,c,g){var d=e.grouping_[b];
return!d&&c?e.grouping_[b]=new x({wrapper:a,sources:[g||e.all],groupGetter:c}):d},getGrouping:function(b){return e.grouping_[b]},getSlot:function(b){return e.getSlot(b)}});return a}};I.className="Basis.Entity.EntityTypeWrapper";var b=o("singleton"),p={},J=h(null,{className:"Basis.Entity.EntityType",name:"UntitledEntityType",defaults:null,fields:null,extensible:!1,index_:null,slot_:null,init:function(e,d){this.name=e.name||m(this.name);B.push(this);this.isSingleton=e.isSingleton;this.wrapper=d;this.all=
new g({wrapper:d});this.index_={};this.slot_={};if(e.extensible)this.extensible=!0;this.fields={};this.defaults={};if(e.fields)for(var i in e.fields){var p=e.fields[i];this.addField(i,p);if([y,a,l].has(p))e.id=i}if(this.isSingleton)this.get=b;else{var r=this.idField=e.id||null;this.idFieldNames=[];if(r){this.idFieldNames.push(r);var n=this.fields[this.idField],j=function(b){if(b){if(b instanceof f)b=b.info;return b[r]}};this.getId=j;this.get=function(b){return this.index_[A[typeof b]?n(b):j(b)]}}}this.aliases=
{};e.aliases&&Object.iterate(e.aliases,function(b,a){this.aliases[b]=a;a==this.idField&&this.idFieldNames.push(b)},this);this.collection_={};if(e.collections)for(var k in e.collections)this.collection_[k]=new c({name:k,wrapper:d,sources:[this.all],filter:e.collections[k]||Function.$true});this.grouping_={};if(e.groupings)for(k in e.groupings)this.grouping_[k]=new x({name:k,wrapper:d,sources:[this.all],groupGetter:e.groupings[k]||Function.$true});this.reflection_={};if(e.reflections)for(k in e.reflections)this.addReflection(k,
e.reflections[k]);this.entityClass=h(K,{className:"Basis.Entity",entityType:this,defaults:this.defaults,all:this.all,getId:r?function(){return this.info[r]}:Function.$null})},addField:function(b,a){this.all.length||(typeof a=="function"?(this.fields[b]=a,this.defaults[b]=this.fields[b]()):(this.fields[b]=s,this.defaults[b]=this.defaults[b]),p[b]||(p[b]={destroy:function(){this.set(b,null)}}))},addReflection:function(b,a){var c=new L(b,a);this.reflection_[b]=c;for(var e=this.all.getItems(),g=e.length;--g>=
0;)c.update(e[g])},get:Function.$null,getId:function(b){if(b&&this.idField){var a=b;if(b instanceof f)a=a.info;for(var b=0,c;c=this.idFieldNames[b];b++)if(c in a)return a[c]}},getSlot:function(b,a){var c=this.slot_[b];c||(a=j({},a),a[this.idField]=b,c=this.slot_[b]=new f({defaults:a,delegate:this.index_[b]}));return c}}),K=h(f,{className:"Basis.Entity.Entity",canHaveDelegate:!1,modified:null,silentSet_:!1,behaviour:{update:function(b,a){this.inherit(b,a);for(var c in this.entityType.reflection_)this.entityType.reflection_[c].update(this)},
destroy:function(){this.inherit();for(var b in this.reflection_)this.entityType.reflection_[b].detach(this)}},init:function(b){var a=this.entityType;this.inherit();this.fieldHandlers_={};this.value=this.info={};var c=a.defaults,e=a.fields,g=a.aliases,d={},i,f;for(f in b)d[g[f]||f]=b[f];for(f in e){b=f in d?e[f](d[f]):c[f];if(f==a.idField){if(b!=null){if(a.index_[b])continue;a.index_[b]=this;i=a.slot_[b]}}else b&&b!==this&&b instanceof w&&b.addHandler(p[f],this)&&(this.fieldHandlers_[f]=!0);this.info[f]=
b}i&&i.setDelegate(this);this.all.dispatch("datasetChanged",this.all,{inserted:[this]});this.reflection_={};for(var l in a.reflection_)a.reflection_[l].update(this)},toString:function(){return"[object "+this.constructor.className+"("+this.entityType.name+")]"},get:function(b){if(this.info)return this.info[this.entityType.aliases[b]||b]},set:function(b,a,c){var e=this.entityType,b=e.aliases[b]||b,g=e.fields[b];if(!g){if(!e.extensible)return;g=s}var d,i={},g=g(a,this.info[b]),a=this.info[b];if(g!==
a&&(!g||!a||g.constructor!==Date||a.constructor!==Date||Number(g)!==Number(a))){if(e.idField==b){c=e.index_;e=e.slot_;if(c[g])return!1;a!=null&&(delete c[a],e[a]&&e[a].setDelegate());g!=null&&(c[g]=this,e[g]&&e[g].setDelegate(this))}else if(c){if(!this.modified)this.modified={};if(b in this.modified===!1)i.rollback={key:b,value:void 0},this.modified[b]=a,d="ROLLBACK_AND_INFO";else if(this.modified[b]===g)i.rollback={key:b,value:g},delete this.modified[b],Object.keys(this.modified).length||delete this.modified}else if(this.modified&&
b in this.modified)if(this.modified[b]!==g)i.rollback={key:b,value:this.modified[b]},this.modified[b]=g,d="ROLLBACK_ONLY";else return!1;if(d!="ROLLBACK_ONLY")this.info[b]=g,this.fieldHandlers_[b]&&(a.removeHandler(p[b],this),delete this.fieldHandlers_[b]),g&&g!==this&&g instanceof w&&g.addHandler(p[b],this)&&(this.fieldHandlers_[b]=!0),i.key=b,i.value=a}else if(!c&&this.modified&&b in this.modified)i.rollback={key:b,value:this.modified[b]},delete this.modified[b],Object.keys(this.modified).length||
delete this.modified;if(!this.silentSet_&&(i.key&&(d={},d[b]=a,this.dispatch("update",this,d)),i.rollback))b={},b[i.rollback.key]=i.rollback.value,this.dispatch("rollbackUpdate",this,b);return i||!1},update:function(b,a){if(b){var c,e={},g,d={},i;this.silentSet_=!0;for(var f in b)if(i=this.set(f,b[f],a)){if(i.key)c=!0,e[i.key]=i.value;if(i.rollback)g=!0,d[i.rollback.key]=i.rollback.value}this.silentSet_=!1;c&&this.dispatch("update",this,e);g&&this.dispatch("rollbackUpdate",this,d)}return c?e:!1},
reset:function(){this.update(this.entityType.defaults)},clear:function(){var b={},a;for(a in this.info)b[a]=void 0;return this.update(b)},commit:function(b){if(this.modified){var a=this.modified;delete this.modified}this.update(b);a&&this.dispatch("rollbackUpdate",this,a)},rollback:function(){if(this.state!=d.PROCESSING){if(this.modified){var b=this.modified;delete this.modified;this.update(b);this.dispatch("rollbackUpdate",this,b)}this.setState(d.READY)}},destroy:function(){var b=this.entityType,
a;for(a in this.fieldHandlers_)this.info[a].removeHandler(p[a],this);delete this.fieldHandlers_;a=this.info[b.idField];b.index_[a]===this&&(delete b.index_[a],b.slot_[a]&&b.slot_[a].setDelegate());this.inherit();this.all.dispatch("datasetChanged",this.all,{deleted:[this]});this.value=this.info={};delete this.modified}}),L=h(null,{className:"Basis.Entity.Reflection",init:function(b,a){this.name=b;this.keepReflectionAlive=a.keepReflectionAlive===!0;this.dataGetter=a.dataGetter||s;this.destroyDataGetter=
a.destroyDataGetter||null;this.entityType=a.entityType||s;this.isExists=a.isExists||function(b){return!!Object.keys(b).length}},update:function(b){this.isExists(b.info,b)?this.attach(b,this.name):this.detach(b,this.name)},attach:function(b){var a=b.reflection_[this.name],c=this.dataGetter(b.info,b);a?a instanceof f?a.update(c):j(a,c):b.reflection_[this.name]=this.entityType(c)},detach:function(b){var a=b.reflection_[this.name];if(a){if(this.keepReflectionAlive){if(this.destroyDataGetter){var c=this.destroyDataGetter(b.info,
b);a instanceof f?a.update(c):j(a,c)}}else typeof a.destroy=="function"&&a.destroy();delete b.reflection_[this.name]}},destroy:function(){}});Basis.namespace("Basis.Entity").extend({isEntity:function(b){return b&&b instanceof K},NumericId:y,IntId:a,StringId:l,EntityType:I,Entity:K,EntitySetType:E,EntitySet:i,ReadOnlyEntitySet:g,Collection:c,Grouping:x})})();
(function(){function m(f,d){return f<<d|f>>>32-d}function h(f){var d=[];do d.push((f&15).toString(16)),f>>=4;while(f);d.length&1&&d.push("0");return d.reverse().join("")}function j(f){if(typeof f=="number")return h(f);var d=[],d=Array.isArray(f)?f.map(j):String(f).toArray().map(function(d){return h(d.charCodeAt(0))});return d.join("")}Basis.namespace("Basis.Crypt",function(f){z=f||"";return u});var k=Array.create(255,function(f){return String.fromCharCode(f)}),s=function(){function f(d){for(var f=
"",h=d.length,a=0;a<h;a++){var l=d.charCodeAt(a);f+=l<128?k[l]:l<2048?k[l>>6|192]+k[l&63|128]:k[l>>12|224]+k[l>>6&63|128]+k[l&63|128]}return f}function d(d){for(var f="",h=d.length,a,l,r,j=0;j<h;)a=d.charCodeAt(j++),a<128?f+=k[a]:(l=d.charCodeAt(j++),a&32?(r=d.charCodeAt(j++),f+=String.fromCharCode((a&15)<<12|(l&63)<<6|r&63)):f+=String.fromCharCode((a&31)<<6|l&63));return f}return Basis.namespace("Basis.Crypt.UTF16").extend({toBytes:function(d){for(var f=[],h=d.length,a=0;a<h;a++){var l=d.charCodeAt(a);
f.push(l&255,l>>8)}return f},fromBytes:function(d){for(var f="",h=d.length,a,l,r=0;r<h;)a=d[r++]||0,l=d[r++]||0,f+=String.fromCharCode(l<<8|a);return f},toUTF8:f,fromUTF8:d,toUTF8Bytes:function(d){return o.toBytes(f(d))},fromUTF8Bytes:function(f){return d(o.fromBytes(f))}})}(),o=function(){return Basis.namespace("Basis.Crypt.UTF8").extend({toBytes:function(f){for(var d=f.length,h=Array(d),j=0;j<d;j++)h[j]=f.charCodeAt(j);return h},fromBytes:function(f){for(var d=f.length,h="",j=0;j<d;j++)h+=k[f[j]];
return h},toUTF16:function(f){return s.fromUTF8(f)},fromUTF16:function(f){return s.toUTF8(f)},toUTF16Bytes:function(f){return s.toBytes(s.fromUTF8(f))},fromUTF16Bytes:function(f){return s.toUTF8(s.fromBytes(f))}})}(),v=function(){var f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".toArray(),d={};f.forEach(function(f,h){d[f]=h});return Basis.namespace("Basis.Crypt.Base64").extend({encode:function(d,h){d.constructor!=Array&&(d=h?s.toUTF8Bytes(d):s.toBytes(d));for(var j=d.length,
a=0,l="",r,k,e,i,g,c;a<j;)r=d[a++],k=d[a++],e=d[a++],i=r>>2,r=(r&3)<<4|k>>4,g=(k&15)<<2|e>>6,c=e&63,k==void 0?g=c=64:e==void 0&&(c=64),l+=f[i]+f[r]+f[g]+f[c];return l},decode:function(f,h){for(var j=[],a,l,r,k,e,i=0,f=f.replace(/[^a-z0-9\+\/]/ig,""),g=f.length;i<g;)a=d[f.charAt(i++)],l=d[f.charAt(i++)],k=d[f.charAt(i++)],e=d[f.charAt(i++)],a=a<<2|l>>4,l=(l&15)<<4|k>>2,r=(k&3)<<6|e,j.push(a,l,r);(k==null||k==64)&&j.pop();(e==null||e==64)&&j.pop();return h?s.fromUTF8Bytes(j):s.fromBytes(j)}})}(),w=
function(){function f(d){for(var f=[],a=3;a>=0;a--)f.push(d>>a*8&255);return f}var d=[1518500249,1859775393,2400959708,3395469782],h=[function(d,f,a){return a^d&(f^a)},function(d,f,a){return d^f^a},function(d,f,a){return d&f|a&(d|f)},function(d,f,a){return f^d^a}];return function(j,k){j.constructor!=Array&&(j=k?s.toUTF8Bytes(j):s.toBytes(j));for(var a=j.length,l=[],r=0;r<a;r++)l[r>>2]|=j[r]<<(3-(r&3)<<3);a&3?l[a>>2]|=Math.pow(2,(4-(a&3)<<3)-1):l[a>>2]=2147483648;l.push.apply(l,Array.create(((l.length&
15)>14?30:14)-(l.length&15),0));l.push(a>>>29);l.push(a<<3&4294967295);l.reverse();for(var a=[1732584193,4023233417,2562383102,271733878,3285377520],o=a.clone(),e,i=l.length>>4,g=Array(80);i--;){for(r=0;r<16;r++)g[r]=l.pop();for(r=16;r<80;r++)g[r]=m(g[r-3]^g[r-8]^g[r-14]^g[r-16],1);for(r=0;r<80;r++)e=Math.floor(r/20),a[4]=m(a[0],5)+h[e](a[1],a[2],a[3])+a[4]+g[r]+d[e]&4294967295,a[1]=m(a[1],30),a.unshift(a.pop());for(r=0;r<5;r++)a[r]=o[r]=a[r]+o[r]&4294967295}return a.map(f).flatten()}}(),t=function(){function f(a){for(var d=
arguments,e=d.length,i=a&65535,g=a>>16,c=1;c<e;c++){var f=d[c];i+=f&65535;g+=(f>>16)+(i>>16);i&=65535}return g<<16|i&65535}function d(a){for(var d=[],e=0;e<4;e++)d.push(a>>e*8&255);return d}var h=Math.pow(2,32),j,k=[],a=[],l=[function(a,d,e){return e^a&(d^e)},function(a,d,e){return d^e&(d^a)},function(a,d,e){return a^d^e},function(a,d,e){return d^(a|~e)}];return function(r,o){if(!j){j=[[7,12,17,22].repeat(4),[5,9,14,20].repeat(4),[4,11,16,23].repeat(4),[6,10,15,21].repeat(4)].flatten();for(var e=
0;e<64;e++)switch(k[e]=Math.floor(Math.abs(Math.sin(e+1))*h),e>>4){case 0:a[e]=e;break;case 1:a[e]=e*5+1&15;break;case 2:a[e]=e*3+5&15;break;case 3:a[e]=e*7&15}}r.constructor!=Array&&(r=o?s.toUTF8Bytes(r):s.toBytes(r));for(var e=[],i=r.length,g=0;g<i;g++)e[g>>2]|=r[g]<<((g&3)<<3);e[i>>2]|=128<<((i&3)<<3);e.push.apply(e,Array(((e.length&15)>14?30:14)-(e.length&15)));e.push(i<<3&4294967295);e.push(i>>>29);for(var i=[1732584193,4023233417,2562383102,271733878],c=i.clone(),x=e.length>>4;x--;){for(g=0;g<
64;g++)i[0]=f(m(f(i[0],l[g>>4](i[1],i[2],i[3]),e[a[g]],k[g]),j[g]),i[1]),i.unshift(i.pop());for(g=0;g<4;g++)i[g]=c[g]=f(i[g],c[g])}return i.map(d).flatten()}}(),z="",u={};Object.iterate({sha1:function(f){return w(this,f)},sha1hex:function(f){return j(w(this,f))},md5:function(f){return t(this,f)},md5hex:function(f){return j(t(this,f))},base64:function(f){return v.encode(this,f)},base64decode:function(f){return v.encode(this,f)},hex:function(){return j(this)}},function(f,d){u[f]=function(f){f=d.call(z,
f);return z=Object.extend(typeof f!="object"?Object(f):f,u)}});Basis.namespace("Basis.Crypt").extend({HEX:j,SHA1:w,MD5:t})})();
(function(){function m(a,d){var f={"JS-Framework":"Basis"};u.test(d.method)?(f["Content-type"]=d.contentType+(d.encoding?";charset="+d.encoding:""),o.test("gecko")&&(f.Connection="close")):o.test("ie")&&(f["If-Modified-Since"]=(new Date(0)).toGMTString());Object.iterate(Object.complete(f,d.headers),function(a,e){e!=null&&this.setRequestHeader(a,e)},a)}function h(a){var d=this.transport;if(d){if(typeof a!="number")a=d.readyState;if(a!=this.prevReadyState_)if(this.prevReadyState_=a,this.dispatch("readyStateChanged",
a),a==4){w.remove(this,"timeoutAbort");var a=z.UNDEFINED,f;this.progress=!1;d.onreadystatechange=Function.$undef;if(this.aborted){var h=this.abortedByTimeout_;h&&this.dispatch("timeout");this.dispatch("abort",h)}else a=this.responseIsSuccess(),this.update({text:d.responseText,xml:d.responseXML}),a?(this.dispatch("success",d),a=z.READY):(this.dispatch("failure",d),a=z.ERROR,f=this.getRequestError(d)),this.dispatch("httpStatus",d.status);this.dispatch("complete",d);this.setState(a,f)}else this.setState(z.PROCESSING)}}
function j(a){w.remove(this,"timeoutAbort");this.abortedByTimeout_=this.aborted=this.progress=!1;this.prevReadyState_=-1;if(o.test("gecko1.8.1-")&&a.asynchronous)this.transport=A();var d=this.transport;this.asynchronous?d.onreadystatechange=h.bind(this):h.call(this,0);d.open(a.method,a.location,a.asynchronous);this.progress=!0;this.abortedByTimeout_=this.aborted=!1;m(d,a);this.dispatch("start");if(this.aborted)h.call(this,4);else if(!this.aborted&&this.progress){this.requestStartTime=Date.now();w.add(this,
"timeoutAbort",this.requestStartTime+this.timeout);var f=a.postBody;if(a.method=="POST"&&o.test("ie9-"))if(typeof f=="object"&&typeof f.documentElement!="undefined"&&typeof f.xml=="string")f=f.xml;else if(typeof f=="string")f=f.replace(/\r/g,"");else if(f==null||f=="")f="[empty request]";d.send(f);return!0}}var k=Basis.Class,s=Basis.Event,o=Basis.Browser,v=Basis.Cleaner,w=Basis.TimeEventManager,t=Basis.Data,z=t.STATE,u=/POST/i,f=o.Cookies.get("DEBUG_AJAX");(function(){for(var a=192;a<=255;a++)a.toHex(),
String.fromCharCode(a+848),(a+848).toHex(),a.toHex()})();var d="native",A=function(){if(window.XMLHttpRequest)return function(){return new XMLHttpRequest};var a=window.ActiveXObject;if(a)for(var f=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],h=0;d=f[h];h++)try{if(new a(d))return function(){return new a(d)}}catch(j){}throw Error(d="Browser doesn't support for XMLHttpRequest!");}(),B=[],y=function(){var a=[{handler:{start:function(){B.add(this)},complete:function(){B.remove(this)}}}];
s.onUnload(function(){a.clear()});return{addHandler:function(d,f){for(var h=0,e;e=a[h];h++)if(e.handler===d&&e.thisObject===f)return!1;a.push({handler:d,thisObject:f});return!0},removeHandler:function(d,f){for(var h=0,e;e=a[h];h++)if(e.handler===d&&e.thisObject===f)return a.splice(h,1),!0;return!1},dispatch:function(d){if(a.length)for(var f=Array.prototype.slice.call(arguments,1),h,e,i=a.length-1;h=a[i];i--)e=h.handler[d],typeof e=="function"&&e.apply(h.thisObject||this,f)},abort:function(){for(var a=
Array.from(B),d=0;d<a.length;d++)a[d].abort();return a}}}(),k=k(t.DataObject,{className:"Basis.Ajax.Transport",state:z.UNDEFINED,behaviour:{stateChanged:function(a,d){this.inherit(a,d);for(var f=0;f<this.influence.length;f++)this.influence[f].setState(this.state,this.state.data)}},influence:[],debug:f,progress:!1,aborted:!1,abortedByTimeout_:!1,abortCalled:!1,timeout:3E4,requestStartTime:0,requestData_:null,asynchronous:!0,method:"GET",contentType:"application/x-www-form-urlencoded",encoding:null,
init:function(a,d,f){var a=typeof a!="object"||a==null?{url:a}:a,h=a.url;if(a.callback)a.handlers=a.callback;this.transport=A();this.requestHeaders={};this.influence=[];this.url=h;this.params={};if(f||a.method)this.method=f||a.method;if(d!=null&&!d)this.asynchronous=!1;if(typeof a.asynchronous=="boolean")this.asynchronous=a.asynchronous;a.influence&&this.setInfluence(a.influence);v.add(this);return this.inherit(a)},setInfluence:function(){for(var a=Array.from(arguments),d=0;d<a.length;d++)a[d].setState(this.state,
this.state.data);this.influence.set(a)},clearInfluence:function(){this.influence.clear()},setParam:function(a,d){this.params[a]=d},setParams:function(a){this.clearParams();for(var d in a)this.setParam(d,a[d])},removeParam:function(a){delete this.params[a]},clearParams:function(){for(var a in this.params)delete this.params[a]},dispatch:function(a){y.dispatch.apply(this,arguments);this.inherit.apply(this,arguments)},timeoutAbort:function(){this.abortedByTimeout_=!0;this.abort()},abort:function(){this.aborted=
!0;if(this.progress)w.remove(this,"timeoutAbort"),this.progress=!1,this.transport.abort(),this.asynchronous&&this.transport.onreadystatechange&&this.transport.onreadystatechange!==Function.$undef&&h.call(this,4)},request:function(a){var a=a||this.url,d=this.method.toUpperCase(),f,h;if(!this.transport)throw Error("Transport is not allowed");if(!a)throw Error("URL is not defined");this.abort();delete this.requestData_;this.update({responseText:"",responseXml:null});this.abortedByTimeout_=this.aborted=
this.progress=!1;f=this.handlers_;for(var e,i=f.length-1;e=f[i];i--)e.handler.prepare&&e.handler.prepare.call(e.thisObject||this);if(!this.aborted)return f=Object.iterate(this.params,function(a,c){return c==null||c&&typeof c.toString=="function"&&c.toString()==null?null:a+"="+String(c.toString()).replace(/[\%\=\&\<\>\s\+]/g,function(a){a=a.charCodeAt(0).toHex();return"%"+(a.length<2?"0":"")+a})}).filter(Function.$isNotNull).join("&"),u.test(d)?h=this.postBody||f||"":f&&(a+=(a.indexOf("?")==-1?"?":
"&")+f),this.requestData_={method:d,location:a,contentType:this.contentType,encoding:this.encoding,asynchronous:this.asynchronous,headers:Object.extend({},this.requestHeaders),postBody:h},j.call(this,this.requestData_)},repeat:function(){if(this.requestData_)return this.abort(),j.call(this,this.requestData_)},get:function(){this.request.apply(this,arguments)},responseIsSuccess:function(){try{if(!this.aborted){var a=this.transport.status;return a==void 0||a==0||a>=200&&this.transport.status<300}}catch(d){}return!1},
getRequestError:function(a){return{code:"SERVER_ERROR",msg:a.responseText}},destroy:function(){this.destroy=Function.$undef;delete this.requestData_;this.transport.onreadystatechange=Function.$undef;this.transport.abort();this.clearInfluence();this.inherit();delete this.transport;v.remove(this)}});Basis.namespace("Basis.Ajax").extend({Transport:k,TransportDispatcher:y})})();
(function(){function m(a,d){var g=y[this.guid],a=this.keyMapping(a);if(a==null)if(this.nullKeyExists)a=l;else return;var c=g[a];return c?c:d?w:(c=new v(a,this.adapterFactory),c.addHandler(C,this),g[a]=c)}var h=Basis.Class,j=Basis.Cleaner,k=Basis.EventObject,s=Basis.Data.DataObject,o=Basis.Data.STATE,v=h.create(s,{className:"Basis.Publish2.DataChunk",autorepair:!0,disabled:!1,state:o.UNDEFINED,behaviour:{subscribersChanged:function(){this.subscriberCount>0&&(this.state==o.UNDEFINED||this.state==o.ERROR&&
this.autorepair||this.state==o.DEPRECATED)&&this.process()}},init:function(a,d){this.inherit();this.key=a;this.adapterGetter=d},process:function(a,d){if(d||this.subscriberCount!=0&&this.state!=o.PROCESSING)(this.adapter=this.adapter||this.adapterGetter())&&this.adapter.start(this)},reset:function(){this.setState(o.UNDEFINED)},set:function(a){this.update(a);this.setState(o.READY)},repair:function(){this.state==o.ERROR&&(this.reset(),this.process())},deprecate:function(){this.subscriberCount==0?this.reset():
this.state!=o.PROCESSING&&this.process()},destroy:function(){delete this.adapterGetter;this.inherit()}}),w=new v,t;for(t in w)if(typeof w[t]=="function")w[t]=Function.$self;delete w.destroy;j.add(w);var z={destroy:function(){this.unlink()}},u=h.create(k,{linkedDataChunk:null,processing:!1,init:function(a){this.inherit();return a||{}},start:function(a){if(this.linkedDataChunk!=a||!this.processing)this.link(a),this.processing=!0,this.dispatch("start")},stop:function(){if(this.processing)this.dispatch("stop"),
this.processing=!1},link:function(a){if(this.linkedDataChunk!=a)this.unlink(),this.linkedDataChunk=a,this.linkedDataChunk.addHandler(z,this),this.dispatch("link")},unlink:function(){this.linkedDataChunk&&(this.stop(),this.dispatch("unlink"),this.linkedDataChunk.removeHandler(z,this),this.linkedDataChunk&&this.linkedDataChunk.adapter==this&&delete this.linkedDataChunk.adapter,delete this.linkedDataChunk)},destroy:function(){}}),f={prepare:function(){this.callback.before&&this.callback.before.apply(this.context,
[this.linkedDataChunk.key].concat(Array.from(arguments)))},start:function(){this.linkedDataChunk.setState(o.PROCESSING)},abort:function(){this.linkedDataChunk.setState(o.ERROR,"Data loading was canceled")},failure:function(){var a;this.callback.error&&(a=this.callback.error.apply(this.context,arguments));this.linkedDataChunk.setState(o.ERROR,a||"Data load error")},timeout:function(){var a;this.callback.error&&(a=this.callback.error.apply(this.context,arguments));this.linkedDataChunk.setState(o.ERROR,
a||"Data load error")},success:function(){var a=null,d;if(this.callback.after)try{a=this.callback.after.apply(this.context,arguments)}catch(g){if(d=g,typeof d=="undefined")d=void 0;else{var c;try{c=(d.name?"Error":d.name)+(Function.$defined(d.fileName)?" in\n"+d.fileName:"")+(Function.$defined(d.lineNumber)?"\nat line "+d.lineNumber:"")+(Function.$defined(d.number)?"\nline: "+(d.number>>16&8191):"")}catch(f){}d=(c?c+"\n\n":"")+(d.message||d.description||d)}}d?(typeof console!="undefined"&&console.warn(d),
this.linkedDataChunk.setState(o.ERROR,d)):this.linkedDataChunk.set(a)},complete:function(){this.stop()}},d=h.create(u,{behaviour:{link:function(){this.transport.abort()},unlink:function(){this.transport.abort()},start:function(){this.transport.get()},stop:function(){}},init:function(a){a=this.inherit(a);this.context=this.transport=a.transport;this.transport.addHandler(f,this);this.callback=a.callback||{}},destroy:function(){this.transport.removeHandler(f,this);this.transport.destroy();delete this.transport;
delete this.context;this.inherit()}}),A=h.create(d,{behaviour:{start:function(){this.method.call()}},init:function(a){this.inherit(Object.complete({transport:a.transport.transport},a));this.method=this.context=a.transport},destroy:function(){this.method.destroy();this.inherit()}}),B=h.create(s,{className:"Basis.Publish2.Subscriber",isActiveSubscriber:!0,subscriptionType:1,init:function(a,d){this.inherit();this.getter=a||Function.$null;d&&this.addHandler(d.handler||d,d.thisObject||this);this.setDelegate(w)},
select:function(a,d){d&&(d=!!this.getter(a,!0));this.setDelegate(this.getter(a)||w);d&&this.deprecate()},deprecate:function(){this.delegate.deprecate()},repair:function(){this.delegate.repair()},update:function(){this.delegate&&this.delegate!==w&&console.log("Update! But no actions...")},destroy:function(){this.inherit()}}),y={},a=0,l="__NULL_KEY__",r={sessionOpen:function(a){var a=a.getData(this.guid)||{},d=y[this.guid],g;for(g in d){var c=a[g]||{};d[g].update(c.info);d[g].setState(c.state||o.UNDEFINED,
c.state&&c.state.data)}},sessionClose:function(a){var d={},g=y[this.guid],c;for(c in g){var f=g[c];d[c]={info:f.info,errorText:f.errorText,state:f.state};f.update({});f.setState(o.UNDEFINED)}a.storeData(this.guid,d)}},C={destroy:function(a){delete y[this.guid][a.key]}},h=h.create(k,{className:"Basis.Publish2.Publisher",guid:"",migrateKeys:!1,nullKeyExists:!1,loader:null,session:null,keyMapping:Function.$self,init:function(e){this.inherit();this.guid="publisher"+a++;y[this.guid]={};if(e.adapterFactory)this.adapterFactory=
e.adapterFactory;else{var i=u,g;if(e.load)g=e.load.transport,Basis.Ajax&&(Basis.SOAP&&g instanceof Basis.SOAP.ServiceCall?i=A:g instanceof Basis.Ajax.Transport&&(i=d)),e.error=e.error||e.loadError;this.adapterFactory=Function.lazyInit(function(){return new i({transport:g,callback:e.load})})}this.keyMapping=e.keyMapping||this.keyMapping;this.nullKeyExists=e.nullKeyExists||this.nullKeyExists;if(e.session&&(this.session=e.session,this.session.addHandler(r,this),e.migrateKeys))this.migrateKeys=!0;j.add(this)},
clear:function(){for(var a=y[this.guid],d=Object.keys(a),g=0;g<d.length;g++)a[d[g]].destroy()},disableDataChunk:function(a){(a=m.call(this,a,!0))&&a.disabled.set(!0)},enableDataChunk:function(a){(a=m.call(this,a,!0))&&a.disabled.set(!1)},deprecate:function(a){(a=m.call(this,a,!0))&&a.deprecate()},createSubscriber:function(a){return new B(m.bind(this),a)},destroy:function(){this.session&&(this.session.removeHandler(r,this),delete this.session);this.clear();this.inherit();j.remove(this)}});Basis.namespace("Basis.Publish2").extend({Publisher:h,
Subscriber:B,DataChunk:v,AbstractAdapter:u,AjaxAdapter:d,SOAPAdapter:A})})();
(function(){var m=Basis.Class,h=Object.extend,j=Basis.EventObject;Basis.Browser.Cookies.get("DEBUG_MODE");var k,s,o=!1,v={},w=Date.now,t=h(new j,{isOpened:function(){return!!k},getTimestamp:function(){if(k)return s},open:function(j,f){var d;v[j]||(v[j]=new z(j));d=v[j];k===d?o&&this.unfreeze():(this.close(),k=d,s=w(),f&&h(d.data,f),this.dispatch("sessionOpen",this))},close:function(){k&&(o&&this.unfreeze(),this.dispatch("sessionClose",this),s=k=null)},freeze:function(){k&&!o&&(this.dispatch("sessionFreeze",
this),o=!0,s=null)},unfreeze:function(){k&&o&&(o=!1,s=w(),this.dispatch("sessionUnfreeze",this))},storeData:function(h,f){if(k)return k.storeData(h,f);else throw Error("No opened session");},getData:function(h){if(k)return k.getData(h);else throw Error("No opened session");},destroy:function(){for(var h=Object.keys(v),f;f=h.pop();)v[f].destroy();this.inherit()}}),z=m(j,{className:"Basis.Session.Session",behaviour:{destroy:function(){k==this&&t.close();delete v[this.key]}},init:function(h){this.inherit();
this.key=h;this.data={}},storeData:function(h,f){if(o)throw Error("Session is frozen");return this.data[h]=f},getData:function(h){if(o)throw Error("Session is frozen");return this.data[h]},destroy:function(){this.inherit();for(var h=Object.keys(this.data),f;f=h.pop();){var d=this.data[f];d!=null&&typeof d.destroy=="function"&&d.destroy();delete this.data[f]}}});Basis.namespace("Basis.Session").extend({SessionManager:t})})();
(function(){function m(b,a){if(e)try{return parseFloat(document.defaultView.getComputedStyle(b,null)[a])}catch(c){}return 0}function h(b,a){if(e)return m(b,"height");else{var c=b.currentStyle;o.Style.setStyle(a,{borderTop:c.borderTopWidth+" solid red",borderBottom:c.borderBottomWidth+" solid red",paddingTop:c.paddingTop,paddingBottom:c.paddingBottom,fontSize:0.01,height:0,overflow:"hidden"});return b.offsetHeight-a.offsetHeight}}function j(b,a){if(e)return m(b,a)||0;else{var c=0;(a=="width"?["paddingLeft",
"paddingRight"]:["paddingTop","paddingBottom"]).forEach(function(a){c+=parseFloat(b.currentStyle[a])||0});return b["client"+a.capitalize()]-c}}function k(b,a){if(C)return t(b).add("Basis-Layout-OnResizeElement"),b.attachEvent("onresize",a),a;else{var c=o.createElement({description:"IFRAME.Basis-Layout-OnResizeFrame",css:{position:"absolute",width:"100%",height:"100%",left:0,zIndex:-1,top:"-2000px"}});o.insert(b,c);c.onload=function(){(c.contentWindow.onresize=a)()};return c}}for(var s=Basis.Class,
o=Basis.DOM,v=Basis.Browser,w=Object.extend,t=Basis.CSS.cssClass,z=Basis.Cleaner,u=o.Wrapper,f=v.test("IE"),d=v.test("IE7+"),A=!1,B=o.createElement(""),y=["","-webkit-"],a=0;a<y.length;a++)try{if(!(y[a]=="-webkit-"&&Basis.Browser.is("opera"))){var l=y[a]+"box";B.style.display=l;if(B.style.display==l){A=y[a];break}}}catch(r){}var C=typeof B.onresize!="undefined"&&B.attachEvent,e=document.defaultView&&document.defaultView.getComputedStyle,B=function(){return o.createElement({css:{position:"absolute",
top:0,left:0,width:0,height:0,padding:0,margin:0,border:0}})};B.className="Basis.Layout.Helper";var i={top:Number.NaN,left:Number.NaN,bottom:Number.NaN,right:Number.NaN,width:Number.NaN,height:Number.NaN,defined:!1},g=s(null,{className:"Basis.Layout.Box",init:function(b,a,c){this.reset();this.setElement(b,a,c)},setElement:function(b,a,c){this.element=o.get(b);this.offsetElement=c;a||this.recalc(this.offsetElement)},copy:function(b){"top,left,bottom,right,height,width,defined".split(",").forEach(function(a){this[a]=
b[a]},this)},reset:function(){w(this,i)},set:function(b,a){if(this.defined){switch(b.toLowerCase()){case "left":this.left=a;this.right=this.left+this.width;break;case "right":this.right=a;this.left=this.right-this.width;break;case "width":this.width=a;this.right=this.left+this.width;break;case "top":this.top=a;this.bottom=this.top+this.height;break;case "bottom":this.bottom=a;this.top=this.bottom-this.height;break;case "height":this.height=a,this.bottom=this.top+this.height}(this.width<=0||this.height<=
0)&&this.reset()}return this},recalc:function(b){this.reset();var a=this.element;if(a){var c=a,e=document.documentElement;if(a.getBoundingClientRect)c=a.getBoundingClientRect(),this.top=c.top,this.left=c.left,f&&(d?(this.top+=e.scrollTop-e.clientTop,this.left+=e.scrollLeft-e.clientLeft):a!=document.body&&(this.top-=document.body.clientTop-document.body.scrollTop,this.left-=document.body.clientLeft-document.body.scrollLeft)),b&&(b=new g(b),this.top-=b.top,this.left-=b.left,b.destroy());else if(document.getBoxObjectFor){var i=
document.getBoxObjectFor(e),c=document.getBoxObjectFor(a);this.top=c.screenY-i.screenY;this.left=c.screenX-i.screenX;if(v.test("FF1.5-")){if(c=a.offsetParent)this.top-=c.scrollTop,this.left-=c.scrollLeft;c!=document.body&&(this.top+=e.scrollTop,this.left+=e.scrollLeft)}if(v.test("FF2+")){if(this.top&&(c=e.scrollTop,c>2)){for(var i=0,l=Math.floor(Math.log(c)/Math.LN2);l>=0;l-=3)i+=1<<l;c>i&&(this.top-=1)}this.left&&(this.left-=e.scrollLeft>1)}b&&(b=new g(b),this.top-=b.top,this.left-=b.left,b.destroy())}else if(a!=
b){this.top=a.offsetTop;this.left=a.offsetLeft;this.top-=document.body.clientTop-document.body.scrollTop;for(this.left-=document.body.clientLeft-document.body.scrollLeft;(c=c.offsetParent)&&c!=b;)this.top+=c.offsetTop+c.clientTop-c.scrollTop,this.left+=c.offsetLeft+c.clientLeft-c.scrollLeft}else this.top=this.left=0;this.width=a.offsetWidth;this.height=a.offsetHeight;this.bottom=this.top+this.height;this.right=this.left+this.width;this.defined=!0}return this.defined},intersection:function(b){if(!this.defined)return!1;
b instanceof g==!1&&(b=new g(b));return b.defined&&b.right>this.left&&b.left<this.right&&b.bottom>this.top&&b.top<this.bottom},inside:function(b){if(!this.defined)return!1;b instanceof g==!1&&(b=new g(b));return b.defined&&b.left>=this.left&&b.right<=this.right&&b.bottom>=this.bottom&&b.top<=this.top},point:function(b){if(!this.defined)return!1;var a=b.left||b.x||0,b=b.top||b.y||0;return a>=this.left&&a<this.right&&b>=this.top&&b<this.bottom},power:function(b){if(!this.defined)return!1;if(b=o.get(b)||
this.element)return o.setStyle(b,{top:this.top+"px",left:this.left+"px",width:this.width+"px",height:this.height+"px"}),!0},destroy:function(){delete this.element}}),y=s(g,{className:"Basis.Layout.Intersection",init:function(b,a,c){this.setBoxes(b,a,c)},setBoxes:function(b,a,c){this.boxA=b instanceof g?b:new g(b,!0);this.boxB=a instanceof g?a:new g(a,!0);c||this.recalc()},recalc:function(){this.reset();if(!this.boxA.recalc()||!this.boxB.recalc())return!1;if(this.boxA.intersection(this.boxB))this.top=
Math.max(this.boxA.top,this.boxB.top),this.left=Math.max(this.boxA.left,this.boxB.left),this.bottom=Math.min(this.boxA.bottom,this.boxB.bottom),this.right=Math.min(this.boxA.right,this.boxB.right),this.width=this.right-this.left,this.height=this.bottom-this.top,this.width<=0||this.height<=0?this.reset():this.defined=!0;return this.defined}}),a=s(g,{className:"Basis.Layout.Viewport",recalc:function(){this.reset();var b=this.element;if(b){var a=b;this.width=b.clientWidth;this.height=b.clientHeight;
if(b.getBoundingClientRect){var c=b.getBoundingClientRect();this.top=c.top;for(this.left=c.left;a=a.offsetParent;)this.top-=a.scrollTop,this.left-=a.scrollLeft}else if(document.getBoxObjectFor){c=document.getBoxObjectFor(b);this.top=c.y;for(this.left=c.x;a=a.offsetParent;)this.top-=a.scrollTop,this.left-=a.scrollLeft}else c=new g(b),this.top=c.top+b.clientTop,this.left=c.left+b.clientLeft;this.bottom=this.top+this.height;this.right=this.left+this.width;this.defined=!0}return this.defined}}),c=0;o.Style.cssRule(".Basis-VerticalPanel").setStyle({position:"relative"});
l=o.Style.cssRule(".Basis-VerticalPanelStack");l.setStyle({overflow:"hidden"});A!==!1&&(l.setProperty("display",A+"box"),l.setProperty(A+"box-orient","vertical"));var x=function(){this.parentNode&&this.parentNode.realign()},l=s(u.HtmlContainer,{className:"Basis.Layout.VerticalPanel",template:new Basis.Html.Template('<div{element|content|childNodesElement} class="Basis-VerticalPanel"/>'),flex:0,init:function(b){this.inherit(b);if(b){if(b.flex)this.flex=parseFloat(b.flex);this.flex?A!==!1&&o.Style.setStyleProperty(this.element,
A+"box-flex",this.flex):A===!1&&k(this.element,x.bind(this))}}}),E=function(){this.realign()},u=s(u.HtmlContainer,{className:"Basis.Layout.VerticalPanelStack",childClass:l,template:new Basis.Html.Template('<div{element|content|childNodesElement} class="Basis-VerticalPanelStack">'+(A?"":'<div{ruller} style="position: absolute; visibility: hidden; top: -1000px; width: 10px;"/>')+"</div>"),init:function(b){this.ruleClassName="Basis-FlexStackPanel-"+ ++c;this.cssRule=o.Style.cssRule("."+this.ruleClassName);
this.cssRule.setProperty("overflow","auto");b=this.inherit(b);A===!1&&(this.realign(),k(this.childNodesElement,E.bind(this)));return b},insertBefore:function(b,a){if(b=this.inherit(b,a))return b.flex&&this.cssRule&&t(b.element).add(this.ruleClassName),this.realign(),b},removeChild:function(b){if(this.inherit(b))return b.flex&&this.cssRule&&t(b.element).remove(this.ruleClassName),this.realign(),b},realign:function(){if(A===!1){var b=this.element,a=this.lastChild.element,c=this.ruller,d=(new g(a,!1,
b)).bottom-m(b,"paddingTop")-m(b,"borderTopWidth")||0,b=h(b,c);if(e)d+=m(a,"marginBottom");else{var i=c.offsetHeight;c.style.height=a.currentStyle.marginBottom;d+=c.offsetHeight-i}if(d=b-d){for(b=a=0;i=this.childNodes[b];b++)i.flex&&(a++,d+=h(i.element,c));a&&this.cssRule.setProperty("height",Math.max(0,d/a)+"px")}}}}),n={HORIZONTAL:1,VERTICAL:2,BOTH:3};o.Style.cssRule(".Basis-Strut").setStyle({left:"0",top:"0",right:"0",bottom:"0",position:"absolute",visibility:"hidden"});var I=function(){this.resize()},
s=s(null,{className:"Basis.Layout.Strut",type:n.HORIZONTAL,source:null,target:null,init:function(b){this.inherit(b);if(b.type)this.type=b.type;this.source=b.source.element||b.source;this.target=b.target.element||b.target;this.element=o.createElement(".Basis-Strut");if(b.id)this.element.id=b.id;b="genericStrutRule-"+(this.element.id||"");t(this.target).add(b);this.targetRule=o.Style.cssRule("."+b);o.insert(this.source,this.element);this.resizeHandler=k(this.element,I.bind(this));z.add(this)},resize:function(){var b=
{};if(this.type&n.HORIZONTAL)b.width=j(this.element,"width")+"px";if(this.type&n.VERTICAL)b.height=j(this.element,"height")+"px";this.targetRule.setStyle(b)},destroy:function(){var b=this.resizeHandler;C?b.detachEvent("onresize",void 0):o.remove(b);this.target=this.source=this.targetRule=this.resizeHandler=null;z.remove(this)}});Basis.namespace("Basis.Layout").extend({STRUT_TYPE:n,Strut:s,Box:g,Intersection:y,Viewport:a,VerticalPanel:l,VerticalPanelStack:u,Helper:B})})();
(function(){function m(a){return{hour:a.getHours(),day:a.getDate()-1,month:a.getMonth(),year:a.getFullYear()}}function h(a,d){var f={},h=A[a];if(h){var e=d.getFullYear(),i=d.getMonth(),g=d.getDate();e-=e%h[1];i=h[2]?i-i%h[2]:0;g=h[3]?g:1;f.periodStart=new Date(e,i,g);f.periodEnd=new Date(new Date(e+h[4],i+h[5],g+h[6])-1)}else f.periodStart=new Date(f.periodEnd=new Date(d));return f}var j=Basis.Class,k=Basis.Event,s=Basis.DOM,o=Basis.Html.Template,v=Function.getter,w=Basis.CSS.cssClass,t=s.Wrapper,
z=Basis.Data.Property.Property,u=function(a){var d=Basis.Locale["Controls.Calendar"];return d?d[a]:a},f={};(function(){for(var a=32,d=2147483647;--a;)f[a]=d,d>>=1})();var d={century:function(a){return a.periodStart.getFullYear()+" - "+a.periodEnd.getFullYear()},decade:function(a){return a.periodStart.getFullYear()+" - "+a.periodEnd.getFullYear()},year:function(a){return a.periodStart.getFullYear()},quarter:function(a){return u("QUARTER").toLowerCase().format(1+a.periodStart.getMonth().base(3)/3)},
month:function(a){return u("MONTH").SHORT[a.periodStart.getMonth()].toLowerCase()},day:function(a){return a.periodStart.getDate()}},A={century:["year",100,0,0,100,0,0],decade:["year",10,0,0,10,0,0],year:["year",1,0,0,1,0,0],quarter:["month",1,3,0,0,3,0],month:["month",1,1,0,0,1,0],day:["day",1,1,1,0,0,1]},B=j(t.HtmlNode,{className:"Basis.Controls.Calendar.Calendar.Node",canHaveChildren:!1,template:new o('<a{element|content} class="Basis-Calendar-Node" href="#move:down">{title|-}</a>'),behaviour:{select:function(){this.inherit();
s.focus(this.element)},update:function(a,f){this.inherit(a,f);if("periodStart"in f||"periodEnd"in f)this.title.nodeValue=d[this.nodePeriodName](this.info),this.parentNode&&w(this.element).bool("before",this.info.periodStart<this.parentNode.info.periodStart).bool("after",this.info.periodEnd>this.parentNode.info.periodEnd)}},init:function(a){this.nodePeriodName=a;config=this.inherit({});w(this.element).add(a);return config}}),y=j(t.HtmlContainer,{className:"Basis.Controls.Calendar.Calendar.Section",
childClass:B,childFactory:function(a){return new B(a)},template:new o('<div{element|selectedElement} class="Basis-Calendar-Section"><div class="Basis-Calendar-SectionTitle">{titleText}</div><div{content|childNodesElement} class="Basis-Calendar-SectionContent"/></div>'),behaviour:{select:function(){this.inherit();w(this.titleElement).add("selected")},unselect:function(){this.inherit();w(this.titleElement).remove("selected")},update:function(a,d){this.inherit(a,d);var f=this.info;if("periodStart"in
d||"periodEnd"in d){this.setTitle();f=h(this.nodePeriodName,(new Date(f.periodStart)).add(this.nodePeriodUnit,-this.nodePeriodUnitCount*(this.getInitOffset(f.periodStart)||0)));this.minDate=f.periodStart;for(var j=this.firstChild;j;j=j.nextSibling)j.update(f),f=h(this.nodePeriodName,(new Date(f.periodStart)).add(this.nodePeriodUnit,this.nodePeriodUnitCount));this.maxDate=f.periodEnd}this.tabTitleText.nodeValue=this.getTabTitle(this.info.selectedDate)||"-";(j=this.getNodeByDate(this.info.selectedDate))?
j.select():this.selection.clear()}},minDate:new Date,maxDate:new Date,isPrevPeriodEnabled:!0,isNextPeriodEnabled:!0,periodName:"period",nodeCount:12,nodePeriodName:"-",nodePeriodUnit:"-",nodePeriodUnitCount:1,init:function(a){a=Object.complete({selection:new t.Selection(a&&a.selection)},a);this.titleElement=s.createElement({description:".Basis-Calendar-SectionTab",click:this.select.bind(this,!1)},this.tabTitleText=s.createText(""));a=this.inherit(a);w(this.element).add("Basis-Calendar-Section-"+this.sectionName);
s.insert(this,[this.nodePeriodName].repeat(this.nodeCount));a.viewDate&&this.setViewDate(a.viewDate);a.selectedDate&&this.update({selectedDate:a.selectedDate});return a},getTitle:function(){},getTabTitle:function(){return"1"},setTitle:function(){if(this.info.periodStart)this.titleText.nodeValue=this.getTitle(this.info.periodStart)||"-"},getNodeByDate:function(a){return a&&this.info.periodStart<=a&&a<=this.info.periodEnd&&(a=this.childNodes.binarySearchInterval(a,"info.periodStart","info.periodEnd"),
a!=-1)?this.childNodes[a]:null},nextPeriod:function(a){(a?this.isNextPeriodEnabled:this.isPrevPeriodEnabled)&&this.update(h(this.periodName,new Date(a?Number(this.info.periodEnd)+1:Number(this.info.periodStart)-1)))},setViewDate:function(a){this.update(h(this.periodName,a))},getInitOffset:Function.$null});y.Month=j(y,{className:"Basis.Controls.Calendar.Section.Month",sectionName:"Month",periodName:"month",template:new o(Function.lazyInit(function(){return'<div{element|selectedElement} class="Basis-Calendar-Section"><div class="Basis-Calendar-SectionTitle">{titleText}</div><div{content|childNodesElement} class="Basis-Calendar-SectionContent"><div class="week_days">'+
u("DAY").SHORT2.map(String.format,"<span>{0}</span>").join("")+"</div></div></div>"})),nodeCount:42,nodePeriodName:"day",nodePeriodUnit:"day",getTabTitle:v("getDate()"),getTitle:function(){return u("MONTH").FULL[this.info.periodStart.getMonth()]+" "+this.info.periodStart.getFullYear()},getInitOffset:function(a){return 1+((new Date(a)).set("day",1).getDay()+5)%7}});y.Year=j(y,{className:"Basis.Controls.Calendar.Section.Year",sectionName:"Year",periodName:"year",nodePeriodName:"month",nodePeriodUnit:"month",
init:function(a){return a=this.inherit(a)},getTabTitle:v("getMonth()",function(a){return u("MONTH").FULL[a]}),getTitle:v("getFullYear()")});y.YearDecade=j(y,{className:"Basis.Controls.Calendar.Section.YearDecade",sectionName:"YearDecade",periodName:"decade",nodePeriodName:"year",nodePeriodUnit:"year",getInitOffset:function(){return 1},getTabTitle:v("getFullYear()"),getTitle:function(){return this.info.periodStart.getFullYear()+" - "+this.info.periodEnd.getFullYear()}});y.Century=j(y,{className:"Basis.Controls.Calendar.Section.Century",
sectionName:"Century",periodName:"century",nodePeriodName:"decade",nodePeriodUnit:"year",nodePeriodUnitCount:10,getTabTitle:function(a){if(a)return a=a.getFullYear(),a-=a%10,a+"-"+(Number(a.toString().substr(-2))+9).lead(2)},getInitOffset:function(){return 1}});y.YearQuarters=j(y,{className:"Basis.Controls.Calendar.Section.YearQuarter",sectionName:"YearQuarter",periodName:"year",nodeCount:4,nodePeriodName:"quarter",nodePeriodUnit:"month",nodePeriodUnitCount:3});y.Quarter=j(y,{className:"Basis.Controls.Calendar.Section.Quarter",
sectionName:"Quarter",periodName:"quarter",nodeCount:3,nodePeriodName:"month",nodePeriodUnit:"month",getTitle:function(){return[Math.floor(1+date.getMonth().base(3)/3),u("QUARTER").toLowerCase(),date.getFullYear()].join(" ")}});j=j(t.HtmlControl,{className:"Basis.Controls.Calendar.Calendar",canHaveChildren:!0,childClass:y,childFactory:function(a){return new y[a]({viewDate:this.date.value,selectedDate:this.selectedDate.value})},template:new o(Function.lazyInit(function(){return'<div{element} class="Basis-Calendar"><div{headerElement} class="Basis-Calendar-Header"><div{sectionTabs} class="Basis-Calendar-SectionTabs">{titleText}</div></div><div class="Basis-Calendar-Body"><a{prev} href="#move:prev" class="Basis-Calendar-ButtonPrevPeriod"><span>\u2039</span><span class="over"></span></a><a{next} href="#move:next" class="Basis-Calendar-ButtonNextPeriod"><span>\u203a</span><span class="over"></span></a><div{content|childNodesElement} class="Basis-Calendar-Content"/></div><div{footerElement} class="Basis-Calendar-Footer"><div class="today"><label>'+
u("TODAY")+':</label><a href="#select:today" class="value">{todayText}</a></div></div></div>'})),behaviour:{childNodesModified:function(){this.childNodes.forEach(v("setTitle()"));s.insert(s.clear(this.sectionTabs),this.childNodes.map(v("titleElement")))},click:function(a,d){if(d instanceof B)this.selectedDate.set((new Date(this.selectedDate.value)).add(this.activeSection.nodePeriodUnit,this.selectedDate.value.diff(this.activeSection.nodePeriodUnit,d.info.periodStart))),this.nextSection(!1);else{var f=
k.sender(a);s.is(f,"A")||(f=s.parent(f,"A",0,this.element));if(f&&f.hash&&!w(f).has("disabled"))switch(f.hash.substr(1)){case "select:today":this.selectedDate.set(new Date);break;case "select:current":this.selectDate(this.date.value);break;case "move:prev":this.nextPeriod(!1);break;case "move:next":this.nextPeriod(!0);break;case "move:up":this.nextSection(!0)}}k.kill(a)}},minDate:null,maxDate:null,map:{},periodEnableByDefault:!0,init:function(a){a=this.inherit(Object.complete({selection:{handlersContext:this,
handlers:{change:function(){var a=this.selection.pick();(this.activeSection=a)&&a.update({selectedDate:this.selectedDate.value})}}}},a));this.todayDate=new z(new Date);this.date=new z(new Date(a.date||new Date));this.selectedDate=new z(new Date(a.date||new Date));this.selectedDate.addHandler({change:function(a){for(var d=this.firstChild;d;d=d.nextSibling)d.update({selectedDate:a})}},this);this.todayDate.addLink(this.todayText,null,v("toFormat('%D.%M.%Y')"));if(a.minDate)this.minDate=a.minDate;if(a.maxDate)this.maxDate=
a.maxDate;if(a.map)this.map=a.map;if(a.defaultState)this.periodEnableByDefault=a.defaultState=="enabled";s.insert(this,a.sections||["Month","Year","YearDecade"]);this.addEventListener("click");this.firstChild&&this.firstChild.select()},setSection:function(a){(a=this.childNodes.search("sectionName",a))&&a.select()},nextSection:function(a){var d=a?this.activeSection.nextSibling:this.activeSection.previousSibling;d?(d.select(),d.setViewDate(this.selectedDate.value)):!a&&this.dispatch("change")},nextPeriod:function(a){this.activeSection.nextPeriod(a)},
selectDate:function(a){a-this.date.value!=0&&this.date.set(a)},getNextPeriod:function(a,d){if(!this.isNextPeriodEnabled(a,d))return!1;if(this.map){var j=d?1:-1,k=d?"start":"till",e=d?"till":"start",i=(new Date(a)).add("millisecond",j),g=this.map[this.periodEnableByDefault?"disabled":"enabled"];if(g){var c=h("year",i);for(c.periodEnd.getFullYear()==i.getFullYear()&&(c[k]=i);!this.isPeriodEnabled(c.periodStart,c.periodEnd);)c=h("year",i.add("year",j));for(c[e]=h("month",c[k])[e];!this.isPeriodEnabled(c.periodStart,
c.periodEnd);)c=h("month",i.add("month",j));var x=m(c[k]),e=m(c[e]);if(g=g[e.year]&&g[e.year][e.month]){this.periodEnableByDefault&&(k=f[c.periodEnd.getMonthDayCount()],g=g&k^k);for(k=x.day;k!=e.day+j;k+=j)if(g>>k&1){i=new Date(x.year,x.month,k+1);break}}else return h("day",c[k])}}return h("day",i)},isNextPeriodEnabled:function(a,d){if(!d&&this.minDate&&this.minDate>a)return!1;if(d&&this.maxDate&&this.maxDate<a)return!1;if(this.map)if(this.periodEnableByDefault){if(!d&&this.minDate)return this.isPeriodEnabled(this.minDate,
a);if(d&&this.maxDate)return this.isPeriodEnabled(a,this.maxDate)}else{var f=d?1:-1,j=a.getFullYear(),e=(new Date(a)).add("millisecond",f),i=e.getFullYear(),g=Object.keys(this.map.enable).filter(function(a){return f*a>=f*i}),c=g.length;if(c)for(var g=g.sort(function(a,c){return f*(a>c)||-f*(a<c)}),x=0;x<c;x++){var k=h("year",new Date(g[x],0));if(this.isPeriodEnabled(d&&g[x]==j?e:k.periodStart,!d&&g[x]==j?e:k.periodEnd))return!0}return!1}return!0},isPeriodEnabled:function(a,d){if(this.minDate&&this.minDate>
d)return!1;if(this.maxDate&&this.maxDate<a)return!1;var h=this.map&&this.map[this.periodEnableByDefault?"disabled":"enabled"];if(h){var j=m(a),e=m(d),i,g,c,x=j.month,k=new Date(j.year,j.month),n=11-j.month,o=n+1+(e.year-j.year-1)*12+(e.month+1)-1;if(this.periodEnableByDefault){if(o==0)return!(i=h[j.year])||!(g=i[j.month])||(g^2147483647)>>j.day&f[e.day-j.day+1];for(var b=0;b<=o;b++){if(!b||n==b%12)if(i=h[k.getFullYear()],!i)return!0;g=i[x=k.getMonth()];if(!g)return!0;c=f[k.getMonthDayCount()];if(b/
o?b/o==1?(g&c^c)&f[e.day+1]:g&c^c:(g&c^c)>>j.day)return!0;k.setMonth(x+1)}}else{if(o==0)return(i=h[j.year])&&(g=i[j.month])&&g>>j.day&f[e.day-j.day+1];for(b=0;b<=o;b++){if(!b||n==b%12||!i)if(i=h[k.getFullYear()],!i){b+=12;k.setMonth(x+12);continue}if((g=i[x=k.getMonth()])&&(b/o?b/o==1?g&f[e.day+1]:g:g>>j.day))return!0;k.setMonth(x+1)}}return!1}return!0},destroy:function(){this.inherit();this.date.destroy();this.todayDate.destroy()}});Basis.namespace("Basis.Controls.Calendar").extend({Calendar:j,CalendarSection:y})})();
(function(){var m=Basis.Class,h=Basis.Event,j=Basis.DOM,k=Basis.Html.Template,s=Object.extend,o=Object.complete,v=Function.getter,w=Basis.CSS.cssClass,t=j.Wrapper,z=m(t.HtmlNode,{className:"Basis.Controls.Button.Button",template:new k('<div{element} class="Basis-Button"><div class="Basis-Button-Wraper"><div class="Basis-Button-Wraper2"><a{content} class="Basis-Button-Content" href="#"><em class="pre"/><span class="caption">{captionText}</span><em class="post"/></a></div></div></div>'),behaviour:{select:function(){j.focus(this.content)}},
captionGetter:v("caption"),caption:"[no title]",groupId:0,name:null,init:function(f){var f=s({},f),d=s({},f.handlers);f.handler&&o(d,{click:f.handler});Object.keys(d)?f.handlers=d:delete f.handlers;if(f.captionGetter)this.captionGetter=Function.getter(f.captionGetter);if(f.groupId)this.groupId=f.groupId;if(f.name)this.name=f.name;this.inherit(f);this.setCaption("caption"in f?f.caption:this.caption);h.addHandler(this.element,"click",function(d){this.click();h.kill(d)},this);h.addHandler(this.element,
"keydown",function(d){[h.KEY.ENTER,h.KEY.CTRL_ENTER,h.KEY.SPACE].has(h.key(d))&&(this.click(),h.kill(d))},this)},click:function(){this.isDisabled()||this.dispatch("click")},setCaption:function(f){this.caption=f;this.captionText.nodeValue=this.captionGetter(this)},setTitle:function(f){return this.setCaption(f)},destroy:function(){h.clearHandlers(this.element);this.inherit()}}),u=m(t.HtmlGroupControl,{className:"Basis.Controls.Button.ButtonGroupControl",childClass:m(t.HtmlPartitionNode,{className:"Basis.Controls.Button.ButtonPartitionNode",
behaviour:{childNodesModified:function(f){for(var d=0,h;h=this.childNodes[d];d++)w(h.element).bool("first",h==f.firstChild).bool("last",h==f.lastChild)}},template:new k('<div{element|content|childNodesElement} class="Basis-ButtonGroup"></div>')})}),m=m(t.HtmlControl,{className:"Basis.Controls.Button.ButtonPanel",template:new k('<div{element} class="Basis-ButtonPanel"><div{childNodesElement|content|disabledElement} class="Basis-ButtonPanel-Content"/></div>'),childClass:z,groupControlClass:u,localGrouping:{groupGetter:v("groupId || -object.eventObjectId")},
getButtonByName:function(f){return this.childNodes.search(f,v("name"))}});Basis.namespace("Basis.Controls.Button").extend({Button:z,ButtonPanel:m,ButtonGroupControl:u})})();
(function(){var m=Basis.Class,h=Basis.Event,j=Basis.DOM,k=Basis.Html.Template,s=Basis.Cleaner,o=Object.complete,v=Object.coalesce,w=Function.getter,t=Basis.CSS.cssClass,z=Basis.EventObject.createBehaviour,u=j.Wrapper,f=u.Control,d=u.HtmlNode,A=u.Selection,B=Basis.Data.Property.AbstractProperty,y=Basis.Data.Property.Property,a=m(d,{className:"Basis.Controls.Form.Field",canHaveChildren:!1,serializable:!0,behaviour:{select:function(){j.focus(this.field,!0)},keypress:function(b,a){if(a=h(a)){var c=h.key(a);
(b.nextFieldOnEnter||a.ctrlKey)&&c==h.KEY.ENTER||c==h.KEY.CTRL_ENTER?(h.cancelDefault(a),b.nextFieldFocus()):b.setValid()}},enable:function(){this.field.removeAttribute("disabled");t(this.element).remove("disabled")},disable:function(){this.field.setAttribute("disabled","disabled");t(this.element).add("disabled")},blur:function(b){b.validate(!0)},focus:function(b){b.valid&&b.setValid()}},template:new k('<div{element|sampleContainer} class="fieldWraper"><div class="title"><label><span{title}/></label></div><div{fieldContainer|content} class="field"/></div>'),
tableTemplate:new k('<tr{element} class="fieldWraper"><td class="title"><label><span{title}/></label></td><td{sampleContainer} class="field"><div{fieldContainer|content} class="field-wraper"/></td></tr>'),init:function(b){this.fieldTemplate&&this.fieldTemplate.createInstance(this);if(this.tableLayout=b.tableLayout)this.template=this.tableTemplate;b=this.inherit(b);this.name=b.name||b.id;this.id=b.id;if(this.field&&b.name)this.field.name=b.name;this.fieldContainer&&j.insert(this.fieldContainer,this.field);
this.title&&j.insert(this.title,b.title);if(b.button)t(this.element).add("have-button"),this.button=j.createElement("BUTTON",b.caption||"..."),b.button.handler&&h.addHandler(this.button,"click",b.button.handler,this.button),j.insert(this.field.parentNode,this.button,j.INSERT_AFTER,this.field);this.nextFieldOnEnter=Function.$defined(b.nextFieldOnEnter)?b.nextFieldOnEnter:!0;h.addHandler(this.field,"keyup",this.keyup,this);h.addHandler(this.field,"keypress",this.keypress,this);h.addHandler(this.field,
"blur",this.blur,this);h.addHandler(this.field,"focus",this.focus,this);h.addHandler(this.field,"change",this.change,this);this.validators=[];if(b.validators)for(var a=0;a<b.validators.length;a++)this.attachValidator(b.validators[a]);this.setSample(b.sample);b.minLength&&this.setMinLength(b.minLength);b.maxLength&&this.setMaxLength(b.maxLength);Function.$defined(b.readOnly)&&this.setReadOnly(b.readOnly);Function.$defined(b.disabled)&&b.disabled&&this.disable();if(Function.$defined(b.serializable))this.serializable=
b.serializable;if(Function.$defined(b.size))this.field.size=b.size;if(typeof b.value!="undefined")this.defaultValue=b.value,this.setDefaultValue();return b},setReadOnly:function(b){b?this.field.setAttribute("readonly","readonly",0):this.field.removeAttribute("readonly",0)},setDefaultValue:function(){typeof this.defaultValue!="undefined"&&(this.setValue(this.defaultValue),this.setValid())},setSample:function(b){if(this.sampleContainer&&Function.$defined(b)&&b!="")this.sample?j.insert(j.clear(this.sample),
b):j.insert(this.sampleContainer,this.sample=j.createElement("SPAN.sample",b));else if(this.sample)j.remove(this.sample),this.sample=null},getValue:function(){return this.field.value},setValue:function(b){this.field.value=Function.$defined(b)?b:"";this.change()},disable:function(){if(!this.disabled)this.disabled=!0,this.dispatch("disable")},change:function(){this.dispatch("change",this)},setMaxLength:function(b){this.maxLength=b},setMinLength:function(b){this.minLength=b},attachValidator:function(b,
a){this.validators.add(b)&&a&&this.validate()},detachValidator:function(b,a){this.validators.remove(b)&&a&&this.validate()},keyup:function(b){this.dispatch("keyup",this,b)},keypress:function(b){this.dispatch("keypress",this,b)},blur:function(b){this.dispatch("blur",this,b)},focus:function(b){this.dispatch("focus",this,b)},select:function(){this.unselect();this.inherit.apply(this,arguments)},setValid:function(b,a){typeof b=="boolean"?(t(this.element).bool("invalid",!b).bool("valid",b),a?this.element.title=
a:this.element.removeAttribute("title")):(t(this.element).remove("invalid","valid"),this.element.removeAttribute("title"));this.valid=b},validate:function(b){var a;this.setValid();for(var c=0;c<this.validators.length;c++)if(a=this.validators[c](this))return b||this.setValid(!1,a.message),a;this.getValue()!=""&&this.setValid(!0)},nextFieldFocus:function(){var b=j.axis(this,j.AXIS_FOLLOWING_SIBLING).search(!0,"selectable");b?b.select():this.parentNode&&this.parentNode.submit&&this.parentNode.submit()},
destroy:function(){h.clearHandlers(this.element);h.clearHandlers(this.field);this.button&&(h.clearHandlers(this.button),delete this.button);this.validators.clear();this.inherit();delete this.sample;delete this.sampleContainer;delete this.defaultValue;delete this.field}});a.create=function(b,c){b={radiogroup:"RadioGroup",checkgroup:"CheckGroup"}[b.toLowerCase()]||b.capitalize();if(a[b])return new a[b](c);else throw Error("Wrong field type `{0}`".format(b));};a.Hidden=m(a,{className:"Basis.Controls.Form.Field.Hidden",
selectable:!1,template:new k(""),fieldTemplate:new k('<input{field|element} type="hidden"/>'),init:function(b){b.value=v(b.value,"");this.inherit(b)}});a.Text=m(a,{className:"Basis.Controls.Form.Field.Text",fieldTemplate:new k('<input{field|element} type="text"/>'),init:function(b){if(b.minLength){if(!b.validators)b.validators=[];b.validators.push(x.MinLength)}b.value=v(b.value,"");return this.inherit(b)},setMaxLength:function(b){b=b*1||0;this.field.setAttribute("maxlength",b,0);this.inherit(b)}});
a.Password=m(a.Text,{className:"Basis.Controls.Form.Field.Password",fieldTemplate:new k('<input{field|element} type="password"/>')});a.File=m(a,{className:"Basis.Controls.Form.Field.File",fieldTemplate:new k('<input{field|element} type="file"/>'),init:function(b){b.value="";this.inherit(b)}});a.Textarea=m(a,{className:"Basis.Controls.Form.Field.Textarea",fieldTemplate:new k("<textarea{field|element}/>"),init:function(b){if(!b.validators)b.validators=[];b.minLength&&b.validators.push(x.MinLength);
b.maxLength&&b.validators.push(x.MaxLength);b.value=v(b.value,"");b.nextFieldOnEnter=!1;this.counter=j.createElement(".counter",a.LOCALE.Textarea.SYMBOLS_LEFT+": ",j.createText(0));b=this.inherit(b);h.addHandler(this.field,"keyup",this.updateCounter,this);h.addHandler(this.field,"input",this.updateCounter,this);window.opera&&h.addHandler(this.field,"focus",function(){this.contentEditable=!0;this.contentEditable=!1},this.field);return b},updateCounter:function(){var b=this.maxLength-this.getValue().length;
this.counter.lastChild.nodeValue=b>=0?b:0},setValue:function(b){this.inherit(b);this.updateCounter()},setMaxLength:function(b){this.inherit(b);b?(this.updateCounter(),j.insert(this.sampleContainer,this.counter)):j.remove(this.counter)},destroy:function(){delete this.counter;this.inherit()}});a.Checkbox=m(a,{className:"Basis.Controls.Form.Field.Checkbox",fieldTemplate:new k('<input{field|element} type="checkbox"/>'),init:function(b){b.value=v(b.value,!1);this.inherit(b);if(!this.tableLayout)b=this.element.firstChild.firstChild,
j.remove(this.element.firstChild),j.insert(this.field.parentNode,b),j.insert(b,this.field,j.INSERT_BEGIN)},invert:function(){this.setValue(!this.getValue())},setValue:function(b){var a=this.field.checked;this.field.checked=Boolean.normalize(b);a!=this.field.checked&&this.change()},getValue:function(){return this.field.checked}});a.Label=m(a,{className:"Basis.Controls.Form.Field.Label",fieldTemplate:new k('<div{field|element} class="label">{fieldValueText}</div>'),setValue:function(b){this.inherit(b);
this.fieldValueText.nodeValue=this.field.value}});var l=m(d,{className:"Basis.Controls.Form.ComplexFieldItem",canHaveChildren:!1,valueGetter:w("value"),titleGetter:function(b){return v(b.title,b.value)},init:function(b){if(b&&typeof b.valueGetter=="function")this.valueGetter=b.valueGetter;if(b&&typeof b.titleGetter=="function")this.titleGetter=b.titleGetter;b=this.inherit(b);this.element.node=this;return b},getTitle:function(){return this.titleGetter(this.info,this)},getValue:function(){return this.valueGetter(this.info,
this)},destroy:function(){this.element.node=null;this.inherit()}}),u=m(a,u.HtmlContainer,{className:"Basis.Controls.Form.Field.ComplexField",canHaveChildren:!0,childFactory:function(b){var a={valueGetter:this.itemValueGetter,titleGetter:this.itemTitleGetter};b.info||b.delegate?o(a,b):a.info=b;return new this.childClass(a)},multipleSelect:!1,itemValueGetter:w("value"),itemTitleGetter:function(b){return v(b.title,b.value)},init:function(b){this.selection=new A({multiple:!!this.multipleSelect});this.selection.addHandler({change:function(){var b=
this.selection.getItems().map(w("getValue()"));this.setValue(!this.selection.multiple?b[0]:b)}},this);if(b.itemValueGetter)this.itemValueGetter=w(b.itemValueGetter);if(b.itemTitleGetter)this.itemTitleGetter=w(b.itemTitleGetter);b=this.inherit(b);b.items&&j.insert(this,b.items);if(!("value"in b))this.defaultValue=this.getValue();s.add(this);return b},getValue:function(){var b=this.selection.getItems().map(w("getValue()"));return!this.selection.multiple?b[0]:b},setValue:function(b){var a={};(this.selection.multiple?
b instanceof B?Array.from(b.value).map(function(b){return this.itemValueGetter(b.value)},this):Array.from(b):[b]).forEach(function(b){this[b]=!0},a);for(var b=[],c=this.firstChild;c;c=c.nextSibling)a[c.getValue()]&&b.push(c);this.selection.set(b);this.change()},destroy:function(){this.inherit();s.remove(this)}});delete u.prototype.template;var r=m(l,{className:"Basis.Controls.Form.Field.RadioGroup.Item",behaviour:{select:function(){this.inherit();this.field.checked=!0;t(this.element).add("selected")},
unselect:function(){this.inherit();this.field.checked=!1;t(this.element).remove("selected")},click:function(){this.select()},update:function(b,a){this.inherit(b,a);this.field.value=this.valueGetter(b.info,b);this.titleText.nodeValue=this.titleGetter(b.info,b)}},template:new k('<label{element} class="item"><input{field} type="radio" class="radio"/><span{content}>{titleText}</span></label>'),init:function(b){this.inherit(b);this.dispatch("update",this,this.info,this.info,{})}});a.RadioGroup=m(u,{className:"Basis.Controls.Form.Field.RadioGroup",
childClass:r,fieldTemplate:new k('<div{field|childNodesElement} class="Basis-RadioGroup"></div>'),init:function(b){this.inherit(b);h.addHandler(this.childNodesElement,"click",function(b){var a=h.sender(b),c=a.tagName=="LABEL"?a:j.parent(a,"LABEL",0,this.field);if(c&&c.node){if(!c.node.isDisabled()){var e=this;setTimeout(function(){e.dispatch("click",b,c.node);c.node.dispatch("click",b)},0)}h.kill(b)}},this);return b},appendChild:function(b){if(b=this.inherit(b,refChild))b.field.name=this.name},insertBefore:function(b,
a){if(b=this.inherit(b,a))b.field.name=this.name}});var C=m(l,{className:"Basis.Controls.Form.Field.CheckGroup.Item",behaviour:{select:function(){this.inherit();this.field.checked=!0},unselect:function(){this.inherit();this.field.checked=!1},click:function(){this.selected?this.unselect():this.select(!0)},update:function(b,a){this.inherit(b,a);this.field.value=this.valueGetter(b.info,b);this.titleText.nodeValue=this.titleGetter(b.info,b)}},template:new k('<label{element} class="item"><input{field} type="checkbox"/><span{content}>{titleText}</span></label>')});
a.CheckGroup=m(u,{className:"Basis.Controls.Form.Field.CheckGroup",childClass:C,multipleSelect:!0,fieldTemplate:new k('<div{field|childNodesElement} class="Basis-CheckGroup"></div>'),init:function(b){b=this.inherit(b);h.addHandler(this.childNodesElement,"click",function(b){var a=h.sender(b),c=a.tagName=="LABEL"?a:j.parent(a,"LABEL",0,this.field);if(c&&c.node){if(!c.node.isDisabled()){var e=this;setTimeout(function(){e.dispatch("click",b,c.node);c.node.dispatch("click",b)},0)}h.kill(b)}},this);return b}});
var e=m(l,{className:"Basis.Controls.Form.Field.Select.Item",behaviour:{update:function(b,a){this.inherit(b,a);this.field.value=this.valueGetter(b.info,b);this.field.text=this.titleGetter(b.info,b)}},template:new k("<option{element|field}></option>")});a.Select=m(u,{className:"Basis.Controls.Form.Field.Select",childClass:e,fieldTemplate:new k("<select{field|childNodesElement}/>"),init:function(b){this.inherit(b);h.addHandler(this.field,"change",this.change,this);h.addHandler(this.field,"keyup",this.change,
this)},setValue:function(b){b=this.childNodes.search(b,"getValue()");if(this.field.selectedIndex!=Array.lastSearchIndex)this.field.selectedIndex=Array.lastSearchIndex,this.selection.dispatch=Function.$null,b?this.selection.add([b]):this.selection.clear(),delete this.selection.dispatch,clearTimeout(this.selection._fireTimer),delete this.selection._fireTimer}});var i={show:function(){t(this.field).add("Basis-DropdownList-Opened")},hide:function(){t(this.field).remove("Basis-DropdownList-Opened")},click:function(b){var a=
h.sender(b);if((a=a.tagName=="A"?a:j.parent(a,"A",0,this.content))&&a.node)a.node.isDisabled()||(this.hide(),this.dispatch("click",b,a.node),a.node.dispatch("click",b)),h.kill(b)}},e=m(l,{className:"Basis.Controls.Form.Field.Combobox.Item",behaviour:{click:function(){this.select()},update:function(b,a){this.inherit(b,a);this.titleText.nodeValue=this.titleGetter(b.info,b)}},template:new k('<a{element} class="item" href="#">{titleText}</a>')}),g={focus:function(){t(this.caption).add("focused")},blur:function(){t(this.caption).remove("focused")},
keypress:function(b){var a=h.key(b),c=this.selection.pick();switch(a){case h.KEY.DOWN:if(b.altKey)return this.popup.visible?this.hide():!this.isDisabled()?this.show():null;c=j.axis(c?c:this.firstChild,j.AXIS_FOLLOWING_SIBLING).search(!1,"disabled");break;case h.KEY.UP:if(b.altKey)return this.popup.visible?this.hide():!this.isDisabled()?this.show():null;c=c?j.axis(c,j.AXIS_PRESCENDING_SIBLING).search(!1,"disabled"):this.firstChild;break;case h.KEY.ENTER:return this.popup.visible&&this.hide(),h.kill(b)}c&&
c.select()}};a.Combobox=m(u,{className:"Basis.Controls.Form.Field.Combobox",childClass:e,behaviour:z(a,{disable:function(){this.inherit();t(this.field).add("disabled")},enable:function(){this.inherit();t(this.field).remove("disabled");this.delegate&&this.delegate.select&&this.delegate.select()},update:function(b,a){this.inherit(b,a);this.field.title=this.captionText.nodeValue=this.captionFormater(v(this.getTitle(),this.getValue(),""),this.getValue())}}),caption:null,popup:null,property:null,selectedIndex:-1,
captionFormater:Function.$self,fieldTemplate:new k('<div{field} class="Basis-DropdownList"><div class="Basis-DropdownList-Canvas"><div class="corner-left-top"/><div class="corner-right-top"/><div class="side-top"/><div class="side-left"/><div class="side-right"/><div class="content"/><div class="corner-left-bottom"/><div class="corner-right-bottom"/><div class="side-bottom"/></div><div class="Basis-DropdownList-Content"><a{caption} class="Basis-DropdownList-Caption" href="#"><span class="Basis-DropdownList-CaptionText">{captionText}</span></a><div class="Basis-DropdownList-Trigger"/></div><div{content|childNodesElement} class="Basis-DropdownList-PopupContent"/></div>'),
init:function(b){if(!Basis.Controls.Popup)throw Error("Basis.Controls.Popup required for DropDownList");if(b.captionFormater)this.captionFormater=b.captionFormater;var a=b.property?b.property.value:b.value;delete b.value;var c=b.items;delete b.items;b=this.inherit(b);this.popup=new Basis.Controls.Popup.Popup(o({cssClassName:"Basis-DropdownList-Popup",autorotate:1,ignoreClickFor:[this.field],thread:b.thread,content:this.childNodesElement},b.popup));this.popup.addHandler(i,this);for(var e in g)h.addHandler(this.caption,
e,g[e],this);if(b.name)j.insert(this.field,this.hidden=j.createElement("INPUT[type=hidden][name={0}]".format(String(b.name).quote())));c&&j.insert(this,c);if(b.property)this.property=b.property,this.property.addLink(this,this.setValue);if(typeof a!="undefined")this.defaultValue=a;this.setDefaultValue();this.dispatch("update",this,this.info);h.addHandler(this.field,"click",function(b){this.isDisabled()||this.popup.visible?this.hide():this.show();h.kill(b)},this);return b},select:function(){this.inherit();
j.focus(this.caption)},show:function(){this.popup.show(this.field);this.select()},hide:function(){this.popup.hide()},getTitle:function(){return this.itemTitleGetter(this.info,this.delegate)},getValue:function(){return this.itemValueGetter(this.info,this.delegate)},setValue:function(b){b instanceof B&&(b=this.itemValueGetter(b.value));if(this.getValue()!=b){b=this.childNodes.search(b,"getValue()");if(!b||!b.disabled&&this.delegate!==b){this.selectedIndex=b?Array.lastSearchIndex:-1;this.setDelegate(b);
b?this.selection.set([b]):this.selection.clear();b=this.getValue();if(this.hidden)this.hidden.value=b;this.property&&this.property.set(b)}this.dispatch("change")}return this.getValue()},destroy:function(){this.property&&(this.property.removeLink(this),delete this.property);this.popup.destroy();delete this.popup;this.inherit()}});var c=m(null,{className:"Basis.Controls.Form.ValidatorError",init:function(b,a){this.field=b;this.message=a}}),x={NO_LOCALE:"There is no locale for this error",RegExp:function(b){b.constructor!=
RegExp&&(b=RegExp(b));return function(a){var e=a.getValue();if(e!=""&&!e.match(b))return new c(a,x.LOCALE.RegExp.WRONG_FORMAT||x.NO_LOCALE)}},Required:function(b){var a=b.getValue();if(Function.$isNull(a)||a=="")return new c(b,x.LOCALE.Required.MUST_BE_FILLED||x.NO_LOCALE)},Number:function(b){var a=b.getValue();if(isNaN(a))return new c(b,x.LOCALE.Number.WRONG_FORMAT||x.NO_LOCALE)},Currency:function(b){var a=b.getValue();if(isNaN(a))return new c(b,x.LOCALE.Currency.WRONG_FORMAT||x.NO_LOCALE);if(a<=
0)return new c(b,x.LOCALE.Currency.MUST_BE_GREATER_ZERO||x.NO_LOCALE)},Email:function(b){var a=b.getValue().trim();if(a!=""&&!a.match(/^[a-z0-9\.\-\_]+\@(([a-z0-9][a-z0-9\-]*\.)+[a-z]{2,6}|(\d{1,3}\.){3}\d{1,3})$/i))return new c(b,x.LOCALE.Email.WRONG_FORMAT||x.NO_LOCALE)},Url:function(b){var a=b.getValue().trim();if(a!=""&&!a.match(/^(https?\:\/\/)?((\d{1,3}\.){3}\d{1,3}|([a-zA-Z][a-zA-Z\d\-]+\.)+[a-zA-Z]{2,6})(:\d+)?(\/[^\?]*(\?\S(\=\S*))*(\#\S*)?)?$/i))return new c(b,x.LOCALE.Url.WRONG_FORMAT||
x.NO_LOCALE)},MinLength:function(b){var a=b.getValue();if((Function.$isNotNull(a.length)?a.length:String(a).length)<b.minLength)return new c(b,(x.LOCALE.MinLength.MUST_BE_LONGER_THAN||x.NO_LOCALE).format(b.minLength))},MaxLength:function(b){var a=b.getValue();if((Function.$isNotNull(a.length)?a.length:String(a).length)>b.maxLength)return new c(b,(x.LOCALE.MaxLength.MUST_BE_SHORTER_THAN||x.NO_LOCALE).format(b.maxLength))}},z=m(f,{className:"Basis.Controls.Form.Form",canHaveChildren:!1,template:new k("<form{element}/>"),
init:function(b){b=this.inherit(o({selection:!1},b));if(b.target)this.element.target=b.target;if(b.action)this.element.action=b.action;if(b.enctype)this.element.enctype=b.enctype;h.addHandler(this.element,"submit",this.submit,this);this.setMethod(b.method);this.element.onsubmit=this.submit;this.onSubmit=b.onSubmit||Function.$false;this.content=new E(o({container:this.element,onSubmit:Function.$false},b));return b},setData:function(b){this.loadData(b)},loadData:function(b){return this.content.loadData(b)},
getFieldByName:function(b){return this.content.getFieldByName(b)},getFieldById:function(b){return this.content.getFieldById(b)},setMethod:function(b){this.element.method=b?b.toUpperCase():"POST"},submit:function(){if(this.validate()===!0&&!this.onSubmit())if(this.tagName=="FORM")return!1;else this.element.submit();return!0},setDefaultState:function(){return this.content.setDefaultState()},reset:function(){return this.content.reset()},validate:function(){return this.content.validate()},serialize:function(){return this.content.serialize()},
appendChild:function(b){return this.content.appendChild(b)},removeChild:function(b){return this.content.removeChild(b)},insertBefore:function(b,a){return this.content.insertBefore(b,a)},replaceChild:function(b,a){return this.content.replaceChild(b,a)},clear:function(){return this.content.clear()},destroy:function(){this.inherit()}}),E=m(f,{className:"Basis.Controls.Form.FormContent",canHaveChildren:!0,childClass:a,childFactory:function(b){return a.create(b.type||"text",o({tableLayout:this.tableLayout},
b))},behaviour:{disable:function(){this.inherit();for(var b=this.firstChild;b;b=b.nextSibling)b.disabled||b.dispatch("disable")},enable:function(){this.inherit();for(var b=this.firstChild;b;b=b.nextSibling)b.disabled||b.dispatch("enable")}},template:new k('<div{element|content|childNodesElement} class="form-content"/>'),tableTemplate:new k('<table{element} class="form-content"><tbody{content|childNodesElement}/></table>'),init:function(b){if(this.tableLayout=b.tableLayout)this.template=this.tableTemplate;
b=this.inherit(b);b.fields&&j.insert(this,b.fields);if(b.onSubmit)this.onSubmit=b.onSubmit;return b},getFieldByName:function(b){return this.childNodes.search(b,"name")},getFieldById:function(b){return this.childNodes.search(b,"id")},serialize:function(){for(var b={},a=this.firstChild;a;a=a.nextSibling)a.serializable&&a.name&&(b[a.name]=a.getValue());return b},setData:function(b,a){this.loadData(b,a)},loadData:function(b,a){for(var c=Object.keys(b),e=this.firstChild;e;e=e.nextSibling)c.indexOf(e.name)!=
-1?e.setValue(b[e.name]):e.setDefaultValue(),e.setValid();a||this.validate()},setDefaultState:function(){this.reset()},reset:function(){for(var b=this.firstChild;b;b=b.nextSibling)b.setDefaultValue();this.dispatch("reset")},validate:function(){for(var b,a=[],c=this.firstChild;c;c=c.nextSibling)(b=c.validate())&&a.push(b);return a.length?(a[0].field.select(),a):!0},submit:function(){if(this.parentNode&&this.parentNode.submit)this.parentNode.submit();else if(this.validate()===!0&&this.onSubmit)this.onSubmit(this.serialize())},
destroy:function(){delete this.onSubmit;this.inherit()}}),y=m(y,{matchFunction:function(b,a){if(!a){var c=b._m||this.textNodeGetter(b);c.constructor!=Array&&(c=[c]);for(var e=!1,d=0;d<c.length;d++){var g=c[d];if(g){var f=!1,i=g.nodeValue.split(this.rx);if(i.length>1){if(!b._x)b._x=[];if(!b._m)b._m=[];j.replace(b._x[d]||g,b._x[d]=j.createElement("SPAN.matched",j.wrap(i,this.map)));b._m[d]=g;f=e=!0}b._x&&b._x[d]&&!f&&(j.replace(b._x[d],b._m[d]),b._x[d]=b._m[d])}}return e}if(b._x){for(d=0;d<b._x.length;d++)b._x[d]&&
j.replace(b._x[d],b._m[d]);delete b._x;delete b._m}return!1},changeHandler:function(b){this.rx=this.regexpGetter(b)},init:function(b){var a=b.startPoints||"";this.node=b.node;this.textNodeGetter=w(b.textNodeGetter||"titleText");this.regexpGetter=typeof b.regexpGetter=="function"?b.regexpGetter:function(b){return RegExp("("+a+")("+b.forRegExp()+")","i")};this.map={};this.map[b.wrapElement||"SPAN.match"]=function(b,a){return a%3==2};this.inherit("",{change:this.changeHandler},String.trim);b.handlers&&
this.addHandler(b.handlers,b.thisObject)}}),n={childNodesModified:function(b,a){if(a.inserted)for(var c=0,e;e=a.inserted[c];c++)this.matchFunction(e,this.value=="")}},f=m(y,{match:function(){for(var b=this.node.firstChild;b;b=b.nextSibling)this.matchFunction(b,this.value=="")},changeHandler:function(b){this.inherit(b);this.match()},init:function(b){this.inherit(b);this.node.addHandler(n,this)}}),y=m(y,{changeHandler:function(b){this.inherit(b);this.node.setMatchFunction(b?this.matchFunction.bind(this):
null)}}),I={keyup:function(){this.matchFilter.set(this.field.value)},change:function(){this.matchFilter.set(this.field.value)}},m=m(d,{template:new k('<div{element|content} class="Basis-MatchInput"><input{field} type="text"/></div>'),matchFilterClass:y,init:function(b){b=this.inherit(b);this.matchFilter=new this.matchFilterClass(b.matchFilter);h.addHandlers(this.field,I,this);return b},destroy:function(){h.clearHandlers(this.field);this.inherit()}});Basis.namespace("Basis.Controls.Form").extend({Form:z,
FormContent:E,Field:a,ComplexField:u,Validator:x,ValidatorError:c,ComplexFieldItem:l,RadioGroupItem:r,CheckGroupItem:C,Combobox:a.Combobox,ComboboxItem:e,Matcher:f,MatchFilter:y,MatchInput:m})})();
(function(){function m(f){var d=k.key(f),h=k.sender(f);switch(d){case k.KEY.ESCAPE:this.closeOnEscape&&this.close(0);break;case k.KEY.ENTER:if(j.is(h,"TEXTAREA"))break;k.kill(f)}}var h=Basis.Class,j=Basis.DOM,k=Basis.Event,s=Basis.CSS,o=Basis.Cleaner,v=Basis.Html.Template,w=j.Wrapper,t=h(w.HtmlNode,{className:"Basis.Controls.Window.Blocker",captureElement:null,template:new v('<div{element} class="Basis-Blocker"><div{content} class="Basis-Blocker-Mate"/></div>'),init:function(f){this.inherit(f);j.setStyle(this.element,
{display:"none",position:"absolute",top:0,left:0,width:"100%",height:"100%"});o.add(this)},capture:function(f,d){if(this.captureElement=j.get(f||document.body))j.insert(this.captureElement,this.element),this.element.style.zIndex=d||1E3,j.show(this.element)},release:function(){this.captureElement&&(this.element.parentNode==this.captureElement&&j.remove(this.element),delete this.captureElement,j.hide(this.element))},destroy:function(){this.release();this.inherit();o.remove(this)}}),h=h(w.HtmlContainer,
{className:"Basis.Controls.Window.Window",template:new v('<div{element|selectedElement} class="Basis-Window"><div class="Basis-Window-Canvas"><div class="corner-left-top"/><div class="corner-right-top"/><div class="side-top"/><div class="side-left"/><div class="side-right"/><div class="content"/><div class="corner-left-bottom"/><div class="corner-right-bottom"/><div class="side-bottom"/></div><div{layout} class="Basis-Window-Layout"><div class="Basis-Window-Title"><div{title} class="Basis-Window-TitleCaption"/></div><div{content|childNodesElement} class="Basis-Window-Content"/></div></div>'),
closeOnEscape:!0,autocenter:!1,autocenter_:!1,modal:!1,closed:!0,init:function(f){this.inherit(f);j.hide(this.element);if(f.modal)this.modal=!0;"title"in f&&j.insert(this.title,f.title);if("closeOnEscape"in f)this.closeOnEscape=!!f.closeOnEscape;var d="genericRule-"+this.eventObjectId;s.cssClass(this.element).add(d);this.cssRule=j.Style.cssRule("."+d);if(f.moveable&&Basis.DragDrop)this.dde=new Basis.DragDrop.MoveableElement({element:this.element,trigger:this.title.parentNode,fixRight:!1,fixBottom:!1,
handlersContext:this,handlers:{move:function(){this.autocenter=!1;this.element.style.margin=0},over:function(){this.cssRule.setStyle(Object.slice(this.element.style,"left top".qw()));j.setStyle(this.element,{top:"",left:""})}}});var d=Array.from(f.buttons).map(function(a){return Object.complete({handler:a.handler?a.handler.bind(this):a.handler},a)},this),h=Object.slice(f,"buttonOk buttonCancel".qw()),t;for(t in h){var u=h[t];d.push({name:t=="buttonOk"?"ok":"cancel",caption:u.caption||u.title||u,handlers:{click:(u.handler||
this.close).bind(this)}})}if(d.length)this.buttonPanel=new Basis.Controls.Button.ButtonPanel({cssClassName:"Basis-Window-ButtonPlace",container:this.content,childNodes:d});if(!f.titleButton||f.titleButton.close!==!1)t=j.insert(this.title.parentNode,j.createElement("SPAN.Basis-Window-Title-ButtonPlace"),j.INSERT_BEGIN),s.cssClass(t.parentNode).add("Basis-Window-Title-ButtonPlace-Close"),j.insert(t,j.createElement({description:"A[href=#].Basis-Window-Title-CloseButton",click:new k.Handler(function(a){k.kill(a);
this.close(0)},this)},j.createElement("SPAN",Basis.Controls.Popup.LOCALE?Basis.Controls.Popup.LOCALE.BUTTON.BACK:"Close")));if(f.autocenter!==!1)this.autocenter=this.autocenter_=!0;if(f.thread)this.thread=f.thread,this.thread.addHandler({finish:function(){this.closed&&j.remove(this.element)}},this);k.addHandler(this.element,"keypress",m,this);k.addHandler(this.element,"mousedown",this.activate,this);o.add(this)},setTitle:function(f){j.insert(j.clear(this.title),f)},realign:function(){if(this.autocenter)this.element.style.margin=
"",this.cssRule.setStyle(this.element.offsetWidth?{left:"50%",top:"50%",marginLeft:-this.element.offsetWidth/2+"px",marginTop:-this.element.offsetHeight/2+"px"}:{left:0,top:0})},activate:function(){this.select()},open:function(f){this.closed?(j.visibility(this.element,!1),j.show(this.element),u.appendChild(this),this.closed=!1,this.realign(),this.thread&&this.thread.start(!0),this.dispatch("beforeShow",f),j.visibility(this.element,!0),this.buttonPanel&&this.buttonPanel.firstChild&&this.buttonPanel.firstChild.select(),
this.dispatch("open",f),this.dispatch("active",f)):this.realign()},close:function(f){if(!this.closed)this.thread?this.thread.start(1):j.remove(this.element),u.removeChild(this),this.autocenter=this.autocenter_,this.closed=!0,this.dispatch("close",f)},destroy:function(){this.dde&&(this.dde.destroy(),delete this.dde);this.inherit();this.cssRule.destroy();delete this.cssRule;o.remove(this)}}),z=new t,u=new w.Control({id:"Basis-WindowStack",childClass:h,handlers:{childNodesModified:function(){s.cssClass(this.element).bool("IsNotEmpty",
this.firstChild);var f=-1;if(this.lastChild){for(var d=0,h;h=this.childNodes[d];d++)h.element.style.zIndex=2001+d*2,h.modal&&(f=d);this.lastChild.select()}f!=-1?z.capture(this.element,2E3+f*2):z.release()}},selection:{handlers:{change:function(){var f=this.pick(),d=u.lastChild;f?f.parentNode==u&&f!=d&&(u.insertBefore(f),u.dispatch("childNodesModified",{})):d&&this.add([d])}}}});k.onLoad(function(){j.insert(document.body,u.element,j.INSERT_BEGIN);for(var f=u.firstChild;f;f=f.nextSibling)f.realign()});
Basis.namespace("Basis.Controls.Window").extend({Window:h,Blocker:t,getWindowTopZIndex:function(){return u.childNodes.length*2+2001}})})();
(function(){var m=Basis.Class,h=Basis.DOM,j=Basis.Event,k=Basis.Html.Template,s=Function.getter,o=Basis.CSS.cssClass,v=Basis.Cleaner,w=Basis.DOM.Wrapper,t=Basis.Layout,z=Basis.EventObject.createBehaviour;if(!t)throw"Basis.Controls.Popup: Basis.Layout required";var u=function(){return Basis.Controls.Popup.LOCALE},f={VERTICAL:"V",HORIZONTAL:"H"},d=String("LTRTRBLBLCCTRCCBCCCCCCCC"),A={L:"LEFT",R:"RIGHT",T:"TOP",B:"BOTTOM",C:"CENTER"},B={LEFT:"RIGHT",RIGHT:"LEFT",TOP:"BOTTOM",BOTTOM:"TOP",CENTER:"CENTER"},
y={finish:function(){this.visible||(h.remove(this.element),this.dispatch("cleanup",this))}},a=m(w.HtmlContainer,{className:"Basis.Controls.Popup.Popup",template:new k(Function.lazyInit(function(){return'<div{element|selectedElement} class="Basis-Popup"><div{closeButton} class="Basis-Popup-CloseButton"><span>'+(u()?u().BUTTON.BACK:"Close")+'</span></div><div{content|childNodesElement} class="Basis-Popup-Content"/></div>'})),behaviour:{layoutChanged:function(a,e){var d=(a+"-"+e.qw().slice(2,4).join("-")).toLowerCase(),
g=(this.orientation+"-"+this.dir.qw().slice(2,4).join("-")).toLowerCase();o(this.element).replace(d,g,this.cssLayoutPrefix)}},visible:!1,autorotate:!1,dir:"",defaultDir:"RIGHT BOTTOM RIGHT TOP",orientation:f.VERTICAL,hideOnAnyClick:!0,hideOnKey:!1,ignoreClickFor:[],cssLayoutPrefix:"popup-",init:function(a){this.document=this;var a=this.inherit(a),e="genericRule-"+this.eventObjectId;o(this.element).add(e);this.cssRule=h.Style.cssRule("."+e);this.ignoreClickFor=Array.from(a.ignoreClickFor);if(typeof a.hideOnAnyClick==
"boolean")this.hideOnAnyClick=a.hideOnAnyClick;if(a.hideOnKey)this.hideOnKey=a.hideOnKey;if(a.dir)this.defaultDir=a.dir.toUpperCase();this.setLayout(this.defaultDir,a.orientation);if(a.autorotate)this.autorotate=a.autorotate;if(a.relElement)this.relElement=h.get(a.relElement);if(a.thread)this.thread=a.thread,this.thread.addHandler(y,this);this.addEventListener("click","click",!0);v.add(this);return a},click:function(a){this.dispatch("click",a)},setLayout:function(a,e,d){var g=this.dir,f=this.orientation;
if(typeof a=="string")this.dir=a.toUpperCase();if(typeof e=="string")this.orientation=e;if(g!=this.dir||f!=this.orientation)this.dispatch("layoutChanged",f,g),d||this.realign()},flip:function(a){var e=this.dir.qw(),a=a==f.VERTICAL;e[0+a]=B[e[0+a]];e[2+a]=B[e[2+a]];this.setLayout(e.join(" "))},rotate:function(a){var e=this.dir.qw(),a=(a%4+4)%4,g=[];if(!a)return e;var f=e[0].charAt(0),i=e[1].charAt(0),b=d.indexOf(f+i)>>1,f=(b&252)+((b&3)+a&3)<<1;g.push(A[d.charAt(f)],A[d.charAt(f+1)]);f=e[2].charAt(0);
i=e[3].charAt(0);b=d.indexOf(f+i)>>1;a=f!="C"&&i!="C"&&e[0]==e[2]!=(e[1]==e[3])?-a+4:a;f=(b&252)+((b&3)+a&3)<<1;g.push(A[d.charAt(f)],A[d.charAt(f+1)]);return g},isFitToViewport:function(a){if(this.visible&&this.relElement){var e=new t.Box(this.relElement,!1,this.element.offsetParent),d=new t.Viewport(this.element.offsetParent),g=this.element.offsetWidth,f=this.element.offsetHeight,a=String(a||this.dir).toUpperCase().qw(),b=a[0]=="CENTER"?e.left+(e.width>>1):e[a[0].toLowerCase()],e=a[1]=="CENTER"?
e.top+(e.height>>1):e[a[1].toLowerCase()];return(a[2]!="LEFT")*(b<g>>(a[2]=="CENTER"))||(a[2]!="RIGHT")*(d.width-b<g>>(a[2]=="CENTER"))?!1:(a[3]!="TOP")*(e<f>>(a[3]=="CENTER"))||(a[3]!="BOTTOM")*(d.height-e<f>>(a[3]=="CENTER"))?!1:{x:b,y:e}}},realign:function(){if(this.visible&&this.relElement){for(var a=this.dir.qw(),e,d=0,g=a,f=a[2],b=a[3],i=typeof this.autorotate=="number"||!this.autorotate.length?3:this.autorotate.length;this.autorotate&&d<=i;){if(e=this.isFitToViewport(g.join(" "))){f=g[2];b=
g[3];this.setLayout(g.join(" "),null,!0);break}if(d==i)break;Array.isArray(this.autorotate)?(g=this.autorotate[d++],g=typeof g=="string"?g.toUpperCase().split(" "):this.rotate(g)):g=this.rotate(++d*this.autorotate)}e||(e=new t.Box(this.relElement,!1,this.element.offsetParent),e={x:a[0]=="CENTER"?e.left+(e.width>>1):e[a[0].toLowerCase()],y:a[1]=="CENTER"?e.top+(e.height>>1):e[a[1].toLowerCase()]});a=new t.Box(this.element.offsetParent);d={left:"auto",right:"auto",top:"auto",bottom:"auto"};switch(f){case "LEFT":d.left=
e.x+"px";break;case "CENTER":d.left=Math.round(e.x-this.element.offsetWidth/2)+"px";break;case "RIGHT":d.right=a.width-e.x+"px"}switch(b){case "TOP":d.top=e.y+"px";break;case "CENTER":d.top=Math.round(e.y-this.element.offsetHeight/2)+"px";break;case "BOTTOM":d.bottom=a.height-e.y+"px"}this.cssRule.setStyle(d);this.dispatch("realign")}},show:function(a,e,d,f){this.relElement=h.get(a)||this.relElement;this.setLayout(e||this.defaultDir,d);if(this.visible)this.realign();else if(this.relElement)o(this.element).remove("pre-transition"),
h.visibility(this.element,!1),g.appendChild(this),this.dispatch.apply(this,["beforeShow"].concat(f)),this.visible=!0,this.realign(),this.thread&&this.thread.start(1),h.visibility(this.element,!0),o(this.element).add("pre-transition"),this.dispatch.apply(this,["show"].concat(f))},hide:function(){if(this.visible)h.parentOf(document.body,this.element)&&(this.thread?this.thread.start(1):(h.remove(this.element),this.dispatch("cleanup",this))),this.visible=!1,this.parentNode&&g.removeChild(this),this.dispatch("hide")},
hideAll:function(){g.clear()},destroy:function(){this.thread&&(this.thread.removeHandler(y,this),delete this.thread);this.hide();j.removeHandler(this.element,"click",this.click,this);this.inherit();this.cssRule.destroy();delete this.cssRule;v.remove(this)}}),l=m(a,{className:"Basis.Controls.Popup.Balloon",cssLayoutPrefix:"mode-",template:new k(Function.lazyInit(function(){return'<div{element|selectedElement} class="Basis-Balloon"><div class="Basis-Balloon-Canvas"><div class="corner-left-top"/><div class="corner-right-top"/><div class="side-top"/><div class="side-left"/><div class="side-right"/><div class="content"/><div class="corner-left-bottom"/><div class="corner-right-bottom"/><div class="side-bottom"/><div class="tail"/></div><div class="Basis-Balloon-Layout"><div{closeButton} class="Basis-Balloon-CloseButton"><span>'+
(u()?u().BUTTON.BACK:"Close")+'</span></div><div{content|childNodesElement} class="Basis-Balloon-Content"/></div></div>'}))}),r=m(w.HtmlContainer,{className:"Basis.Controls.Popup.MenuItem",childFactory:function(a){return new this.childClass(a)},template:new k('<div{element} class="Basis-Menu-Item"><a{content|selectedElement} href="#"><span>{captionText}</span></a></div><div{childNodesElement}/>'),behaviour:{childNodesModified:function(){o(this.element).bool("hasSubItems",this.hasChildNodes())}},groupId:0,
caption:"[untitled]",captionGetter:s("caption"),handler:null,defaultHandler:function(a){this.parentNode&&this.parentNode.defaultHandler(a)},init:function(a){if(typeof a=="object"){if(a.caption)this.caption=a.caption;if(typeof a.captionGetter=="function")this.captionGetter=a.captionGetter;if(a.groupId)this.groupId=a.groupId;if(typeof a.handler=="function")this.handler=a.handler;if(typeof a.defaultHandler=="function")this.defaultHandler=a.defaultHandler}a=this.inherit(a);this.setCaption(this.caption);
return a},setCaption:function(a){this.caption=a;if(this.captionText)this.captionText.nodeValue=this.captionGetter(this)}});r.prototype.childClass=r;var C=m(r,{className:"Basis.Controls.Popup.MenuItemSet",behaviour:z(w.HtmlNode,{}),template:new k('<div{element|content|childNodesElement} class="Basis-Menu-ItemSet"/>')}),e=m(w.HtmlPartitionNode,{className:"Basis.Controls.Popup.MenuPartitionNode",defaultHandler:function(){},template:new k('<div{element} class="Basis-Menu-ItemGroup"><div{childNodesElement|content} class="Basis-Menu-ItemGroup-Content"></div></div>')}),
i=m(w.HtmlGroupControl,{className:"Basis.Controls.Popup.MenuGroupControl",childClass:e}),k=m(a,{className:"Basis.Controls.Popup.Menu",childClass:r,defaultDir:"LEFT BOTTOM LEFT TOP",subMenu:null,groupControlClass:i,localGrouping:{groupGetter:s("groupId")},defaultHandler:function(){this.hide()},behaviour:{click:function(a,e){e&&!e.isDisabled()&&!(e instanceof C)&&(e.handler?e.handler(e):e.defaultHandler(e),j.kill(a))}},template:new k(Function.lazyInit(function(){return'<div{element|selectedElement} class="Basis-Menu"><div{closeButton} class="Basis-Menu-CloseButton"><span>'+
(u()?u().BUTTON.BACK:"Close")+'</span></div><div{content|childNodesElement} class="Basis-Menu-Content"/></div>'})),init:function(a){a=this.inherit(a);if(typeof a.defaultHandler=="function")this.defaultHandler=a.defaultHandler;this.addEventListener("mouseover");return a}}),g=new (m(w.Control,{className:"Basis.Controls.Popup.PopupManager",handheldMode:!1,childClass:a,behaviour:z(w.Node,{childNodesModified:function(a,e){if(e.deleted)for(var d=e.deleted.length-1,g;g=e.deleted[d];d--)g.hide();if(e.inserted&&
!e.deleted&&this.childNodes.length==e.inserted.length)o(this.element).add("IsNotEmpty"),document.body.className=document.body.className,j.addGlobalHandler("click",this.hideByClick,this),j.addGlobalHandler("keydown",this.hideByKey,this),j.addGlobalHandler("scroll",this.hideByScroll,this),j.addHandler(window,"resize",this.realignAll,this);this.lastChild?this.lastChild.select():(o(this.element).remove("IsNotEmpty"),document.body.className=document.body.className,j.removeGlobalHandler("click",this.hideByClick,
this),j.removeGlobalHandler("keydown",this.hideByKey,this),j.removeGlobalHandler("scroll",this.hideByScroll,this),j.removeHandler(window,"resize",this.realignAll,this))}}),insertBefore:function(a,e){var d=document.documentElement.scrollTop,g=document.body.scrollTop;if(this.inherit(a,e)){a.documentST_=d;a.bodyST_=g;if(this.handheldMode)document.documentElement.scrollTop=0,document.body.scrollTop=0;a.element.style.zIndex=Basis.Controls.Window?Basis.Controls.Window.getWindowTopZIndex():2001}},removeChild:function(a){if(a&&
(a.hideOnAnyClick&&a.nextSibling&&this.removeChild(a.nextSibling),this.inherit(a),this.handheldMode))document.documentElement.scrollTop=a.documentST_,document.body.scrollTop=a.bodyST_},realignAll:function(){for(var a=this.firstChild;a;a=a.nextSibling)a.realign()},clear:function(){this.firstChild&&this.removeChild(this.firstChild)},hideByClick:function(a){for(var a=j.sender(a),e,d=this.childNodes.filter(Function.getter("hideOnAnyClick")).reverse(),g=0,f;f=d[g];g++){if(a===f.closeButton||h.parentOf(f.closeButton,
a)){this.removeChild(f);return}e||(e=h.axis(a,h.AXIS_ANCESTOR_OR_SELF));if(e.has(f.element)||e.some(Array.prototype.has,f.ignoreClickFor)){this.removeChild(d[g-1]);return}}this.removeChild(d.last())},hideByKey:function(a){var a=j.key(a),e=this.lastChild;if(e&&e.hideOnKey){var d=!1;typeof e.hideOnKey=="function"?d=e.hideOnKey(a):Array.isArray(e.hideOnKey)&&(d=e.hideOnKey.has(a));d&&e.hide()}},hideByScroll:function(a){a=j.sender(a);if(!h.parentOf(a,this.element))for(var e=this.lastChild;e;){var d=e.previousSibling;
e.relElement&&e.offsetParent!==a&&h.parentOf(a,e.relElement)&&e.hide();e=d}}}))({id:"Basis-PopupStack"});j.onLoad(function(){h.insert(document.body,g.element,h.INSERT_BEGIN);g.realignAll()});Basis.namespace("Basis.Controls.Popup").extend({ORIENTATION:f,setHandheldMode:function(a){g.handheldMode=!!a},Popup:a,Balloon:l,Menu:k,MenuGroupControl:i,MenuPartitionNode:e,MenuItem:r,MenuItemSet:C})})();
(function(){function m(){if(this.selection&&!this.selection.itemCount){var d=this.childNodes.search(!1,"disabled");d&&d.select()}}var h=Basis.Class,j=Basis.DOM,k=Basis.Html.Template,s=Basis.CSS.cssClass,o=Function.getter,v=j.Wrapper,w=h(v.HtmlControl,{className:"Basis.Controls.Tabs.AbstractTabsControl",canHaveChildren:!0,childClass:v.HtmlNode,behaviour:{childEnabled:function(d){this.selection&&!this.selection.itemCount&&d.select()},childDisabled:m,childNodesModified:m},item:function(d){d=isNaN(d)?
this.indexOf(d):parseInt(d);return d.between(0,this.childNodes.length-1)?this.childNodes[d]:null},indexOf:function(d){return d instanceof this.childClass?this.childNodes.indexOf(d):this.childNodes.search(d,"name")?Array.lastSearchIndex:-1}}),o=h(v.HtmlContainer,{className:"Basis.Controls.Tabs.Tab",canHaveChildren:!1,behaviour:{disable:function(){this.inherit();this.unselect();this.document&&this.document.dispatch("childDisabled",this)},enable:function(){this.inherit();this.document&&this.document.dispatch("childEnabled",
this)},click:function(){this.isDisabled()||this.select()},update:function(d,f){this.inherit(d,f);var h=this.titleText,j=this.titleGetter(this);h.nodeValue=j==null||j==""?"[no title]":j}},template:new k('<div{element|selectedElement} class="Basis-Tab"><span class="Basis-Tab-Start"/><span class="Basis-Tab-Content"><span{content} class="Basis-Tab-Caption">{titleText}</span></span><span class="Basis-Tab-End"/></div>'),titleGetter:o("info.title"),groupId:0,init:function(d){if(d){if(d.name!="")this.name=
d.name;if(d.groupId!="")this.groupId=d.groupId;d.content&&(d=Object.complete({},d),delete d.content)}this.inherit(d)}}),t=h(v.HtmlGroupControl,{childClass:h(v.HtmlPartitionNode,{template:new k('<div{element|content|childNodesElement} class="Basis-TabControl-TabGroup"></div>')})}),t=h(w,{className:"Basis.Controls.Tabs.TabControl",childClass:o,groupControlClass:t,template:new k('<div{element} class="Basis-TabControl"><div class="Basis-TabControl-Start"/><div{content|childNodesElement} class="Basis-TabControl-Content"/><div class="Basis-TabControl-End"/></div>'),
init:function(d){this.inherit(d);this.addEventListener("click","click",!0)}}),z=h(v.HtmlContainer,{className:"Basis.Controls.Tabs.Page",canHaveChildren:!0,behaviour:{select:function(){s(this.element).remove("Basis-Page-Hidden");this.inherit()},unselect:function(){s(this.element).add("Basis-Page-Hidden");this.inherit()}},template:new k('<div{element} class="Basis-Page Basis-Page-Hidden"><div{content|childNodesElement} class="Basis-Page-Content"/></div>'),init:function(d){if(d&&d.name!="")this.name=
d.name;this.inherit(d)}}),u=h(w,{className:"Basis.Controls.Tabs.PageControl",childClass:z,template:new k('<div{element|content|childNodesElement} class="Basis-PageControl"/>')}),v=h(o,{className:"Basis.Controls.Tabs.TabSheet",canHaveChildren:!0,childClass:v.HtmlNode,behaviour:{select:function(){this.inherit();s(this.pageElement).remove("Basis-Page-Hidden")},unselect:function(){this.inherit();s(this.pageElement).add("Basis-Page-Hidden")}},template:new k('<div{element|selectedElement} class="Basis-TabSheet"><div{tabElement} class="Basis-Tab"><span class="Basis-Tab-Start"/><span class="Basis-Tab-Content"><span{content} class="Basis-Tab-Caption">{titleText}</span></span><span class="Basis-Tab-End"/></div><div{pageElement} class="Basis-Page Basis-Page-Hidden"><div{pageContent|childNodesElement} class="Basis-Page-Content"/></div></div>'),
init:function(d){var f;if(d&&d.content)d=Object.complete({},d),f=d.content,delete d.content;this.inherit(d);f&&j.insert(this.pageContent,f)},destroy:function(){j.remove(this.pageElement);this.inherit()}}),f=h(t,{className:"Basis.Controls.Tabs.AccordionControl",childClass:v,template:new k('<div{element|content} class="Basis-AccordionControl"><div{content|childNodesElement} class="Basis-AccordionControl-Content"/></div>')}),h=h(t,{className:"Basis.Controls.Tabs.TabSheetControl",childClass:v,template:new k('<div{element|content} class="Basis-TabSheetControl"><div{tabsElement} class="Basis-TabControl"><div class="Basis-TabControl-Start"/><div{content|childNodesElement} class="Basis-TabControl-Content"/><div class="Basis-TabControl-End"/></div><div{pagesElement} class="Basis-PageControl"/></div>'),
insertBefore:function(d,f){if(d=this.inherit(d,f))return this.pagesElement&&this.pagesElement.insertBefore(d.pageElement,this.nextSibling?this.nextSibling.pageElement:null),d},removeChild:function(d){if(d=this.inherit(d))return this.pagesElement&&d.element.appendChild(d.pageElement),d},clear:function(){this.childNodes.forEach(function(d){d.element.appendChild(d.pageElement)});this.inherit()}});Basis.namespace("Basis.Controls.Tabs").extend({AbstractTabsControl:w,TabControl:t,Tab:o,PageControl:u,Page:z,
AccordionControl:f,TabSheetControl:h,TabSheet:v})})();
(function(){function m(){s.axis(this,s.AXIS_DESCENDANT_OR_SELF,"expand()")}function h(){s.axis(this,s.AXIS_DESCENDANT_OR_SELF,"collapse()")}var j=Basis.Class,k=Basis.Event,s=Basis.DOM,o=Basis.Html.Template,v=Basis.CSS.cssClass,w=Function.getter,t=s.Wrapper,z=j(t.HtmlPartitionNode,{className:"Basis.Controls.Tree.TreePartitionNode",template:new o('<li{element} class="Basis-Tree-NodeGroup"><div class="Basis-Tree-NodeGroup-Title"><span>{titleText}</span></div><ul{childNodesElement} class="Basis-Tree-NodeGroup-Content"/></li>')}),u=
j(t.HtmlGroupControl,{className:"Basis.Controls.Tree.TreeGroupControl",childClass:z}),w=j(t.HtmlContainer,{className:"Basis.Controls.Tree.TreeNode",canHaveChildren:!1,behaviour:{click:function(d){s(k.sender(d)).isInside(this.tmpl.title||this.tmpl.element)&&this.select(k(d).ctrlKey)},update:function(d,f){this.inherit(d,f);this.tmpl.titleText.data=String(this.titleGetter(this))||"[no title]"}},template:new o('<li{element} class="Basis-Tree-Node"><div{content|selectedElement} class="Tree-Node-Title Tree-Node-Content"><a{title} href="#">{titleText|[no title]}</a></div></li>'),
titleGetter:w("info.title"),expand:Function.$undef,expandAll:m,collapse:Function.$undef,collapseAll:h}),f=j(w,{className:"Basis.Controls.Tree.TreeFolder",canHaveChildren:!0,childClass:w,groupControlClass:u,behaviour:{click:function(d){this.expander&&s(k.sender(d)).isInside(this.tmpl.expander)?this.toggle():this.inherit(d)},expand:function(){v(this.tmpl.element).remove("collapsed");s.display(this.tmpl.childNodesElement,!0)},collapse:function(){s.display(this.tmpl.childNodesElement,!1);v(this.tmpl.element).add("collapsed")}},
template:new o('<li{element} class="Basis-Tree-Folder"><div{content|selectedElement} class="Tree-Node-Title Tree-Folder-Content"><div{expander} class="Basis-Tree-Expander"/><a{title} href="#">{titleText|[no title]}</a></div><ul{childNodesElement}/></li>'),collapsable:!0,collapsed:!1,init:function(d){this.inherit(d);if(d){if("collapsable"in d)this.collapsable=!!d.collapsable;if("collapsed"in d)this.collapsed=!!d.collapsed}this.collapsed&&this.collapsable&&this.dispatch("collapse")},expand:function(){if(this.collapsed)return this.collapsed=
!1,this.dispatch("expand"),!0},collapse:function(){if(!this.collapsed&&this.collapsable)return this.collapsed=!0,this.dispatch("collapse"),!0},toggle:function(){this.collapsed?this.expand():this.collapse()}}),j=j(t.Control,{className:"Basis.Controls.Tree.Tree",childClass:w,groupControlClass:u,template:new o('<div{element} class="Basis-Tree"><ul{content|childNodesElement|disabledElement} class="Basis-Tree-Root"></ul></div>'),init:function(d){this.inherit(d);this.addEventListener("click");this.addEventListener("dblclick")},
expandAll:m,collapseAll:h,expand:Function.$undef,collapse:Function.$undef});Basis.namespace("Basis.Controls.Tree").extend({Tree:j,TreeNode:w,TreeFolder:f,TreeGroupControl:u,TreePartitionNode:z})})();
(function(){function m(a,e,c){return c?C=="native"?a.createElementNS(c,e):a.createNode(1,e,c):C=="native"?a.createElement(e):a.createNode(1,e)}function h(a,e,c,d){a=C=="native"?a.createAttributeNS(c,e):a.createNode(2,e,c);a.nodeValue=d;return a}function j(a,e){return a.setAttributeNodeNS?a.setAttributeNodeNS(e):a.setAttributeNode(e)}function k(e,d,c){j(e,h(e.ownerDocument,a.PREFIX+(d?":"+d:""),a.NAMESPACE,c))}function s(a,e){return a.createTextNode(String(e))}function o(a,e){return a.createCDATASection(e)}
function v(a,e){var c=a.nodeType,d=a.attributes,f=a.firstChild;if(f){if(f.nodeType!=A&&f===a.lastChild)return f.nodeValue}else{var h=d&&d[0];if(c==A){if(!h)return"";if(d.length==1&&(h.baseName||h.localName)==l.localpart&&h.namespaceURI==l.namespace)return null}else if(!h)return null}var c={},h=[],j=0,b,k,o;if(f){do j=h.push(f);while(f=f.nextSibling)}if(d)for(f=0;o=d[f];f++)h.push(o);e||(e={});for(var f=0,m;m=h[f];f++){d=m.nodeName;b=f<j;o=e[d];if(b)b=v(m,e);else{if(d=="xmlns")continue;b=m.nodeValue}for(;o;)if(o.storeName&&
(b[o.storeName]=d),o.rename)d=o.rename,o=e[d];else{o.format&&(b=o.format(b));!c[d]&&o.forceArray&&(b=[b]);break}d in c?(k=c[d])&&k.push?k.push(b):c[d]=[k,b]:c[d]=b}return c}function w(e,d,c,f){if(String(d).charAt(0)=="@")return f==null?f:h(e,d.substr(1),"",String(f.content||f));else{d=m(e,d.toString(),d.namespace||c);if(typeof f=="undefined"||f===null)j(d,y.createAttribute(e,l,"true"));else if(typeof f=="string"||typeof f=="number"||typeof f=="function"||typeof f=="boolean"||f.constructor==Date||
f.constructor==RegExp)d.appendChild(s(e,f));else{c=f.xmlns||c;f.xmlns&&a.BAD_SUPPORT&&k(d,"",c);for(var o in f){var n=f[o];if(!(o=="xmlns"||typeof n=="function"))if(n&&Array.isArray(n))for(var r=0;r<n.length;r++)d.appendChild(w(e,o,c,n[r]));else n!=null&&typeof n=="object"&&n.toString!==Object.prototype.toString&&(n=n.toString()),(n=w(e,o,c,n))&&(n.nodeType==B?j(d,n):d.appendChild(n))}}return d}}function t(a,e){if(a.getElementsByTagNameNS)return a.getElementsByTagNameNS(e.namespace,e.localpart);for(var c=
[],d=z.tag(a,e),f=0,h;h=d[f++];)h.namespaceURI==e.namespace&&c.push(h);return c}var z=Basis.DOM,u=Basis.Class,f=Basis.Browser,d=Object.extend,A=z.ELEMENT_NODE,B=z.ATTRIBUTE_NODE,y=u(null,{className:"Basis.XML.QName",init:function(a,e,c){this.localpart=a;if(e)this.namespace=e;if(c)this.prefix=c},toString:function(){return this.prefix?this.prefix+":"+this.localpart:this.localpart},equals:function(a){return a instanceof y&&a.localpart==this.localpart&&a.namespace==this.namespace}});d(y,{fromNode:function(a){return new y(a.baseName||
a.localName,a.namespaceURI,a.prefix)},createDocument:function(a){return e(a.namespace,a)},createElement:function(a,e){return m(a,e,e.namespace)},createAttribute:function(a,e,c){return h(a,e,e.namespace,c)}});var a={PREFIX:"xmlns",NAMESPACE:"http://www.w3.org/2000/xmlns/",BAD_SUPPORT:f.test("webkit528.16-")||f.test("opera9-")},f={PREFIX:"xsi",NAMESPACE:"http://www.w3.org/2001/XMLSchema-instance"},l=new y("nil",f.NAMESPACE,f.PREFIX),r=u(null,{className:"Basis.XML.XMLElement",init:function(a){this.setElement(a)},
setElement:function(a){this.element=a},qname:function(){return y.fromNode(this.element)},setAttribute:function(a,e){j(this.element,y.createAttribute(this.element.ownerDocument,a,e))},getAttribute:function(a){for(var e=0,c;c=this.element.attributes[e++];)if(a.equals(y.fromNode(c)))return c;return null},hasAttribute:function(a){return!!this.getAttribute(a)},setValue:function(a,e){this.element.appendChild((e?o:s)(this.element.ownerDocument,a))},getValue:function(){return this.element.firstChild.nodeValue},
clear:function(){z.clear(this.element)},createChild:function(a){a=this.element.appendChild(y.createElement(this.element.ownerDocument,a));return new r(a)},getChildren:function(a){return t(this.element,a).map(function(a){return new r(a)})},destroy:function(){delete this.element}}),C="native",e=function(){if(typeof ActiveXObject!=="undefined")for(var a=["MSXML2.DOMDocument.6.0","MSXML2.DOMDocument.3.0"],e=0;e<a.length;e++)try{if(new ActiveXObject(a[e]))return C=a[e],function(a,c){var e=new ActiveXObject(C);
e.documentElement=m(e,c,a);return e}}catch(c){}var d=document.implementation;if(d&&d.createDocument)return function(a,c){var e=d.createDocument(a,c,null);if(e.charset&&e.charset!=document.charset)e.charset=document.charset;return e};throw Error("Browser doesn't support for XML document!");}();Basis.namespace("Basis.XML").extend({XMLNS:a,XSI:f,XSD:{PREFIX:"xsd",NAMESPACE:"http://www.w3.org/2001/XMLSchema"},QName:y,XMLElement:r,getElementsByQName:t,addNamespace:k,createDocument:e,createElementNS:m,
createAttribute:function(a,e,c){a=C=="native"?a.createAttribute(e):a.createNode(2,e);a.nodeValue=c;return a},createAttributeNS:h,setAttributeNodeNS:j,removeAttributeNodeNS:function(a,e){return a.removeAttributeNodeNS?a.removeAttributeNodeNS(e):a.removeAttributeNode(e)},createText:s,createCDATA:o,XML2Object:v,XML2String:function(a){if(typeof XMLSerializer!="undefined")return(new XMLSerializer).serializeToString(a);if(typeof a.xml=="string")return a.xml;if(a.nodeType==z.DOCUMENT_NODE)a=a.documentElement;
return z.outerHTML(a)},Object2XML:w})})();
(function(){var m=Basis.Class,h=Basis.DOM,j=Basis.XML,k=j.QName,s=j.XMLElement,o=j.addNamespace,v=j.XML2Object,w=j.Object2XML,t=Basis.Browser.Cookies.get("DEBUG_MODE"),z=new k("encodingStyle","http://schemas.xmlsoap.org/soap/envelope/","s"),u=new k("Envelope","http://schemas.xmlsoap.org/soap/envelope/","soap"),f=new k("Header","http://schemas.xmlsoap.org/soap/envelope/","soap"),d=new k("Body","http://schemas.xmlsoap.org/soap/envelope/","soap"),A=new k("Fault","http://schemas.xmlsoap.org/soap/envelope/",
"soap"),B=m(null,{className:"Basis.SOAP.Service",url:null,namespace:null,init:function(a,d){this.url=a;this.namespace=d;this.methods=[]},call:function(a,d){a=this.createMethodCall(a,!1,d);a.transport.abort();a.invoke(d.header,d.body,d.callback,d.mapping)},createMethodCall:function(a,d,g){return new y(this,new k(a,this.namespace),g,d)},destroy:function(){for(var a in this.methods)this.methods[a].destroy(),delete this.methods[a]}}),y=m(null,{className:"Basis.SOAP.ServiceCall",service:null,transport:null,
method:null,envelope:null,body:null,init:function(e,d,g,c){this.service=e;this.method=d;this.envelope=new l;this.url=e.url;this.transport=new a(d,g.callback);this.transport.requestHeaders={SOAPAction:d.namespace+(!/\/$/.test(d.namespace)?"/":"")+d};this.transport.requestEnvelope=this.envelope;this.transport.postBody=this.envelope.element.ownerDocument;this.transport.url={toString:function(){return e.url}};if(c)g.mapping&&this.transport.setMapping(g.mapping),g.callback&&this.transport.setCallback(g.callback),
this.body=g.body||{}},repeatCall:function(){this.transport.get()},call:function(a){return this.invoke(null,a||this.body)},invoke:function(a,d,g,c){this.transport.abort();this.envelope.setBody(this.method,d);a&&this.envelope.setHeader(a,this.method.namespace);g&&this.transport.setCallback(g);c&&this.transport.setMapping(c);this.transport.get()},destroy:function(){this.destroy=Function.$undef;this.transport.destroy();this.envelope.destroy();this.inherit()}}),a=m(Basis.Ajax.Transport,{className:"Basis.SOAP.ServiceCallTransport",
callback:{},map:null,behaviour:{start:function(){if(t&&window.console){var a={},d=[];a.transport=this;a.body=this.requestBody();a.xmlString=j.XML2String(this.requestEnvelope.element.ownerDocument);a.xml=v(this.postBody.documentElement);for(var g in a.body){var c=a.body[g];typeof c!="function"&&d.push(g+": "+(typeof c=="string"?c.quote("'"):c))}console.log("request "+this.soapMethod+(d.length?"("+d.join(", ")+"):":":"),a)}this.callback.start&&this.callback.start.call(this)},complete:function(a){if(t&&
window.console&&Function.$defined(a.responseXML)){var d={},g=a.responseXML.documentElement;Function.$defined(a.responseXML)&&Function.$defined(g)?(d.xmlString=j.XML2String(g),d.xmlObject=v(g),d.body=this.responseIsSuccess()?this.responseBody(d.xmlObject):(new l(g)).getBody().getValue()[A],d.transport=this):d.text=a.responseText;console.log("response "+this.soapMethod+":",d)}this.callback.complete&&this.callback.complete.call(this)},failure:function(a){a=this.getRequestError(a);a.isSoapFailure&&Basis.Ajax.TransportDispatcher.dispatch.call(this,
"soapfailure",a.code,a.msg);this.callback.failure&&this.callback.failure.call(this,a.code,a.msg)},timeout:function(){this.callback.timeout&&this.callback.timeout.call(this)},abort:function(){this.callback.abort&&this.callback.abort.call(this)},success:function(a){var d=this.callback.success;if(d&&Function.$defined(a.responseXML)&&Function.$defined(a.responseXML.documentElement))if(this.responseEnvelope=new l(a.responseXML.documentElement),typeof d=="function"){var g=v(this.responseEnvelope.element,
this.map);d.call(this,g,this.requestEnvelope,a)}else if(a=this.responseBody())if(a=a.Items?a.Items[Object.keys(a.Items)[0]]:a[Object.keys(a)[0]],Array.isArray(d))d.set(a);else if(d.loadData)d.loadData(a);else if(d.appendChild){typeof d.clear=="function"&&d.clear();for(g=0;g<a.length;g++)d.appendChild(a[g])}}},method:"POST",contentType:"text/xml",encoding:"utf-8",init:function(a){this.inherit();this.soapMethod=a},setCallback:function(a){if(a){var d=a.failure;if(a.fault)d=a.fault;this.callback={start:a.start,
success:a.success||(typeof a=="function"?a:void 0),failure:d,abort:a.abort,timeout:a.timeout,complete:a.complete!==Function.prototype.complete?a.complete:void 0}}else this.callback={}},setMapping:function(a){this.map=a},invoke:function(){},requestBody:function(){return this.requestEnvelope.getBody().getValue()[this.soapMethod]},responseBody:function(a){a=a?a[d]:this.responseEnvelope.getBody().getValue();return a[this.soapMethod+"Response"][this.soapMethod+"Result"]},getRequestError:function(a){var f,
g,c,h=!1;if(Function.$defined(a.responseXML)&&Function.$defined(a.responseXML.documentElement)){var j,l;try{j=v(a.responseXML.documentElement),l=j[d][A]}catch(k){throw Error("SOAP response parse error");}if(l.faultactor)c=l.faultactor;l.detail?(f=l.detail.code,g=l.detail.message):l.faultstring.match(/^\s*([a-z0-9\_]+)\s*\:(.+)$/i)?(f=RegExp.$1,g=RegExp.$2):(f="UNKNOWN_ERROR",g=l.faultstring);h=!0}return{code:f||"TRANSPORT_ERROR",msg:g,faultactor:c,isSoapFailure:h}},extract:function(a){return this.responseBody(a)}}),
l=m(s,{className:"Basis.SOAP.Envelope",setElement:function(a){this.body=this.header=null;if(!a)a=k.createDocument(u).documentElement,o(a,j.XSI.PREFIX,j.XSI.NAMESPACE),o(a,j.XSD.PREFIX,j.XSD.NAMESPACE),j.XMLNS.BAD_SUPPORT&&o(a,"soap","http://schemas.xmlsoap.org/soap/envelope/");this.element=a;this.header=this.getHeader();this.body=this.getBody(!0)},setValue:Function.$null,getValue:Function.$null,createChild:Function.$null,createHeader:function(){if(!this.header)this.header=new r(null,this.element.ownerDocument),
h.insert(this.element,this.header.element,h.INSERT_BEGIN);return this.header},getHeader:function(a){if(this.header)return this.header;var d=j.getElementsByQName(this.element,f)[0];if(d)return new r(d);if(a)return this.createHeader()},setHeader:function(a,d){this.getHeader(!0).setValue(a,d)},appendHeader:function(a,d){this.getHeader(!0).appendChild(a,d)},hasHeader:function(){return!!this.header},setHeaderSection:function(a,d){this.getHeader(!0).setSection(a,d)},createBody:function(){if(!this.body)this.body=
new C(null,this.element.ownerDocument),h.insert(this.element,this.body.element);return this.body},getBody:function(a){if(this.body)return this.body;var f=j.getElementsByQName(this.element,d)[0];if(f)return new C(f);if(a)return this.createBody()},setBody:function(a,d,g){this.getBody(!0).setValue(a,d,g)},hasBody:function(){return!!this.body},destroy:function(){delete this.header;delete this.body;this.inherit()}}),r=m(s,{className:"Basis.SOAP.EnvelopeHeader",init:function(a,d){this.inherit(a||k.createElement(d,
f))},getValue:function(){return v(this.element)},setValue:function(a,d){this.clear();this.appendChild(a,d)},appendChild:function(a,d){if(a)for(var g in a){var c=this.element.appendChild(w(this.element.ownerDocument,g,d,a[g]));j.XMLNS.BAD_SUPPORT&&o(c,"",d)}},setSection:function(a,d){var g=j.getElementsByQName(this.element,a)[0];g&&h.remove(g);this.appendChild(Function.wrapper(a)(d),a.namespace)}}),C=m(s,{className:"Basis.SOAP.EnvelopeBody",init:function(a,f){this.inherit(a||k.createElement(f,d))},
getValue:function(){return v(this.element)},setValue:function(a,d,g){this.clear();this.appendChild(a,d,g)},appendChild:function(a,d,g){d=Function.$defined(d)?new s(this.element.appendChild(w(this.element.ownerDocument,a,a.namespace,d))):this.createChild(a);j.XMLNS.BAD_SUPPORT&&o(d.element,"",a.namespace);g&&d.setAttribute(z,g)}});Basis.namespace("Basis.SOAP").extend({Service:B,ServiceCall:y,ServiceCallTransport:a,Envelope:l,EnvelopeHeader:r,EnvelopeBody:C})})();
(function(){function m(h,j){var k=Date.now()-h;return k>=j?1:k/j}var h=Basis.Class,j=Basis.DOM,k=h(Basis.Data.Property.Property,{className:"Basis.Animation.Thread",duration:1E3,interval:50,startTime:0,timer:null,started:!1,behaviour:{change:function(h,j){h==0&&this.dispatch("start");this.inherit(h,j);h==1&&this.dispatch("finish")}},init:function(h){h=h||{};this.inherit();if(h.duration)this.duration=h.duration;if(h.interval)this.interval=h.interval;this.run=this.run.bind(this);return h},start:function(h){this.started?
h&&this.invert():(this.startTime=Date.now(),this.started=!0,this.run())},run:function(){clearTimeout(this.timer);if(this.started){var h=m(this.startTime,this.duration);h>=1?this.stop():(this.set(h),this.timer=setTimeout(this.run,this.interval))}},invert:function(){this.dispatch("invert");if(this.started){var h=m(this.startTime,this.duration);this.startTime=Date.now()-this.duration*(1-h);this.run()}},stop:function(){clearTimeout(this.timer);if(this.started)this.started=!1,this.set(1)},destroy:function(){this.stop();
this.clear();this.inherit()}}),s=h(null,{className:"Basis.Animation.Modificator",thread:null,setter:Function.$null,notRevert:!1,timeFunction:Function.$self,init:function(h,j,m,t,s){this.thread=h instanceof k?h:new k(h);this.setRange(m,t);this.setter=j;this.notInvert=s;this.thread.addHandler({start:function(){},invert:function(){this.start+=this.range;this.range*=-1},change:function(h){this.setter(this.start+this.range*this.timeFunction(h))},finish:function(){this.notInvert||(this.start+=this.range,
this.range*=-1)},destroy:this.destroy},this)},setRange:function(h,j){this.start=h;this.range=j-h},destroy:function(){delete this.thread}});Basis.namespace("Basis.Animation").extend({Thread:k,Modificator:s,FX:{CSS:{FadeIn:function(h,k){return new s(h,function(h){j.setStyle(k,{opacity:h})},0,1)},FadeOut:function(h,k){return new s(h,function(h){j.setStyle(k,{opacity:h})},1,0)}}}})})();
(function(){var m=Basis.Class,h=Basis.DOM,j=Basis.Browser.is("ie"),k=m(null,{className:"Basis.Flash.SWFObject",init:function(k,o){delete k.classid;if(j){o.movie=k.data;delete k.data;var m=h.createElement("");m.innerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" '+Object.iterate(k,String.format,'{0}="{1}"').join(" ")+">"+Object.iterate(o,String.format,'<param name="{0}" value="{1}">').join("")+"</object>";this.element=m.firstChild;if(!this.element.id)this.element.id=this.element.uniqueID}else delete o.movie,
h.insert(this.element=h.createElement('OBJECT[type="application/x-shockwave-flash"]'+Object.iterate(k,String.format,'[{0}="{1}"]').join("")),Object.iterate(o,function(j,k){return h.createElement("PARAM[name={0}][value={1}]".format(j,String(k).quote()))}))}}),m=m(null,{className:"Basis.Flash.SWFElement",init:function(j,m,v,w){this.inherit();w=Object.complete({data:j},w);m=Object.extend({},m);if(v)m.flashvars=Object.iterate(v,String.format,"{0}={1}").join("&");this.swf=new k(w,m);this.element=h.createElement("",
this.swf.element)},alive:function(){if(j&&h.parentOf(document.documentElement,this.element))this.element.innerHTML=this.element.innerHTML.replace(/(<param[^>]+>)+/gi,Array.from(this.swf.element.childNodes).map(function(h){return h.outerHTML}).join("")),this.swf.element=window[this.swf.element.id]},callMethod:function(j){if(h.parentOf(document.documentElement,this.element))return(new Function("swf","a","b","c","return swf.element."+j+"("+["a","b","c"].splice(0,arguments.length-1)+")"))(this.swf,arguments[1],
arguments[2],arguments[3])}});Basis.namespace("Basis.Flash").extend({SWFElement:m,SWFObject:k})})();
(function(){var m=Basis.Class,h=Basis.DOM,j=Basis.Html.Template,k=Function.getter,s=Basis.EventObject.createBehaviour,o=Basis.DOM.Wrapper,v=Basis.Data.STATE,w=new j('<div{element|content} class="Basis-Label-State"/>'),t=new j('<div{element|content} class="Basis-Label-Processing"/>'),o=m(o.HtmlNode,{className:"Basis.Controls.Label.NodeLabel",cascadeDestroy:!0,show_:!1,visible_:!1,visibilityGetter:Function.$false,insertPoint:h.INSERT_END,defaultContent:"[no text]",behaviour:{delegateChanged:function(a,
d){(d?d.element==this.container:!this.container)&&this.setContainer(this.delegate&&this.delegate.element)}},init:function(a){a=a||{};if(a.container)this.container=a.container,delete a.container;if(!a.content)a.content=this.defaultContent;if(a.visibilityGetter)this.visibilityGetter=k(a.visibilityGetter);if(a.insertPoint)this.insertPoint=a.insertPoint;a=this.inherit(a);this.traceChanges_();return a},traceChanges_:function(){this.container&&this.visible_?this.container!=this.element.parentNode&&h.insert(this.container,
this.tmpl.element,this.insertPoint):h.remove(this.element)},setContainer:function(a){if(this.container!=a)this.container=a,this.traceChanges_()},setVisibility:function(a){if(this.visible_!=a)this.visible_=a,this.traceChanges_(),this.dispatch("visibilityChanged",this.visible_)},destroy:function(){delete this.container;this.inherit()}}),z=m(o,{className:"Basis.Controls.Label.State",behaviour:{stateChanged:function(a,d){this.setVisibility(this.visibilityGetter(this.state,d))}},template:w,init:function(a){if(a&&
a.visibleStates&&!a.visibilityGetter){for(var d={},f,h=0;f=a.visibleStates[h++];)d[f]=!0;a.visibilityGetter=k(Function.$self,d)}return this.inherit(a)}}),u=m(z,{className:"Basis.Controls.Label.Processing",visibilityGetter:function(a){return a==v.PROCESSING},defaultContent:"Processing...",template:t}),f={stateChanged:function(a,d){this.setVisibility(this.visibilityGetter(a.state,d))}},d={collectionChanged:function(a,d){d&&d.removeHandler(f,this);a.collection&&(a.collection.addHandler(f,this),f.stateChanged.call(this,
a.collection,a.collection.state))}},s=m(z,{className:"Basis.Controls.Label.CollectionState",behaviour:s(o,{delegateChanged:function(a,f){this.inherit(a,f);f&&f.removeHandler(d,this);this.delegate&&(this.delegate.addHandler(d,this),d.collectionChanged.call(this,this.delegate,f&&f.collection))}}),template:w}),t=m(s,{className:"Basis.Controls.Label.CollectionProcessing",visibilityGetter:function(a){return a==v.PROCESSING},defaultContent:"Processing...",template:t}),A=function(){this.setVisibility(this.visibilityGetter(this.delegate?
this.delegate.childNodes.length:0,this.delegate))},B={stateChanged:function(a){this.setVisibility(this.visibilityGetter(a.itemCount,this.delegate))}},y={childNodesModified:A,collectionStateChanged:A,stateChanged:A,collectionChanged:function(a,d){d&&d.removeHandler(B,this);a.collection&&(a.collection.addHandler(B,this),B.stateChanged.call(this,a.collection,a.collection.state))}},j=m(o,{className:"Basis.Controls.Label.ChildCount",behaviour:{delegateChanged:function(a,d){this.inherit(a,d);d&&d.removeHandler(y,
this);this.delegate&&(this.delegate.addHandler(y,this),y.collectionChanged.call(this,this.delegate));A.call(this)}},template:new j('<div{element|content} class="Basis-CountLabel"/>')}),m=m(j,{className:"Basis.Controls.Label.IsEmpty",visibilityGetter:function(a,d){var f=d.collection?d.collection.state:d.state;return!a&&f==v.READY},defaultContent:"Empty"});Basis.namespace("Basis.Controls.Label").extend({NodeLabel:o,State:z,Processing:u,CollectionState:s,CollectionProcessing:t,ChildCount:j,IsEmpty:m})})();
(function(m){function h(h){return(100*h).toFixed(4)+"%"}var j=m.Class,k=m.DOM,s=m.Event,o=m.Html.Template,v=m.DOM.Wrapper,w=j(v.HtmlNode,{className:"Basis.Plugin.PaginatorNode",template:new o('<td{element} class="Basis-PaginatorNode"><span><a{link|selectedElement} href="#">{pageNumber}</a></span></td>'),behaviour:{update:function(h,j){this.inherit(h,j);this.pageNumber.nodeValue=this.info.pageNumber+1;this.link.href=this.urlGetter(this.info.pageNumber)}},urlGetter:Function.$self}),j=j(v.Control,{className:"Basis.Plugin.Paginator",
childClass:w,template:new o('<table{element} class="Basis-Paginator"><tbody><tr{childNodesElement}></tr><tr{scrollbarContainer}><td colspan{spanAttr}="1"><div{scrollbar} class="Basis-Paginator-Scrollbar"><div{activePageMark} class="ActivePage"></div><div{scrollTrumb} class="Slider"><span/></div></div></td></tr></tbody></table>'),behaviour:{click:function(j,k){if(k)this.setActivePage(k.info.pageNumber);else{var o=s.sender(j);if(o==this.scrollbar)o=(s.mouseX(j)-(new m.Layout.Box(o)).left-this.scrollTrumb.offsetWidth/
2)/o.offsetWidth,this.scrollTrumb.style.left=h(o),this.setSpanStartPage(Math.round(o/this.pageWidth_),!0)}s.kill(j)},childNodesModified:function(){this.spanAttr.nodeValue=this.childNodes.length},activePageChanged:function(){this.updateSelection()}},pageSpan_:0,pageCount_:0,activePage_:0,spanStartPage_:-1,pageWidth_:0,init:function(j){j=this.inherit(j);this.setProperties(j.pageCount||0,j.pageSpan);this.setActivePage((j.activePage||1)-1,!0);this.scrollbarDD=new m.DragDrop.DragDropElement({element:this.scrollTrumb,
handlersContext:this,handlers:{start:function(){this.ddPos=this.scrollTrumb.offsetLeft},move:function(j){j=((this.ddPos+j.deltaX)/this.scrollTrumb.offsetParent.offsetWidth).fit(0,1-parseInt(this.scrollTrumb.style.width)/100);this.scrollTrumb.style.left=h(j);this.setSpanStartPage(Math.round(j/this.pageWidth_),!0)}}});this.addEventListener("click");return j},setProperties:function(j,m,o){m=Math.min(m||10,j);if(m!=this.pageSpan_)this.pageSpan_=m,this.setChildNodes(Array.create(m,function(f){return{info:{pageNumber:f}}}));
this.pageWidth_=1/(j||1);if(this.pageCount_!=j)this.pageCount_=j,this.activePageMark.style.width=h(this.pageWidth_),this.dispatch("pageCountChanged",this.pageCount_);this.scrollTrumb.style.width=h(m/(j||1));k.display(this.scrollbarContainer,m<j);this.setSpanStartPage(this.spanStartPage_);this.setActivePage(arguments.length==3?o:this.activePage_)},setActivePage:function(j,k){j=j.fit(0,this.pageCount_-1);if(j!=this.activePage_)this.activePage_=Number(j),this.dispatch("activePageChanged",j);this.activePageMark.style.left=
h(j*this.pageWidth_);k&&this.setSpanStartPage(this.activePage_-Math.round(this.pageSpan_/2)+1)},setSpanStartPage:function(j,k){j=j.fit(0,this.pageCount_-this.pageSpan_);if(j!=this.spanStartPage_){this.spanStartPage_=j;for(var m=0,f;f=this.childNodes[m];m++)f.update({pageNumber:j+m});this.updateSelection()}if(!k)this.scrollTrumb.style.left=h(j/(this.pageCount_||1))},updateSelection:function(){var h=this.childNodes.binarySearch(this.activePage_,"info.pageNumber");h!=-1?this.childNodes[h].select():this.selection.clear()},
destroy:function(){this.scrollbarDD.destroy();delete this.scrollbarDD;this.inherit()}});m.namespace("Basis.Plugin").extend({Paginator:j})})(Basis);
(function(){var m=Basis.Class,h=Basis.DOM,j=Basis.Event,k=Basis.Html.Template,s=Basis.DOM.Wrapper,o=m(s.HtmlNode,{template:new k('<div{element} class="XControl-Item-Header"><span>{titleText}</span></div>'),titleGetter:Function.getter("info.title"),behaviour:{update:function(h,j){this.inherit(h,j);this.titleText.nodeValue=this.titleGetter(this)||"[no title]"}},init:function(h){this.inherit(h);j.addHandler(this.element,"click",function(){this.owner&&this.owner.parentNode&&this.owner.parentNode.scrollToNode(this.owner)},
this)}}),v=m(s.HtmlContainer,{template:new k('<div{element} class="XControl-Item"><span{header}/><div{content|childNodesElement} class="XControl-Item-Content"/></div>'),satelliteConfig:{header:{delegate:Function.$self,instanceOf:o}}}),w=!0,t=m(s.HtmlContainer,{behaviour:{click:function(h,j){j&&j.delegate.parentNode.scrollToNode(j.delegate)}},init:function(h){this.inherit(h);this.document=this;w&&j.addHandler(this.element,"mousewheel",function(h){try{this.owner.content.dispatchEvent(h)}catch(f){w=
!1,j.removeHandler(this.element,"mousewheel")}},this);this.addEventListener("click")}}),m=m(s.Control,{className:"Basis.Plugin.X.Control",childClass:v,template:new k('<div{element} class="XControl"><div{content|childNodesElement} class="XControl-Content"/></div>'),behaviour:{childNodesModified:function(){this.recalc()}},clientHeight_:-1,scrollHeight_:-1,scrollTop_:-1,lastTopPoint:-1,lastBottomPoint:-1,isFit:!0,init:function(k){this.inherit(Object.complete({childNodes:null},k));var m=this.childClass.prototype.satelliteConfig.header.instanceOf;
this.meterHeader=new m({container:this.element,info:{title:"meter"}});this.meterElement=this.meterHeader.element;h.Style.setStyle(this.meterElement,{position:"absolute",visibility:"hidden"});this.childNodesDataset=new s.ChildNodesDataset(this);this.header=new t({container:this.element,childClass:m,collection:this.childNodesDataset,cssClassName:"XControlHeader"});this.footer=new t({container:this.element,childClass:m,collection:this.childNodesDataset,cssClassName:"XControlFooter"});h.hide(this.header.element);
h.hide(this.footer.element);this.header.owner=this;this.footer.owner=this;this.thread=new Basis.Animation.Thread({duration:400,interval:15});this.thread.addHandler({finish:function(){this.callback&&this.callback()}});var f=this;this.modificator=new Basis.Animation.Modificator(this.thread,function(d){f.content.scrollTop=parseInt(d);f.recalc()},0,0,!0);this.modificator.timeFunction=function(d){return Math.sin(Math.acos(1-d))};j.addHandler(this.content,"scroll",this.recalc,this);j.addHandler(window,
"resize",this.recalc,this);this.addEventListener("click","click",!0);k.childNodes&&this.setChildNodes(k.childNodes);this.timer_=setInterval(function(){f.recalc()},500)},scrollToNode:function(j,k){if(j&&j.parentNode===this){var f=Math.min(this.content.scrollHeight-this.content.clientHeight,this.topPoints[h.index(j)])||0;if(this.thread){var d=this.content.scrollTop;this.modificator.setRange(d,d);this.thread.stop();this.modificator.setRange(d,f);d!=f?(this.thread.duration=Math.max(Math.round(400*Math.abs(f-
d)/this.content.scrollHeight),200),this.thread.callback=k,this.thread.start()):k&&k()}else this.content.scrollTop=f,k&&k()}},recalc:function(){var j=this.content,k=j.clientHeight,f=j.scrollHeight,j=j.scrollTop,d=k==f;if(this.clientHeight_!=k||this.scrollHeight_!=f){this.clientHeight_=k;this.scrollHeight_=f;var f=[],m=[];if(!d)for(var o=this.meterElement.offsetHeight,s=0,k=o*this.childNodes.length-k,a,l=0;a=this.childNodes[l];l++)a=a.element.offsetTop,f.push(a?a-s:f[l-1]||0),m.push(a?a+k:m[l-1]||k),
s+=o,k-=o;this.topPoints=f;this.bottomPoints=m;this.lastBottomPoint=this.lastTopPoint=this.scrollTop_=-1}if(this.isFit!=d)this.isFit=d,h.display(this.header.element,!d),h.display(this.footer.element,!d);if(!d&&this.scrollTop_!=j)if(this.scrollTop_=j,d)this.lastTopPoint=0,this.lastBottomPoint=this.childNodes.length;else{var r=this.topPoints.binarySearchPos(j),t=this.bottomPoints.binarySearchPos(j);if(this.lastTopPoint!=r)this.lastTopPoint=r,this.header.childNodes.forEach(function(a,d){a.element.style.display=
d>=r?"none":""});if(this.lastBottomPoint!=t)this.lastBottomPoint=t,this.footer.childNodes.forEach(function(a,d){a.element.style.display=d<t?"none":""})}},destroy:function(){clearInterval(this.timer_);this.thread.destroy();this.modificator.destroy();this.header.destroy();this.footer.destroy();this.childNodesDataset.destroy();j.removeHandler(this.content,"scroll",this.recalc,this);j.removeHandler(window,"resize",this.recalc,this);this.inherit()}});Basis.namespace("Basis.Plugin.X").extend({Control:m,
ControlItem:v,ControlItemHeader:o,ControlHeaderList:t})})();
(function(){var m=Basis.Class,h=Basis.Event,j=Basis.DOM,k=Function.getter,s=Basis.CSS.cssClass,o=h.addGlobalHandler,v=h.removeGlobalHandler,w=Basis.EventObject,t=Basis.Layout,z=Basis.Browser.is("IE9-"),u,f={start:function(d){u&&f.over();u={dde:this,run:!1,event:{initX:h.mouseX(d),initY:h.mouseY(d),deltaX:0,deltaY:0}};o("mousemove",f.move,u);o("mouseup",f.over,u);o("mousedown",f.over,u);h.cancelDefault(d)},move:function(d){var f=u.dde;if(!u.run)u.run=!0,f.draging=!0,f.dispatch("start",u.event);if(f.axisX)u.event.deltaX=
f.axisXproxy(h.mouseX(d)-u.event.initX);if(f.axisY)u.event.deltaY=f.axisYproxy(h.mouseY(d)-u.event.initY);f.dispatch("move",u.event)},over:function(){var d=u.dde;v("mousemove",f.move,u);v("mouseup",f.over,u);v("mousedown",f.over,u);d.draging=!1;u.run&&d.dispatch("over",u.event);u=null}},k=m(w,{className:"Basis.DragDrop.DragDropElement",containerGetter:k("element"),element:null,trigger:null,baseElement:null,fixTop:!0,fixRight:!0,fixBottom:!0,fixLeft:!0,axisX:!0,axisY:!0,axisXproxy:Function.$self,axisYproxy:Function.$self,
init:function(d){this.inherit(d);if(typeof d=="object"){for(var f="fixLeft,fixRight,fixTop,fixBottom,axisX,axisY".split(","),h=0;h<f.length;h++)f[h]in d&&(this[f[h]]=!!d[f[h]]);if(typeof d.axisXproxy=="function")this.axisXproxy=d.axisXproxy;if(typeof d.axisYproxy=="function")this.axisYproxy=d.axisYproxy;if(typeof d.containerGetter=="function")this.containerGetter=d.containerGetter;this.setElement(d.element,d.trigger);this.setBase(d.baseElement)}Basis.Cleaner.add(this)},setElement:function(d,k){d=
d&&j.get(d);k=k&&j.get(k)||d;if(this.trigger!=k&&(this.trigger&&(h.removeHandler(this.trigger,"mousedown",f.start,this),z&&h.removeHandler(this.trigger,"selectstart",f.start,this)),this.trigger=k))h.addHandler(this.trigger,"mousedown",f.start,this),z&&h.addHandler(this.trigger,"selectstart",f.start,this);if(this.element!=d)this.element&&s(this.element).remove("Basis-Dragable"),(this.element=d)&&s(this.element).add("Basis-Dragable")},setBase:function(d){this.baseElement=j.get(d)||(Basis.Browser.is("IE7-")?
document.body:document.documentElement)},isDraging:function(){return!!(u&&u.dde==this)},start:function(d){this.isDraging()||f.start.call(this,d)},stop:function(){this.isDraging()&&f.over()},destroy:function(){Basis.Cleaner.remove(this);this.stop();this.inherit();this.setElement();this.setBase()}}),m=m(k,{behaviour:{start:function(d){var f=this.containerGetter(this,d.initX,d.initY);if(f){var h=new t.Box(f),j=new t.Viewport(this.baseElement);s(f).add("Basis-DragDrop-DragElement");d.element=f;d.box=
h;d.viewport=j}else console.warn("sdfsf")},move:function(d){if(d.element){if(this.axisX){var f=d.box.left+d.deltaX;this.fixLeft&&f<0?f=0:this.fixRight&&f+d.box.width>d.viewport.width&&(f=d.viewport.width-d.box.width);d.element.style.left=f+"px"}if(this.axisY)f=d.box.top+d.deltaY,this.fixTop&&f<0?f=0:this.fixBottom&&f+d.box.height>d.viewport.height&&(f=d.viewport.height-d.box.height),d.element.style.top=f+"px"}},over:function(d){d.element&&s(d.element).remove("Basis-DragDrop-DragElement")}}});Basis.namespace("Basis.DragDrop").extend({DragDropElement:k,
MoveableElement:m})})();
